(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{WaiA:function(t,e,i){"use strict";i.r(e),i.d(e,"PrimaryOrdersModule",(function(){return ft}));var r=i("ofXK"),s=i("tyNb");class o{get id(){return this._id}set id(t){this._id=t}get orderContent(){return this._orderContent}set orderContent(t){this._orderContent=t}get frieght_price(){return this._frieght_price||0}set frieght_price(t){this._frieght_price=t}get booker_lats(){return this._booker_lats||0}set booker_lats(t){this._booker_lats=t}get booker_longs(){return this._booker_longs||0}set booker_longs(t){this._booker_longs=t}get within_radius(){return this._within_radius||0}set within_radius(t){this._within_radius=t}get phone_order(){return this._phone_order||0}set phone_order(t){this._phone_order=t}get offline_order(){return this._offline_order||0}set offline_order(t){this._offline_order=t}get distributor_id(){return this._distributor_id||0}set distributor_id(t){this._distributor_id=t}get date(){return this._date}set date(t){this._date=t}get distributor_name(){return this._distributor_name}set distributor_name(t){this._distributor_name=t}get employee_name(){return this._employee_name}set employee_name(t){this._employee_name=t}get employee_id(){return this._employee_id}set employee_id(t){this._employee_id=t}get distributor_phone(){return this._distributor_phone}set distributor_phone(t){this._distributor_phone=t}get distributor_address(){return this._distributor_address}set distributor_address(t){this._distributor_address=t}get status(){return this._status}set status(t){this._status=t}get created_at(){return this._created_at||new Date}set created_at(t){this._created_at=t}get grossPrice(){return this._orderContent?this.orderContent.reduce((t,e)=>t+e.grossPrice,0):0}get discount(){let t=0;return this._orderContent&&(t=this.getDiscountByField("tradeOffer")+this.getDiscountByField("distributorDiscount")+this.getDiscountByField("specialDiscount")+this.getDiscountByField("extraDiscount")),t}get subTotal(){return this.grossPrice-this.discount}get tax(){return this.orderContent?this.getDiscountByField("tax"):0}get subTotalPlusFrieghtPrice(){return this.subTotal+this.frieght_price}get total(){return this.subTotalPlusFrieghtPrice+this.tax}get totalItemsQty(){return this.orderContent.reduce((t,e)=>t+e.parent_qty_sold,0)}getDiscountByField(t){return this.orderContent.reduce((e,i)=>e+i[t],0)}}var n=i("XSw2"),d=class{static calGrossAmount(t,e){return t*e}static calTradeOfferPrice(t,e,i,r,s,o,d,c){let a;switch(t){case n.b.DOTP:a=this.applyDOTPScheme(e,r,s);break;case n.b.FREE_PRODUCT:switch(o){case n.a.DISCOUNT_ON_TRADE_PRICE:a=this.applyFreeProductDiscountOnTradePrice(e,i,d,c,r);break;case n.a.DISCOUNT_ON_HALF_QUANTITY:a=this.applyFreeProductDiscountOnHalfQuantity(e,i,c,r);break;case n.a.DISCOUNT_ON_MINIMUM_QUANTITY_RESTRICTION:a=this.applyFreeProductDiscountOnMinQuantityRes(e,i,c,r);break;case n.a.FREE_PRODUCTS:a=this.applyFreeProductMustProdDiscountOnMinQuantity(e,i,r)}}return a}static applyFreeProductMustProdDiscountOnMinQuantity(t,e,i){const r=parseInt((i/t).toString());return this.multiply(e,r)}static applyFreeProductDiscountOnMinQuantityRes(t,e,i,r){const s=this.getDiscountOnUnitQty(i,t,e),o=t*parseInt((r/t).toString());return this.multiply(s,o)}static applyFreeProductDiscountOnHalfQuantity(t,e,i,r){const s=t/2,o=this.getDiscountOnUnitQty(i,t,e)/2,n=s*parseInt((r/s).toString());return this.multiply(o,n)}static applyFreeProductDiscountOnTradePrice(t,e,i,r,s){const o=this.getDiscountOnUnitQty(r,t,e);return this.multiply(o,s)}static getDiscountOnUnitQty(t,e,i){return t-this.calGrossAmount(t,e)/(e+i)}static multiply(t,e){return t*e}static applyDOTPScheme(t,e,i){return parseInt((e/t).toString())*i}static calDistributorDiscount(t,e,i){return t*(e/100)*i}static calSpeacialDiscount(t,e){return t*e}static calExtraOrBookerDiscount(t,e){return t?t*e:0}static calTax(t,e,i){return t*e/100*i}};function c(t){const e=new a;return e.id=t.id,e.brand_id=t.brand_id,e.parent_unit_quantity=t.item_quantity_booker/t.parent_qty_sold,e.booked_order_value=t.booked_order_value,e.booked_total_qty=t.booked_total_qty,e.booker_discount=t.booker_discount,e.distributor_discount=t.distributor_discount,e.distributor_discount_pkr=t.distributor_discount_pkr,e.final_price=t.final_price,e.gift_value=t.gift_value,e.item_id=t.item_id,e.item_name=t.item_name,e.item_quantity_booker=t.item_quantity_booker,e.item_quantity_updated=t.item_quantity_updated,e.item_retail_price=t.item_retail_price,e.item_sku=t.item_sku,e.original_price=t.original_price,e.parent_item_retail_price=t.parent_item_retail_price,e.parent_pref_id=t.parent_pref_id,e.parent_qty_sold=t.parent_qty_sold,e.parent_tp=t.parent_tp,e.parent_unit_id=t.parent_unit_id,e.pref_id=t.pref_id,e.product_image=t.product_image,e.scheme_discount=t.scheme_discount,e.scheme_id=t.scheme_id,e.scheme_min_quantity=t.scheme_min_quantity,e.scheme_quantity_free=t.scheme_quantity_free,e.scheme_rule=t.scheme_rule,e.scheme_type=t.scheme_type,e.special_discount=t.special_discount,e.special_discount_pkr=t.special_discount||0,e.tax_amount=t.tax_amount,e.tax_class_id=t.tax_class_id,e.tax_in_value=t.tax_in_value,e.total_discount=t.total_discount,e.total_retail_price=t.total_retail_price,e.total_tax_amount=t.total_tax_amount,e.unit_id=t.unit_id,e.unit_name=t.unit_name,e.unit_price=t.unit_price,e.scheme_discount_on_tp=t.scheme_discount,e}class a{get id(){return this._id}set id(t){this._id=t}get grossPrice(){return d.calGrossAmount(this.parent_tp,this.parent_qty_sold)}get tradeOffer(){return this.scheme_id&&this.rule_name!==n.a.FREE_PRODUCTS?d.calTradeOfferPrice(this.scheme_type,this.scheme_min_quantity,this._scheme_quantity_free,this.parent_qty_sold,this.scheme_discount_on_tp,this.rule_name,this.grossPrice,this.parent_tp):0}get schemeFreeProdsCount(){return this.scheme_id&&this.rule_name===n.a.FREE_PRODUCTS?d.calTradeOfferPrice(this.scheme_type,this.scheme_min_quantity,this._scheme_quantity_free,this.parent_qty_sold,this.scheme_discount_on_tp,this.rule_name,this.grossPrice,this.parent_tp):0}get distributorDiscount(){return d.calDistributorDiscount(this.distributor_discount,this.parent_tp,this.parent_qty_sold)}get specialDiscount(){return d.calSpeacialDiscount(this.special_discount,this.parent_qty_sold)}get extraDiscount(){return d.calExtraOrBookerDiscount(this.booker_discount,this.parent_qty_sold)}get tax(){return d.calTax(this.tax_amount,this.item_retail_price,this.parent_qty_sold)}get totalBill(){return this.grossPrice-this.tradeOffer-this.distributorDiscount-this.specialDiscount-this.extraDiscount+this.tax}get totalBillWithoutExtraDisocunt(){return this.grossPrice-this.tradeOffer-this.distributorDiscount-this.specialDiscount+this.tax}get maxBookerDiscount(){return this._maxBookerDiscount}set maxBookerDiscount(t){this._maxBookerDiscount=t}get parent_unit_quantity(){return this._parent_unit_quantity}set parent_unit_quantity(t){this._parent_unit_quantity=t}get brand_id(){return this._brand_id}set brand_id(t){this._brand_id=t||null}get parent_value_sold(){return this._parent_value_sold}set parent_value_sold(t){this._parent_value_sold=t||null}get booked_order_value(){return this._booked_order_value}set booked_order_value(t){this._booked_order_value=t}get booked_total_qty(){return this._booked_total_qty}set booked_total_qty(t){this._booked_total_qty=t}get booker_discount(){return this._booker_discount}set booker_discount(t){this._booker_discount=t||0}get distributor_discount(){return this._distributor_discount}set distributor_discount(t){this._distributor_discount=t}get distributor_discount_pkr(){return this._distributor_discount_pkr}set distributor_discount_pkr(t){this._distributor_discount_pkr=t}get final_price(){return this._final_price}set final_price(t){this._final_price=t}get gift_value(){return this._gift_value}set gift_value(t){this._gift_value=t||0}get item_id(){return this._item_id}set item_id(t){this._item_id=t}get item_name(){return this._item_name}set item_name(t){this._item_name=t}get item_quantity_booker(){return this._item_quantity_booker}set item_quantity_booker(t){this._item_quantity_booker=t}get item_quantity_updated(){return this._item_quantity_updated}set item_quantity_updated(t){this._item_quantity_updated=t}get item_retail_price(){return this._item_retail_price}set item_retail_price(t){this._item_retail_price=t}get item_sku(){return this._item_sku}set item_sku(t){this._item_sku=t}get original_price(){return this._original_price}set original_price(t){this._original_price=t}get parent_item_retail_price(){return this._parent_item_retail_price}set parent_item_retail_price(t){this._parent_item_retail_price=t}get parent_pref_id(){return this._parent_pref_id}set parent_pref_id(t){this._parent_pref_id=t}get parent_qty_sold(){return this._parent_qty_sold}set parent_qty_sold(t){this._parent_qty_sold=t,this.maxBookerDiscount=this.totalBillWithoutExtraDisocunt/this.parent_qty_sold}get parent_tp(){return this._parent_tp}set parent_tp(t){this._parent_tp=t}get parent_unit_id(){return this._parent_unit_id}set parent_unit_id(t){this._parent_unit_id=t}get pref_id(){return this._pref_id}set pref_id(t){this._pref_id=t}get product_image(){return this._product_image}set product_image(t){this._product_image=t}get scheme_discount(){return this._scheme_discount}set scheme_discount(t){this._scheme_discount=t}get scheme_id(){return this._scheme_id}set scheme_id(t){this._scheme_id=t||0}get scheme_discount_on_tp(){return this._scheme_discount_on_tp}set scheme_discount_on_tp(t){this._scheme_discount_on_tp=t||0}get scheme_min_quantity(){return this._scheme_min_quantity||0}set scheme_min_quantity(t){this._scheme_min_quantity=t||0}get scheme_quantity_free(){return this._scheme_quantity_free}set scheme_quantity_free(t){this._scheme_quantity_free=t||0}get scheme_rule(){return this._scheme_rule}set scheme_rule(t){this._scheme_rule=t||0}get rule_name(){return n.c[""+this.scheme_rule]}set rule_name(t){this._rule_name=t}get scheme_type(){return this._scheme_type}set scheme_type(t){this._scheme_type=t||"0"}get special_discount(){return this._special_discount}set special_discount(t){this._special_discount=t}get special_discount_pkr(){return this._special_discount_pkr}set special_discount_pkr(t){this._special_discount_pkr=t}get tax_amount(){return this._tax_amount}set tax_amount(t){this._tax_amount=t}get tax_class_id(){return this._tax_class_id}set tax_class_id(t){this._tax_class_id=t}get tax_in_value(){return this._tax_in_value}set tax_in_value(t){this._tax_in_value=t}get total_discount(){return this._total_discount}set total_discount(t){this._total_discount=t}get total_retail_price(){return this._total_retail_price}set total_retail_price(t){this._total_retail_price=t}get total_tax_amount(){return this._total_tax_amount}set total_tax_amount(t){this._total_tax_amount=t}get unit_id(){return this._unit_id}set unit_id(t){this._unit_id=t}get unit_name(){return this._unit_name}set unit_name(t){this._unit_name=t}get unit_price(){return this._unit_price}set unit_price(t){this._unit_price=t}get unit_price_after_booker_discount(){return(this.grossPrice-this.extraDiscount)/this.parent_qty_sold}get unit_price_after_distributor_discount(){return(this.grossPrice-this.distributorDiscount)/this.parent_qty_sold}get unit_price_after_scheme_discount(){return(this.grossPrice-this.tradeOffer)/this.parent_qty_sold}get unit_price_after_special_discount(){return(this.grossPrice-this.specialDiscount)/this.parent_qty_sold}get allDiscounts(){return this.tradeOffer+this.distributorDiscount+this.extraDiscount}get totalRetailPrice(){return this.item_retail_price*this.parent_qty_sold}get quantity(){return this.parent_unit_quantity*this.parent_qty_sold}}var b=i("UYTb"),u=i("Rb2t"),l=i("AytR"),_=i("fXoL"),h=i("2Vo4"),p=i("oo4J");class m{constructor(t=null){this._orderItem=t,this._orderItem&&this.setFields()}setFields(){this.sku=this.orderItem.item_sku,this.itemName=this.orderItem.item_name,this.quantity=this.orderItem.parent_qty_sold,this.tp=this.orderItem.parent_tp,this.grossPrice=d.calGrossAmount(this.tp,this.quantity),this.distributorDiscount=d.calDistributorDiscount(this.orderItem.distributor_discount,this.tp,this.quantity),this.specialDiscount=d.calSpeacialDiscount(this.orderItem.special_discount,this.quantity),this.extraDiscount=d.calExtraOrBookerDiscount(this.orderItem.booker_discount,this.quantity),this.tax=d.calTax(this.orderItem.tax_amount,this.orderItem.item_retail_price,this.quantity),this.totalBill=this.grossPrice-this.tradeOffer-this.distributorDiscount-this.specialDiscount-this.extraDiscount+this.tax}get orderItem(){return this._orderItem}set orderItem(t){this._orderItem=t}get sku(){return this._sku}set sku(t){this._sku=t}get itemName(){return this._itemName}set itemName(t){this._itemName=t}get quantity(){return this._quantity}set quantity(t){this._quantity=t}get tp(){return this._tp}set tp(t){this._tp=t}get grossPrice(){return this._grossPrice}set grossPrice(t){this._grossPrice=this._tp*this.quantity}get tradeOffer(){return this._tradeOffer}set tradeOffer(t){this._tradeOffer=t}get distributorDiscount(){return this._distributorDiscount}set distributorDiscount(t){this._distributorDiscount=t}get specialDiscount(){return this._specialDiscount}set specialDiscount(t){this._specialDiscount=t}get extraDiscount(){return this._extraDiscount}set extraDiscount(t){this._extraDiscount=t}get tax(){return this._tax}set tax(t){this._tax=t}get totalBill(){return this._totalBill}set totalBill(t){this._totalBill=t}}class g{}var P=i("wd/R"),O=i("ybE4"),y=i("bUwk");let f=(()=>{class t{constructor(t){this.baseService=t,this._orderItemDtos=new h.a([])}get orderItemDtos(){return this._orderItemDtos.asObservable()}setOrderItemDtos(t){this._orderItemDtos.next(this.getOrderItemsDto(t))}pushOrderItemDtos(t){this._orderItemDtos.next(this.getOrderItemsDto(t))}getPendingOrdersList(t){return this.baseService.get(O.b.PURCHASE_HISTORY===t?p.a.PURCHASE_ORDERS:p.a.PENDING_ORDERS+t)}getOderDetailById(t){return this.baseService.get(p.a.FETCH_ORDER_BY_ID+t)}getProductsMetaData(){return this.baseService.get(p.a.GET_PRODUCTS_META_DATA)}getDistributorsEmployees(t){return this.baseService.get(p.a.DISTRIBUTORS_EMPLOYEES+t)}getSubDistributors(){return this.baseService.get(p.a.SUB_DISTRIBUTORS)}updateOrderStatus(t,e){return this.baseService.put(`${p.a.UPDATE_ORDER_STATUS}${t}`,{status:e})}updateOrder(t){const e=this.getOrderModel(t);return this.baseService.put(`${p.a.UPDATE_PRIMARY_ORDER}${t.id}`,e)}saveOrReturnOrder(t,e,i=!1){const r=P(new Date).format("YYYY-MM-DD HH:mm:ss"),s=this.getOrderModel(t);return s.distributor_id=t.distributor_id,s.employee_id=t.employee_id,s.status=i?"":"completed",s.web_order=1,s.order_type=5,s.executed_by_dist=e,s.compeleted_at=r,s.executed_at=r,s.booker_lats=0,s.booker_longs=0,s.within_radius=0,s.phone_order=1,s.offline_order=0,s.created_at=r,s.approved=1,this.baseService.post(""+(i?p.a.RETURN_PRIMARY_ORDER:p.a.SAVE_PRIMARY_ORDER),s)}getOrderModel(t){const e=new g;e.frieght_price=t.frieght_price,e.order_content=new Array;const i=t.orderContent.length;for(let s=0;s<i;s++)e.order_content.push({quantity:(r=t.orderContent[s]).quantity,brand_id:r.brand_id,quantity_returned:0,gross_sale_amount:r.grossPrice,tax_in_percentage:r.tax_amount,total_amount_after_tax:r.totalBill,dispatch_status:null,dispatch_qty:0,dispatch_amount:0,executed_qty:r.parent_qty_sold,executed_amount:0,parent_value_sold:r.grossPrice,booker_discount_pkr:r.extraDiscount,parent_pref_id:r.parent_pref_id,pref_id:r.pref_id,item_id:r.item_id,parent_unit_id:r.parent_unit_id,unit_id:r.unit_id,parent_tp:r.parent_tp,original_price:r.original_price,item_quantity_booker:r.quantity,parent_qty_sold:r.parent_qty_sold,scheme_id:r.scheme_id||0,scheme_min_quantity:r.scheme_min_quantity||0,scheme_quantity_free:r.scheme_quantity_free||0,scheme_rule:r.scheme_rule||0,scheme_type:r.scheme_type||"0",gift_value:r.gift_value||0,scheme_discount:r.scheme_discount_on_tp||0,unit_price_after_scheme_discount:r.unit_price_after_scheme_discount,distributor_discount:r.distributor_discount,distributor_discount_pkr:r.distributorDiscount,unit_price_after_distributor_discount:r.unit_price_after_distributor_discount,special_discount:r.special_discount,unit_price_after_special_discount:r.unit_price_after_special_discount,booker_discount:r.booker_discount,unit_price_after_booker_discount:r.unit_price_after_booker_discount,total_discount:r.allDiscounts,unit_price:r.unit_price,final_price:r.totalBill,booked_total_qty:r.parent_qty_sold,booked_order_value:r.totalBill,parent_item_retail_price:r.grossPrice,item_retail_price:r.item_retail_price,total_retail_price:r.totalRetailPrice,tax_class_id:r.tax_class_id,tax_in_value:r.tax,total_tax_amount:r.tax,special_discount_pkr:r.specialDiscount});var r;return e}getPrimaryOrderItem(t){const e=t.length;let i=new Array;for(let r=0;r<e;r++)i.push(c(t[r]));return i}getOrderDto(t){return new m(t)}getOrderItemsDto(t){const e=[];for(let i=0;i<t.length;i++)e.push(this.getOrderDto(t[i]));return e}}return t.\u0275fac=function(e){return new(e||t)(_.Tb(y.a))},t.\u0275prov=_.Fb({token:t,factory:t.\u0275fac}),t})();var v=i("ZgVV"),D=i("NJqk"),x=i("qew9"),k=i("3Pt+"),S=i("uoBr"),C=i("ZOsW");function I(t,e){1&t&&(_.Pb(0,"span",52),_.vc(1," Please add Quantity! "),_.Ob())}function R(t,e){1&t&&(_.Pb(0,"span",52),_.vc(1," Quantity should be greater than 0! "),_.Ob())}function M(t,e){1&t&&(_.Pb(0,"div",53),_.vc(1," Trade Offer: "),_.Ob())}function w(t,e){if(1&t){const t=_.Qb();_.Pb(0,"div"),_.Pb(1,"div",54),_.Pb(2,"input",55),_.Wb("ngModelChange",(function(e){return _.oc(t),_.Yb(2).selectedProduct.selectedScheme=e})),_.Ob(),_.Pb(3,"label",56),_.vc(4),_.Ob(),_.Ob(),_.Ob()}if(2&t){const t=e.$implicit,i=e.index,r=_.Yb(2);_.yb(2),_.gc("id","byTerritory-",i,""),_.ec("ngModel",r.selectedProduct.selectedScheme)("disabled",!r.selectedProduct.stockQty||+r.selectedProduct.stockQty<=0)("value",t),_.yb(1),_.gc("for","byTerritory-",i,""),_.yb(1),_.wc(t.title)}}function E(t,e){if(1&t){const t=_.Qb();_.Pb(0,"div",43),_.Pb(1,"div",15),_.Pb(2,"div",44),_.vc(3,"Add Quantity:"),_.Ob(),_.Pb(4,"div",45),_.Pb(5,"input",46,47),_.Wb("keyup",(function(){_.oc(t);const e=_.Yb();return e.setQuantity(e.selectedProduct)}))("keydown",(function(e){return _.oc(t),_.Yb().isNumber(e,"quantity")}))("ngModelChange",(function(e){return _.oc(t),_.Yb().selectedProduct.stockQty=e})),_.Ob(),_.tc(7,I,2,0,"span",48),_.tc(8,R,2,0,"span",48),_.Ob(),_.Pb(9,"div",44),_.vc(10,"Unit:"),_.Ob(),_.Pb(11,"div",45),_.vc(12),_.Ob(),_.tc(13,M,2,0,"div",49),_.Pb(14,"div",50),_.tc(15,w,5,6,"div",51),_.Ob(),_.Ob(),_.Ob()}if(2&t){const t=_.nc(6),e=_.Yb();_.yb(5),_.ec("ngModel",e.selectedProduct.stockQty),_.yb(2),_.ec("ngIf",(null==t.errors?null:t.errors.required)&&e.isAdded),_.yb(1),_.ec("ngIf",0==+e.selectedProduct.stockQty&&e.isAdded&&!(null!=t.errors&&t.errors.required)),_.yb(4),_.xc(" ",e.selectedProduct.unit_name," "),_.yb(1),_.ec("ngIf",e.selectedProduct.schemes.length),_.yb(2),_.ec("ngForOf",e.selectedProduct.schemes)}}function K(t,e){1&t&&(_.Pb(0,"div",64),_.vc(1," Scheme "),_.Ob())}function T(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",65),_.Wb("click",(function(){_.oc(t);const e=_.Yb().$implicit;return _.Yb(2).openQuantityModal(e)})),_.vc(1," Add "),_.Ob()}}function q(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",66),_.Wb("click",(function(){_.oc(t);const e=_.Yb().$implicit;return _.Yb(2).deleteOrderItem(e.item_id)})),_.vc(1," Remove "),_.Ob()}}function A(t,e){if(1&t&&(_.Pb(0,"tr"),_.Pb(1,"td"),_.Pb(2,"div",58),_.tc(3,K,2,0,"div",59),_.Kb(4,"img",60),_.Pb(5,"div",61),_.vc(6),_.Ob(),_.Ob(),_.Ob(),_.Pb(7,"td"),_.tc(8,T,2,0,"button",62),_.tc(9,q,2,0,"button",63),_.Ob(),_.Ob()),2&t){const t=e.$implicit;_.yb(3),_.ec("ngIf",null==t.schemes?null:t.schemes.length),_.yb(1),_.fc("src",t.thumbnail,_.pc),_.yb(2),_.wc(t.item_name),_.yb(2),_.ec("ngIf",!t.isAdded),_.yb(1),_.ec("ngIf",t.isAdded)}}function Y(t,e){if(1&t&&(_.Pb(0,"table",57),_.Pb(1,"tbody"),_.tc(2,A,10,5,"tr",51),_.Ob(),_.Ob()),2&t){const t=_.Yb();_.yb(2),_.ec("ngForOf",t.dispProducts)}}function N(t,e){1&t&&(_.Pb(0,"div",67),_.Pb(1,"h2",68),_.vc(2,"Loading Products..."),_.Ob(),_.Ob())}function Q(t,e){1&t&&(_.Pb(0,"div",37),_.Kb(1,"app-loader-white"),_.Ob())}function L(t,e){if(1&t&&(_.Pb(0,"ng-option",99),_.vc(1),_.Ob()),2&t){const t=e.$implicit;_.ec("value",t.id),_.yb(1),_.wc(t.distributor_name)}}function U(t,e){if(1&t){const t=_.Qb();_.Pb(0,"div",94),_.Pb(1,"div",95),_.Pb(2,"ng-select",96),_.Wb("ngModelChange",(function(e){return _.oc(t),_.Yb(2).selectedSubDistributor=e}))("change",(function(){return _.oc(t),_.Yb(2).onSubDistributorChanged()})),_.Pb(3,"ng-option",97),_.vc(4,"Select Sub Distributor"),_.Ob(),_.tc(5,L,2,2,"ng-option",98),_.Ob(),_.Ob(),_.Ob()}if(2&t){const t=_.Yb(2);_.yb(2),_.ec("multiple",!1)("ngModel",t.selectedSubDistributor),_.yb(3),_.ec("ngForOf",t.subDistributors)}}function F(t,e){if(1&t&&(_.Pb(0,"div",100),_.Pb(1,"div",101),_.Pb(2,"strong"),_.vc(3,"Date:"),_.Ob(),_.Pb(4,"span",102),_.vc(5),_.Ob(),_.Ob(),_.Ob()),2&t){const t=_.Yb(2);_.yb(5),_.wc(t.order.date)}}function B(t,e){if(1&t&&(_.Pb(0,"div",103),_.Pb(1,"div",101),_.Pb(2,"strong"),_.vc(3,"Distributor:"),_.Ob(),_.Pb(4,"span",102),_.vc(5),_.Ob(),_.Ob(),_.Ob()),2&t){const t=_.Yb(2);_.yb(5),_.wc(t.order.distributor_name)}}function W(t,e){if(1&t&&(_.Pb(0,"div",104),_.Pb(1,"div",101),_.Pb(2,"strong"),_.vc(3,"Employee:"),_.Ob(),_.Pb(4,"span",102),_.vc(5),_.Ob(),_.Ob(),_.Ob()),2&t){const t=_.Yb(2);_.yb(5),_.wc(t.order.employee_name)}}function Z(t,e){if(1&t&&(_.Pb(0,"div",105),_.Pb(1,"div",15),_.Pb(2,"div",94),_.Pb(3,"strong"),_.vc(4,"Distributor Name: \xa0 "),_.Ob(),_.vc(5),_.Ob(),_.Pb(6,"div",94),_.Pb(7,"strong"),_.vc(8,"Town: \xa0 "),_.Ob(),_.vc(9),_.Ob(),_.Pb(10,"div",94),_.Pb(11,"strong"),_.vc(12,"Distributor Address: \xa0 "),_.Ob(),_.vc(13),_.Ob(),_.Pb(14,"div",94),_.Pb(15,"strong"),_.vc(16,"TSM. Name: \xa0 "),_.Ob(),_.vc(17),_.Ob(),_.Ob(),_.Ob()),2&t){const t=_.Yb(2);_.yb(5),_.xc(" ",(null==t.subDistributor?null:t.subDistributor.distributor_name)||"--"," "),_.yb(4),_.xc(" ",(null==t.subDistributor?null:t.subDistributor.city_name)||"--"," "),_.yb(4),_.xc(" ",(null==t.subDistributor?null:t.subDistributor.distributor_address)||"--"," "),_.yb(4),_.xc(" ",(null==t.subDistributor?null:t.subDistributor.tsm)||"--"," ")}}function $(t,e){if(1&t){const t=_.Qb();_.Pb(0,"tr"),_.Pb(1,"td"),_.vc(2),_.Ob(),_.Pb(3,"td"),_.vc(4),_.Ob(),_.Pb(5,"td"),_.Pb(6,"input",106),_.Wb("ngModelChange",(function(i){return _.oc(t),e.$implicit.parent_qty_sold=i})),_.Ob(),_.vc(7),_.Ob(),_.Pb(8,"td"),_.vc(9),_.Zb(10,"number"),_.Ob(),_.Pb(11,"td"),_.vc(12),_.Zb(13,"number"),_.Ob(),_.Pb(14,"td"),_.vc(15),_.Zb(16,"number"),_.Ob(),_.Pb(17,"td"),_.vc(18),_.Zb(19,"number"),_.Ob(),_.Pb(20,"td"),_.vc(21),_.Zb(22,"number"),_.Ob(),_.Pb(23,"td"),_.Pb(24,"input",107),_.Wb("ngModelChange",(function(i){return _.oc(t),e.$implicit.booker_discount=i})),_.Ob(),_.Ob(),_.Pb(25,"td"),_.vc(26),_.Zb(27,"number"),_.Ob(),_.Pb(28,"td"),_.vc(29),_.Zb(30,"number"),_.Ob(),_.Pb(31,"td"),_.Pb(32,"button",108),_.Wb("click",(function(){_.oc(t);const i=e.$implicit;return _.Yb(2).deleteOrderItem(i.item_id)})),_.vc(33," Delete "),_.Ob(),_.Ob(),_.Ob()}if(2&t){const t=e.$implicit;_.yb(2),_.wc(t.item_sku),_.yb(2),_.wc(t.item_name),_.yb(2),_.ec("ngModel",t.parent_qty_sold),_.yb(1),_.xc(" ",t.schemeFreeProdsCount?"+"+t.schemeFreeProdsCount:""," "),_.yb(2),_.wc(_.bc(10,13,t.parent_tp,"1.2-2")),_.yb(3),_.xc(" ",_.bc(13,16,t.grossPrice,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(16,19,t.tradeOffer,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(19,22,t.distributor_discount,"1.2-2")," "),_.yb(3),_.wc(_.bc(22,25,t.specialDiscount,"1.2-2")),_.yb(3),_.fc("max",t.maxBookerDiscount),_.ec("ngModel",t.booker_discount),_.yb(2),_.xc(" ",_.bc(27,28,t.tax_amount,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(30,31,t.totalBill,"1.2-2")," ")}}function z(t,e){1&t&&_.Kb(0,"span",111)}function G(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",109),_.Wb("click",(function(){return _.oc(t),_.Yb(2).saveOrder()})),_.tc(1,z,1,0,"span",110),_.vc(2),_.Ob()}if(2&t){const t=_.Yb(2);_.yb(1),_.ec("ngIf",t.saving),_.yb(1),_.xc(" ",t.saving?"Updateing":"Save Order"," ")}}function H(t,e){1&t&&_.Kb(0,"span",111)}function J(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",109),_.Wb("click",(function(){return _.oc(t),_.Yb(2).saveOrder()})),_.tc(1,H,1,0,"span",110),_.vc(2),_.Ob()}if(2&t){const t=_.Yb(2);_.yb(1),_.ec("ngIf",t.saving),_.yb(1),_.xc(" ",t.saving?"Creating":"Save Order"," ")}}function j(t,e){1&t&&_.Kb(0,"span",111)}function X(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",109),_.Wb("click",(function(){return _.oc(t),_.Yb(2).saveOrder()})),_.tc(1,j,1,0,"span",110),_.vc(2),_.Ob()}if(2&t){const t=_.Yb(2);_.yb(1),_.ec("ngIf",t.saving),_.yb(1),_.xc(" ",t.saving?"Returning":"Return Order"," ")}}const V=function(){return["/primaryOrders"]};function tt(t,e){if(1&t){const t=_.Qb();_.Pb(0,"div",69),_.Pb(1,"div",70),_.Pb(2,"div",71),_.Pb(3,"div",15),_.tc(4,U,6,3,"div",72),_.tc(5,F,6,1,"div",73),_.tc(6,B,6,1,"div",74),_.tc(7,W,6,1,"div",75),_.Pb(8,"div",76),_.Pb(9,"button",77),_.Wb("click",(function(e){return _.oc(t),_.Yb().showProductsList(e)})),_.vc(10," Add Product "),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.tc(11,Z,18,4,"div",78),_.Pb(12,"div",15),_.Pb(13,"div",37),_.Kb(14,"hr",79),_.Ob(),_.Pb(15,"div",37),_.Pb(16,"table",80),_.Pb(17,"thead"),_.Pb(18,"tr"),_.Pb(19,"th"),_.vc(20,"SKU"),_.Ob(),_.Pb(21,"th"),_.vc(22,"Item Name"),_.Ob(),_.Pb(23,"th"),_.vc(24,"Quantity"),_.Ob(),_.Pb(25,"th"),_.vc(26,"T.P"),_.Ob(),_.Pb(27,"th"),_.vc(28,"GR.Amt"),_.Ob(),_.Pb(29,"th"),_.vc(30,"T.O"),_.Ob(),_.Pb(31,"th"),_.vc(32,"Dist.Disc%"),_.Ob(),_.Pb(33,"th"),_.vc(34,"Spec.Disc"),_.Ob(),_.Pb(35,"th"),_.vc(36,"B.Disc.Amt"),_.Ob(),_.Pb(37,"th"),_.vc(38,"Tax"),_.Ob(),_.Pb(39,"th"),_.vc(40,"Total Bill"),_.Ob(),_.Pb(41,"th"),_.vc(42,"Action"),_.Ob(),_.Ob(),_.Ob(),_.Pb(43,"tfoot",81),_.Pb(44,"tr"),_.Pb(45,"th"),_.vc(46,"Total items:"),_.Ob(),_.Pb(47,"th",82),_.vc(48),_.Ob(),_.Kb(49,"th"),_.Kb(50,"th"),_.Kb(51,"th"),_.Kb(52,"th"),_.Kb(53,"th"),_.Kb(54,"th"),_.Kb(55,"th"),_.Pb(56,"th"),_.vc(57,"Gross Amount."),_.Ob(),_.Pb(58,"th",83),_.vc(59),_.Zb(60,"number"),_.Ob(),_.Kb(61,"th"),_.Ob(),_.Pb(62,"tr"),_.Kb(63,"th"),_.Kb(64,"th"),_.Kb(65,"th"),_.Kb(66,"th"),_.Kb(67,"th"),_.Kb(68,"th"),_.Kb(69,"th"),_.Kb(70,"th"),_.Kb(71,"th"),_.Pb(72,"th"),_.vc(73,"Order Discount."),_.Ob(),_.Pb(74,"th",84),_.vc(75),_.Zb(76,"number"),_.Ob(),_.Kb(77,"th"),_.Ob(),_.Pb(78,"tr"),_.Kb(79,"th"),_.Kb(80,"th"),_.Kb(81,"th"),_.Kb(82,"th"),_.Kb(83,"th"),_.Kb(84,"th"),_.Kb(85,"th"),_.Kb(86,"th"),_.Kb(87,"th"),_.Pb(88,"th"),_.vc(89,"Subtotal PKR."),_.Ob(),_.Pb(90,"th",85),_.vc(91),_.Zb(92,"number"),_.Ob(),_.Kb(93,"th"),_.Ob(),_.Pb(94,"tr"),_.Kb(95,"th"),_.Kb(96,"th"),_.Kb(97,"th"),_.Kb(98,"th"),_.Kb(99,"th"),_.Kb(100,"th"),_.Kb(101,"th"),_.Kb(102,"th"),_.Kb(103,"th"),_.Pb(104,"th"),_.vc(105,"Frieght Price."),_.Ob(),_.Pb(106,"th"),_.Pb(107,"input",86),_.Wb("ngModelChange",(function(e){return _.oc(t),_.Yb().order.frieght_price=e})),_.Ob(),_.Ob(),_.Kb(108,"th"),_.Ob(),_.Pb(109,"tr"),_.Kb(110,"th"),_.Kb(111,"th"),_.Kb(112,"th"),_.Kb(113,"th"),_.Kb(114,"th"),_.Kb(115,"th"),_.Kb(116,"th"),_.Kb(117,"th"),_.Kb(118,"th"),_.Pb(119,"th"),_.vc(120,"Subtotal PKR."),_.Ob(),_.Pb(121,"th",87),_.vc(122),_.Zb(123,"number"),_.Ob(),_.Kb(124,"th"),_.Ob(),_.Pb(125,"tr"),_.Kb(126,"th"),_.Kb(127,"th"),_.Kb(128,"th"),_.Kb(129,"th"),_.Kb(130,"th"),_.Kb(131,"th"),_.Kb(132,"th"),_.Kb(133,"th"),_.Kb(134,"th"),_.Pb(135,"th"),_.vc(136,"Tax."),_.Ob(),_.Pb(137,"th",88),_.vc(138),_.Zb(139,"number"),_.Ob(),_.Kb(140,"th"),_.Ob(),_.Pb(141,"tr"),_.Kb(142,"th"),_.Kb(143,"th"),_.Kb(144,"th"),_.Kb(145,"th"),_.Kb(146,"th"),_.Kb(147,"th"),_.Kb(148,"th"),_.Kb(149,"th"),_.Kb(150,"th"),_.Pb(151,"th"),_.vc(152,"Total PKR."),_.Ob(),_.Pb(153,"th",89),_.vc(154),_.Zb(155,"number"),_.Ob(),_.Kb(156,"th"),_.Ob(),_.Ob(),_.Pb(157,"tbody"),_.tc(158,$,34,34,"tr",51),_.Ob(),_.Ob(),_.Pb(159,"div",90),_.Pb(160,"div",91),_.tc(161,G,3,2,"button",92),_.tc(162,J,3,2,"button",92),_.tc(163,X,3,2,"button",92),_.Pb(164,"button",93),_.vc(165," Cancel "),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob()}if(2&t){const t=_.Yb();_.yb(4),_.ec("ngIf",!t.isNew||t.isReturn),_.yb(1),_.ec("ngIf",t.showEditFields),_.yb(1),_.ec("ngIf",t.showEditFields),_.yb(1),_.ec("ngIf",t.showEditFields),_.yb(4),_.ec("ngIf",!t.isNew),_.yb(37),_.xc(" ",t.order.orderContent?t.order.orderContent.length:0," "),_.yb(11),_.xc(" ",_.bc(60,18,t.order.grossPrice,"1.2-2")," "),_.yb(16),_.xc(" - ",_.bc(76,21,t.order.discount,"1.2-2")," "),_.yb(16),_.xc(" ",_.bc(92,24,t.order.subTotal,"1.2-2")," "),_.yb(16),_.ec("ngModel",t.order.frieght_price),_.yb(15),_.xc(" ",_.bc(123,27,t.order.subTotalPlusFrieghtPrice,"1.2-2")," "),_.yb(16),_.xc(" + ",_.bc(139,30,t.order.tax,"1.2-2")," "),_.yb(16),_.xc(" ",_.bc(155,33,t.order.total,"1.2-2")," "),_.yb(4),_.ec("ngForOf",t.order.orderContent),_.yb(3),_.ec("ngIf",t.showEditFields),_.yb(1),_.ec("ngIf",!t.isNew&&!t.isReturn),_.yb(1),_.ec("ngIf",t.isReturn),_.yb(1),_.ec("routerLink",_.hc(36,V))}}let et=(()=>{class t{constructor(t,e,i,r,s,n){this.storageService=t,this.actr=e,this.primarySrvc=i,this.toastService=r,this.dataService=s,this.router=n,this.BASE_URL=l.a.apiDomain,this.subscriptions=[],this.showProducts=!1,this.dispProducts=[],this.selectedProductsIds=[],this.showQuantityModal=!1,this.loadingProducts=!1,this.specialDiscounts=[],this.allProducts=[],this.subInventory=[],this.tradeoffers=[],this.selectedProduct={},this.selectedProducts=[],this.isAdded=!1,this.alreadyAdded=!1,this.loading=!1,this.saving=!1,this.isReturn=!1,this.showEditFields=!1,this.order=new o}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngOnInit(){this.distributor=this.storageService.getItem(u.a.distributor);const t=this.actr.snapshot.params.orderId;this.showEditFields=t>0,this.status=this.actr.snapshot.params.status,this.getProductsMetaData(),this.isReturn="return"===this.actr.snapshot.params.new,this.isNewOrder(),this.isNew&&(this.loading=!0,this.getOrderbyOrderId(t)),this.title=this.isNew?"Edit":"Create",this.isReturn&&(this.title="Return"),this.isNew&&!this.isReturn||this.getDistributorsEmployees(this.distributor.id)}getDistributorsEmployees(t){const e=this.primarySrvc.getSubDistributors().subscribe(t=>{this.subDistributors=t.data});this.subscriptions.push(e)}isNewOrder(){this.isNew="new"!==this.actr.snapshot.params.new}correctIamgeURL(){this.allProducts.forEach(t=>{var e,i;const r=null===(e=t.thumbnail)||void 0===e?void 0:e.split("/");t.thumbnail=r&&r.length&&"https:"===r[0]?this.BASE_URL+"/"+(null===(i=t.thumbnail)||void 0===i?void 0:i.split("/").splice(3).join("/"))||"":this.BASE_URL+"/"+t.thumbnail})}onSubDistributorChanged(){this.subDistributor=this.subDistributors.find(t=>t.id===this.selectedSubDistributor)}getOrderbyOrderId(t){const e=this.primarySrvc.getOderDetailById(t).subscribe(t=>{const e=Object.assign({},t.data.order);this.order.distributor_name=e.distributor_name,this.order.employee_name=e.employee_name,this.order.date=e.date,this.order.id=e.id,this.order.frieght_price=e.frieght_price,this.order.orderContent=this.primarySrvc.getPrimaryOrderItem([...t.data.content]),this.loading=!1});this.subscriptions.push(e)}showProductsList(t){t.stopPropagation(),this.allProducts=this.allProducts.map(t=>t),this.dispProducts=[...this.allProducts],this.showProducts=!0,document.body.classList.add("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.add("d-block"),document.getElementById("blureEffct-1").classList.add("blur-div")}getProductsMetaData(){this.loadingProducts=!0;const t=this.primarySrvc.getProductsMetaData().subscribe(t=>{if(200===t.status){if(this.showEditFields)for(let e=0;e<this.order.orderContent.length;e++)this.allProducts=t.data.inventory.map(t=>(t.isAdded=this.order.orderContent[e].item_id===t.item_id,t.net_amount=0,t));else this.allProducts=t.data.inventory.map(t=>(t.isAdded=!1,t.net_amount=0,t));this.correctIamgeURL(),this.specialDiscounts=t.data.special_discount,this.dispProducts=[...this.allProducts],this.subInventory=t.data.sub_inventory,this.tradeoffers=t.data.tradeoffers,this.loadingProducts=!1}else this.toastService.showToaster({type:"error",message:t.message,title:"Error:"})},t=>{this.loadingProducts=!1,1!==t.status&&401!==t.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch counter sale data. Please try again",title:"Error:"})});this.subscriptions.push(t)}clickedOutSide(t){!this.showProducts||this.showQuantityModal||t.target.classList.contains("dont-close-products")||this.closeProductsList()}closeProductsList(){this.showProducts=!1,document.body.classList.remove("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.remove("d-block"),document.getElementById("blureEffct-1").classList.remove("blur-div")}searchProduct(){this.dispProducts=this.allProducts.filter(t=>t.item_name.toLowerCase().includes(this.productSearchText.toLowerCase()))}displayProductsIsAddedStatus(t=!1,e=0){const i=this.dispProducts.length;for(let r=0;r<i;r++)if(this.dispProducts[r].item_id===e){this.dispProducts[r].isAdded=t;break}}addProductToOrder(t){this.order.orderContent||this.isNew||(this.order.orderContent=new Array),this.order.orderContent.push(function(t){const e=new a;return e.brand_id=t.brand_id,e.parent_unit_quantity=t.parent.quantity,e.scheme_discount=t.scheme_discount,e.booker_discount=0,e.distributor_discount=t.dist_discount,e.item_id=t.item_id,e.item_name=t.item_name,e.item_retail_price=t.item_retail_price,e.item_sku=t.item_sku,e.original_price=t.parent.item_trade_price,e.parent_pref_id=t.parent.id,e.parent_qty_sold=t.stockQty,e.parent_tp=t.item_trade_price,e.parent_unit_id=t.parent.unit_id,e.pref_id=t.pref_id,t.selectedScheme&&(e.scheme_id=t.selectedScheme.id,e.scheme_discount_on_tp=t.selectedScheme.discount_on_tp,e.scheme_min_quantity=t.selectedScheme.min_qty,e.scheme_quantity_free=t.selectedScheme.quantity_free,e.scheme_rule=t.selectedScheme.scheme_rule,e.rule_name=t.selectedScheme.rule_name,e.scheme_type=t.selectedScheme.scheme_type,e.gift_value=t.selectedScheme.gift_value),e.special_discount=t.spec_discount,e.tax_amount=t.tax_amount,e.tax_class_id=t.tax_class_id,e.unit_id=t.unit_id,e.unit_name=t.unit_name,e.unit_price=t.parent.item_trade_price,e}(this.selectedProduct)),this.displayProductsIsAddedStatus(!0,this.selectedProduct.item_id),this.showQuantityModal=!1}removeProductFromOrder(t){this.selectedProducts=this.selectedProducts.filter(e=>e.item_id===t.item_id&&e.unit_name!==t.unit_name||e.item_id!==t.item_id?e:void 0),this.allProducts=this.allProducts.map(e=>(e.item_id===t.item_id&&(e.isAdded=!1),e)),this.dispProducts=this.dispProducts.map(e=>(e.item_id===t.item_id&&(e.isAdded=!1),e)),this.selectedProductsIds=this.selectedProductsIds.filter(e=>e!==t.item_id)}closeQuantityModal(t){this.showQuantityModal&&!t.target.classList.contains("dont-close-quantity")&&(this.showQuantityModal=!1,this.selectedProduct={})}openQuantityModal(t){var e;this.showQuantityModal=!0,(null===(e=t.schemes)||void 0===e?void 0:e.length)&&(t.schemes=t.schemes.map(t=>{switch(t.isAvailable=!1,t.scheme_type){case"free_product":t.name=n.d.free_products,t.rule_name=n.c[t.scheme_rule];break;case"dotp":t.name=n.d.dotp;break;default:t.name=n.d.gift}return t})),this.selectedProduct=Object.assign({},t),this.selectedProduct.selectedScheme=null}setQuantity(t){+t.stockQty>1e3&&(t.stockQty=0),t.item_trade_price&&this.selectedProducts.find(e=>e.item_id===t.item_id)&&(this.grossAmount=this.grossAmount-t.original_amount||0)}isNumber(t,e="charges"){return this.dataService.isNumber(t,e)}applyGiftScheme(t){return this.dataService.getSDForGift(t)}deleteOrderItem(t){this.order.orderContent=this.order.orderContent.filter(e=>e.item_id!==t),this.displayProductsIsAddedStatus(!1,t)}saveOrder(){var t,e;this.saving=!0,this.showEditFields?this.primarySrvc.updateOrder(this.order).subscribe(t=>{200===t.status?(this.toastService.showToaster({type:"success",message:"Order updated successfully!",title:"Order Updated:"}),this.router.navigate(["/primaryOrders/booked"])):this.toastService.showToaster({type:"error",message:t.message,title:"Error:"}),this.saving=!1},t=>{1!==t.status&&401!==t.status&&(this.toastService.showToaster({type:"error",message:"Cannot save order. Please try again",title:"Error:"}),this.saving=!1)}):this.selectedSubDistributor&&this.order.orderContent&&(null===(t=this.order.orderContent)||void 0===t?void 0:t.length)?(this.order.distributor_id=this.selectedSubDistributor,this.order.employee_id=this.subDistributor.tsm_id,this.primarySrvc.saveOrReturnOrder(this.order,this.distributor.id,this.isReturn).subscribe(t=>{200===t.status?(this.toastService.showToaster({type:"success",message:"Order created successfully!",title:"Order Created:"}),this.router.navigate(["/primaryOrders/booked"])):this.toastService.showToaster({type:"error",message:t.message,title:"Error:"}),this.saving=!1},t=>{1!==t.status&&401!==t.status&&(this.toastService.showToaster({type:"error",message:"Cannot save order. Please try again",title:"Error:"}),this.saving=!1)})):this.selectedSubDistributor?(null===(e=this.order.orderContent)||void 0===e?void 0:e.length)||(this.toastService.showToaster({type:"error",message:"Please add atleast one product",title:"Error:"}),this.saving=!1):(this.toastService.showToaster({type:"error",message:"Please select sub distributor",title:"Error:"}),this.saving=!1)}}return t.\u0275fac=function(e){return new(e||t)(_.Jb(b.a),_.Jb(s.a),_.Jb(f),_.Jb(v.a),_.Jb(D.a),_.Jb(s.f))},t.\u0275cmp=_.Db({type:t,selectors:[["app-edit-order"]],decls:71,vars:9,consts:[["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top_border"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","dont-close-products",3,"click"],["aria-hidden","true",1,"dont-close-products"],["class","modal-body AddDetailPR",4,"ngIf"],[1,"modal-footer","border-0",2,"background-color","#f6f6f6"],["type","button","id","pl-qty-close","data-dismiss","modal","aria-label","Close",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","pl-qty-close","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel","dont-close-products",3,"click"],["id","product-cl-sec",3,"ngClass","clickOutside"],["id","pl-close",1,"close-btn-pl",3,"click"],[1,"pro-header-text"],[1,"se_cus-type","form-wrap","p-15"],[1,"row"],[1,"col-12"],[1,"productSearch"],[1,"fa","fa-search"],["type","text","id","","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"pc-cartlist"],[1,"overflow-plist"],[1,"plist-content"],[1,"_left-filter","pt-0"],[1,"container"],[1,"card","top_border","p-15"],["class","AddProductTable","width","100%",4,"ngIf"],["class","col-md-12 loader",4,"ngIf"],[1,"_cl-bottom"],["id","pl-prod-close","type","butotn",1,"btn","btn-cancel","mr-2",3,"click"],["id","blureEffct-1",1,"container-fluid"],[1,"overlay-blure"],[1,"row","mt-2","mb-3"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],["href","#"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"body","PT-15"],["class","col-md-12",4,"ngIf"],["id","floating-label",4,"ngIf"],[1,"modal-body","AddDetailPR"],[1,"col-md-4","pt-7","mb-15"],[1,"col-md-8","mb-15"],["type","text","placeholder","","required","","placeholder","0",1,"form-control",2,"font-size","13px",3,"ngModel","keyup","keydown","ngModelChange"],["selectedQty","ngModel"],["class","input-error",4,"ngIf"],["class","col-md-4","style","padding-top: 2px",4,"ngIf"],[1,"col-md-8"],[4,"ngFor","ngForOf"],[1,"input-error"],[1,"col-md-4",2,"padding-top","2px"],[1,"custom-control","custom-radio"],["type","radio","name","AssignCatalogue",1,"custom-control-input",3,"ngModel","disabled","id","value","ngModelChange"],[1,"custom-control-label","font13",2,"line-height","25px",3,"for"],["width","100%",1,"AddProductTable"],[1,"ProListDiv"],["class","lab-promotion",4,"ngIf"],["alt","",1,"PrList_img",3,"src"],[1,"PR_Name"],["data-toggle","modal","data-target","#exampleModal","class","btn btn-default mb-0 dont-close-quantity",3,"click",4,"ngIf"],["class","btn btn-default mb-0 red-bg",3,"click",4,"ngIf"],[1,"lab-promotion"],["data-toggle","modal","data-target","#exampleModal",1,"btn","btn-default","mb-0","dont-close-quantity",3,"click"],[1,"btn","btn-default","mb-0","red-bg",3,"click"],[1,"col-md-12","loader"],[1,"loading"],["id","floating-label"],[1,"form-wrap","p-0"],[1,"topstats"],["class","_sa-customer","class","col-md-6",4,"ngIf"],["class","col-2 pr-0",4,"ngIf"],["class","col-4 pr-0",4,"ngIf"],["class","col-3 pr-0",4,"ngIf"],[1,"col-3"],["id","productlist01","type","submit",1,"btn","btn-primary","w-100","PT-5","PB-5",3,"click"],["class","_cut-detail",4,"ngIf"],[1,"mt-5"],["id","example",1,"table","table-hover","dt-responsive","nowrap","table_order",2,"width","100%"],[2,"background","linear-gradient(\n                          0deg,\n                          #f6f6f6 0%,\n                          #f6f6f6 100%\n                        )","font-size","14px"],[1,"order_total_items"],[1,"order_gross_amount"],[1,"order_total_discount"],[1,"order_sub_total"],["type","number","min","0","value","0",1,"itemQTY","frieght_price",3,"ngModel","ngModelChange"],[1,"order_sub_total_af_FP"],[1,"order_tax"],[1,"order_grand_total"],[1,"col-md-12","p-0"],[2,"background-color","#f6f6f6","padding","15px","margin-top","15px","margin-bottom","0px","text-align","center","margin-bottom","1px"],["type","button","class","btn btn-primary mr-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-cancel","mr-2",3,"routerLink"],[1,"col-md-6"],[1,"form-s2"],["placeholder","Select Sub Distributor",1,"formselect",3,"multiple","ngModel","ngModelChange","change"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-2","pr-0"],[1,"gary-box"],[1,"execution_date"],[1,"col-4","pr-0"],[1,"col-3","pr-0"],[1,"_cut-detail"],["type","number","min","1","placeholder","Quanity",1,"itemQTY",3,"ngModel","ngModelChange"],["type","number","placeholder","0","min","0",1,"itemQTY",3,"max","ngModel","ngModelChange"],["type","button",1,"btn","smBTN","red-bg","mb-0",3,"click"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],["class","spinner-grow spinner-grow-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"]],template:function(t,e){1&t&&(_.Pb(0,"div",0),_.Pb(1,"div",1),_.Pb(2,"div",2),_.Pb(3,"div",3),_.Pb(4,"h5",4),_.vc(5," Product "),_.Pb(6,"span"),_.vc(7," Detail"),_.Ob(),_.Ob(),_.Pb(8,"button",5),_.Wb("click",(function(t){return e.closeQuantityModal(t)})),_.Pb(9,"span",6),_.vc(10,"\xd7"),_.Ob(),_.Ob(),_.Ob(),_.tc(11,E,16,6,"div",7),_.Pb(12,"div",8),_.Pb(13,"button",9),_.Wb("click",(function(t){return e.addProductToOrder(t)})),_.vc(14," Confirm "),_.Ob(),_.Pb(15,"button",10),_.Wb("click",(function(t){return e.closeQuantityModal(t)})),_.vc(16," Cancel "),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(17,"div",11),_.Wb("clickOutside",(function(t){return e.clickedOutSide(t)})),_.Pb(18,"a",12),_.Wb("click",(function(){return e.closeProductsList()})),_.Ob(),_.Pb(19,"div",13),_.vc(20,"Add "),_.Pb(21,"span"),_.vc(22,"Product"),_.Ob(),_.Ob(),_.Pb(23,"div",14),_.Pb(24,"div",15),_.Pb(25,"div",16),_.Pb(26,"div",17),_.Kb(27,"i",18),_.Pb(28,"input",19),_.Wb("ngModelChange",(function(t){return e.productSearchText=t}))("keyup",(function(){return e.searchProduct()})),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(29,"div",20),_.Pb(30,"div",21),_.Pb(31,"div",22),_.Pb(32,"div",23),_.Pb(33,"div",24),_.Pb(34,"div",15),_.Pb(35,"div",16),_.Pb(36,"div",25),_.tc(37,Y,3,1,"table",26),_.tc(38,N,3,0,"div",27),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(39,"div",28),_.Pb(40,"button",29),_.Wb("click",(function(){return e.closeProductsList()})),_.vc(41," Cancel "),_.Ob(),_.Ob(),_.Ob(),_.Pb(42,"div",30),_.Kb(43,"div",31),_.Pb(44,"div",24),_.Pb(45,"div",32),_.Pb(46,"div",33),_.Pb(47,"h2",34),_.vc(48,"Order "),_.Pb(49,"span"),_.vc(50," Management"),_.Ob(),_.Ob(),_.Ob(),_.Pb(51,"div",33),_.Pb(52,"ol",35),_.Pb(53,"li"),_.Pb(54,"a",36),_.Pb(55,"span"),_.vc(56,"Order Management"),_.Ob(),_.Ob(),_.Ob(),_.Pb(57,"li"),_.Pb(58,"span"),_.vc(59,"Edit"),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(60,"div",15),_.Pb(61,"div",37),_.Pb(62,"div",38),_.Pb(63,"div",39),_.Pb(64,"h2"),_.vc(65),_.Pb(66,"span"),_.vc(67," Order"),_.Ob(),_.Ob(),_.Ob(),_.Pb(68,"div",40),_.tc(69,Q,2,0,"div",41),_.tc(70,tt,166,37,"div",42),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob()),2&t&&(_.yb(11),_.ec("ngIf",null==e.selectedProduct||null==e.selectedProduct.parent?null:e.selectedProduct.parent.hasOwnProperty("quantity")),_.yb(2),_.ec("disabled",!e.selectedProduct.stockQty||e.selectedProduct.stockQty<=0),_.yb(4),_.ec("ngClass",e.showProducts?"active":""),_.yb(11),_.ec("ngModel",e.productSearchText),_.yb(9),_.ec("ngIf",!e.loadingProducts),_.yb(1),_.ec("ngIf",e.loadingProducts),_.yb(27),_.xc(" ",e.title," "),_.yb(4),_.ec("ngIf",e.loading),_.yb(1),_.ec("ngIf",!e.loading))},directives:[r.k,r.i,x.a,k.b,k.e,k.h,k.m,r.j,k.l,S.a,k.j,s.g,C.a,C.c],pipes:[r.d],styles:[".topstats[_ngcontent-%COMP%]{margin-top:15px;font-size:13px;margin-bottom:5px}.topstats[_ngcontent-%COMP%]   .gary-box[_ngcontent-%COMP%]{line-height:1;background-color:#f9f9f9;border-bottom:1px solid #d1d1d1;padding:10px;margin-bottom:15px}.topstats[_ngcontent-%COMP%]   .gary-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Rationale,sans-serif;color:#0038ba;font-size:18px;float:right;margin-top:-2px}.itemQTY[_ngcontent-%COMP%]{font-size:12px;width:70px;padding:0 5px;border:1px solid #e6e6e6}.itemIMG[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #e5e5e5;margin-top:-5px;margin-bottom:-5px;margin-right:5px;float:left}.productSearch[_ngcontent-%COMP%]{position:relative}.productSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;border:1px solid #eae9e9;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}.productSearch[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;color:#b5b5b5}.AddProductTable[_ngcontent-%COMP%]{padding:0;margin:0}.AddProductTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.AddProductTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:7px;padding-top:7px}.ProListDiv[_ngcontent-%COMP%]{padding:0;display:table}.ProListDiv[_ngcontent-%COMP%]   .PR_Name[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;font-size:14px;letter-spacing:1px;line-height:16px}.ProListDiv[_ngcontent-%COMP%]   .PrList_img[_ngcontent-%COMP%]{width:35px;height:35px;margin-right:8px;border:1px solid #e0e0e0}.AddProductTable[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:5px 8px;font-size:13px;border-radius:0;-khtml-border-radius:0;background:linear-gradient(90deg,#1e54d3,#0038ba);color:#fff;text-align:center;margin:0;line-height:1;min-width:74px;letter-spacing:1px;float:right;border:none!important}.AddDetailPR[_ngcontent-%COMP%]{padding:25px;font-size:14px}.AddDetailPR[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:32px;border:1px solid #dedede;box-shadow:none;padding:0 10px;font-size:13px;letter-spacing:1px}.AddDetailPR[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:0;padding:0 10px;height:32px;border:1px solid #dedede;font-size:14px}.red[_ngcontent-%COMP%]{color:red}.table_order[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table_order[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem;font-size:12px}.formselect[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{height:34px;border-radius:0}"]}),t})();var it=i("njyG");function rt(t,e){if(1&t&&(_.Pb(0,"tr"),_.Pb(1,"td"),_.vc(2),_.Ob(),_.Pb(3,"td"),_.vc(4),_.Ob(),_.Pb(5,"td"),_.vc(6),_.Ob(),_.Pb(7,"td"),_.vc(8),_.Zb(9,"number"),_.Ob(),_.Pb(10,"td"),_.vc(11),_.Zb(12,"number"),_.Ob(),_.Pb(13,"td"),_.vc(14),_.Zb(15,"number"),_.Ob(),_.Pb(16,"td"),_.vc(17),_.Zb(18,"number"),_.Ob(),_.Pb(19,"td"),_.vc(20),_.Zb(21,"number"),_.Ob(),_.Pb(22,"td"),_.vc(23),_.Ob(),_.Pb(24,"td"),_.vc(25),_.Zb(26,"number"),_.Ob(),_.Pb(27,"td"),_.vc(28),_.Zb(29,"number"),_.Ob(),_.Ob()),2&t){const t=e.$implicit;_.yb(2),_.wc(t.item_sku),_.yb(2),_.wc(t.item_name),_.yb(2),_.yc(" ",t.parent_qty_sold," ",t.schemeFreeProdsCount?"+"+t.schemeFreeProdsCount:""," "),_.yb(2),_.xc(" ",_.bc(9,12,t.parent_tp,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(12,15,t.grossPrice,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(15,18,t.tradeOffer,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(18,21,t.distributor_discount,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(21,24,null==t?null:t.specialDiscount,"1.2-2")," "),_.yb(3),_.xc(" ",t.booker_discount," "),_.yb(2),_.xc(" ",_.bc(26,27,t.tax_amount,"1.2-2")," "),_.yb(3),_.xc(" ",_.bc(29,30,t.totalBill,"1.2-2")," ")}}function st(t,e){if(1&t&&(_.Pb(0,"div",26),_.Pb(1,"div",36),_.Pb(2,"div",37),_.Pb(3,"div",38),_.Kb(4,"img",39),_.Ob(),_.Pb(5,"div",40),_.vc(6," Order # "),_.Pb(7,"strong"),_.vc(8),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(9,"div",41),_.Pb(10,"div",8),_.Pb(11,"div",9),_.Pb(12,"div",42),_.Pb(13,"div",43),_.Pb(14,"div",44),_.Pb(15,"span"),_.vc(16,"Dist Name: "),_.Ob(),_.Pb(17,"strong",45),_.vc(18),_.Ob(),_.Kb(19,"br"),_.Pb(20,"span"),_.vc(21,"Phone No: "),_.Ob(),_.Pb(22,"strong",46),_.vc(23),_.Ob(),_.Kb(24,"br"),_.Pb(25,"span"),_.vc(26,"Location: "),_.Ob(),_.Pb(27,"strong",47),_.vc(28),_.Ob(),_.Ob(),_.Pb(29,"div",48),_.Pb(30,"span"),_.vc(31,"Status: "),_.Ob(),_.Pb(32,"strong",49),_.vc(33),_.Ob(),_.Kb(34,"br"),_.Pb(35,"span"),_.vc(36,"Booking Date: "),_.Ob(),_.Pb(37,"strong",50),_.vc(38),_.Ob(),_.Kb(39,"br"),_.Pb(40,"span"),_.vc(41,"Employee: "),_.Ob(),_.Pb(42,"strong",51),_.vc(43),_.Ob(),_.Ob(),_.Ob(),_.Kb(44,"div",52),_.Pb(45,"div",53),_.Pb(46,"div",53),_.Pb(47,"table",54),_.Pb(48,"thead"),_.Pb(49,"tr"),_.Pb(50,"th"),_.Pb(51,"strong"),_.vc(52,"Code"),_.Ob(),_.Ob(),_.Pb(53,"th"),_.Pb(54,"strong"),_.vc(55,"Product Name"),_.Ob(),_.Ob(),_.Pb(56,"th"),_.Pb(57,"strong"),_.vc(58,"Qty"),_.Ob(),_.Ob(),_.Pb(59,"th"),_.Pb(60,"strong"),_.vc(61,"T.P"),_.Ob(),_.Ob(),_.Pb(62,"th"),_.Pb(63,"strong"),_.vc(64,"GR Amt"),_.Ob(),_.Ob(),_.Pb(65,"th"),_.Pb(66,"strong"),_.vc(67,"T.O"),_.Ob(),_.Ob(),_.Pb(68,"th"),_.Pb(69,"strong"),_.vc(70,"Dist.Disc%"),_.Ob(),_.Ob(),_.Pb(71,"th"),_.Pb(72,"strong"),_.vc(73,"SPC.Disc"),_.Ob(),_.Ob(),_.Pb(74,"th"),_.Pb(75,"strong"),_.vc(76,"B.Disc"),_.Ob(),_.Ob(),_.Pb(77,"th"),_.Pb(78,"strong"),_.vc(79,"Tax"),_.Ob(),_.Ob(),_.Pb(80,"th"),_.Pb(81,"strong"),_.vc(82,"Net.Amt"),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(83,"tbody",55),_.tc(84,rt,30,33,"tr",56),_.Pb(85,"tr"),_.Pb(86,"td",57),_.vc(87,"Total:"),_.Ob(),_.Pb(88,"td",58),_.vc(89),_.Ob(),_.Kb(90,"td",58),_.Pb(91,"td",58),_.vc(92),_.Zb(93,"number"),_.Ob(),_.Kb(94,"td",59),_.Ob(),_.Pb(95,"tr"),_.Kb(96,"td",60),_.Kb(97,"td",60),_.Kb(98,"td",60),_.Kb(99,"td",60),_.Kb(100,"td",60),_.Kb(101,"td",60),_.Kb(102,"td",60),_.Kb(103,"td",60),_.Kb(104,"td",60),_.Pb(105,"td"),_.Pb(106,"strong"),_.vc(107,"Gross PKR."),_.Ob(),_.Ob(),_.Pb(108,"td"),_.Pb(109,"strong"),_.vc(110),_.Zb(111,"number"),_.Ob(),_.Ob(),_.Ob(),_.Pb(112,"tr"),_.Kb(113,"td",60),_.Kb(114,"td",60),_.Kb(115,"td",60),_.Kb(116,"td",60),_.Kb(117,"td",60),_.Kb(118,"td",60),_.Kb(119,"td",60),_.Kb(120,"td",60),_.Kb(121,"td",60),_.Pb(122,"td"),_.Pb(123,"strong"),_.vc(124,"Discount PKR."),_.Ob(),_.Ob(),_.Pb(125,"td"),_.Pb(126,"strong"),_.vc(127),_.Zb(128,"number"),_.Ob(),_.Ob(),_.Ob(),_.Pb(129,"tr"),_.Kb(130,"td",60),_.Kb(131,"td",60),_.Kb(132,"td",60),_.Kb(133,"td",60),_.Kb(134,"td",60),_.Kb(135,"td",60),_.Kb(136,"td",60),_.Kb(137,"td",60),_.Kb(138,"td",60),_.Pb(139,"td"),_.Pb(140,"strong"),_.vc(141,"Frieght Price PKR."),_.Ob(),_.Ob(),_.Pb(142,"td"),_.Pb(143,"strong"),_.vc(144),_.Ob(),_.Ob(),_.Ob(),_.Pb(145,"tr"),_.Kb(146,"td",60),_.Kb(147,"td",60),_.Kb(148,"td",60),_.Kb(149,"td",60),_.Kb(150,"td",60),_.Kb(151,"td",60),_.Kb(152,"td",60),_.Kb(153,"td",60),_.Kb(154,"td",60),_.Pb(155,"td"),_.Pb(156,"strong"),_.vc(157,"Tax PKR."),_.Ob(),_.Ob(),_.Pb(158,"td"),_.Pb(159,"strong"),_.vc(160),_.Zb(161,"number"),_.Ob(),_.Ob(),_.Ob(),_.Pb(162,"tr"),_.Kb(163,"td",60),_.Kb(164,"td",60),_.Kb(165,"td",60),_.Kb(166,"td",60),_.Kb(167,"td",60),_.Kb(168,"td",60),_.Kb(169,"td",60),_.Kb(170,"td",60),_.Kb(171,"td",60),_.Pb(172,"td",61),_.Pb(173,"strong"),_.vc(174,"Total PKR."),_.Ob(),_.Ob(),_.Pb(175,"td",61),_.Pb(176,"strong"),_.vc(177),_.Zb(178,"number"),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Kb(179,"div",62),_.Ob(),_.Kb(180,"div",62),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob()),2&t){const t=_.Yb();_.yb(8),_.wc(t.order.id),_.yb(10),_.wc(t.order.distributor_name),_.yb(5),_.wc(t.order.distributor_phone),_.yb(5),_.wc(t.order.distributor_address),_.yb(5),_.xc(" ",t.order.status?null==t.order?null:t.order.status:"--"," "),_.yb(5),_.wc(t.order.date),_.yb(5),_.wc(t.order.employee_name),_.yb(41),_.ec("ngForOf",t.order.orderContent),_.yb(5),_.xc(" ",t.order.totalItemsQty," "),_.yb(3),_.xc(" ",_.bc(93,16,t.order.grossPrice,"1.2-2")," "),_.yb(18),_.wc(_.bc(111,19,t.order.grossPrice,"1.2-2")),_.yb(17),_.yc(" ",t.order.discount>0?"-":""," ",_.bc(128,22,t.order.discount,"1.2-2"),""),_.yb(17),_.xc(" + ",t.order.frieght_price,""),_.yb(16),_.xc("+ ",_.bc(161,25,t.order.tax,"1.2-2"),""),_.yb(17),_.wc(_.bc(178,28,t.order.total,"1.2-2"))}}function ot(t,e){1&t&&(_.Pb(0,"h2",63),_.vc(1,"Reports"),_.Ob())}function nt(t,e){1&t&&(_.Pb(0,"h2",63),_.vc(1,"Order "),_.Pb(2,"span"),_.vc(3," Management"),_.Ob(),_.Ob())}function dt(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",69),_.Wb("click",(function(){_.oc(t);const e=_.Yb().$implicit,i=_.Yb(2);return i.onUpdateOrderStatus(e.id,i.PRIMARY_ORDER_STATUS_UPDATE.PROCESSED)})),_.vc(1," Process "),_.Ob()}}function ct(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",69),_.Wb("click",(function(){_.oc(t);const e=_.Yb().$implicit,i=_.Yb(2);return i.onUpdateOrderStatus(e.id,i.PRIMARY_ORDER_STATUS_UPDATE.EXECUTE)})),_.vc(1," Execute "),_.Ob()}}function at(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",69),_.Wb("click",(function(){_.oc(t);const e=_.Yb().$implicit,i=_.Yb(2);return i.onUpdateOrderStatus(e.id,i.PRIMARY_ORDER_STATUS_UPDATE.COMPLETED)})),_.vc(1," Complete "),_.Ob()}}const bt=function(t){return["edit",t]};function ut(t,e){if(1&t&&(_.Pb(0,"button",70),_.vc(1," Edit "),_.Ob()),2&t){const t=_.Yb().$implicit;_.ec("routerLink",_.ic(1,bt,t.id))}}function lt(t,e){if(1&t){const t=_.Qb();_.Pb(0,"button",71),_.Wb("click",(function(){_.oc(t);const e=_.Yb().$implicit;return _.Yb(2).onConfirmationDelete(e.id)})),_.vc(1," Cancel "),_.Ob()}}function _t(t,e){if(1&t){const t=_.Qb();_.Pb(0,"tr"),_.Pb(1,"td"),_.vc(2),_.Ob(),_.Pb(3,"td"),_.vc(4),_.Ob(),_.Pb(5,"td"),_.vc(6),_.Ob(),_.Pb(7,"td"),_.vc(8),_.Ob(),_.Pb(9,"td"),_.vc(10),_.Zb(11,"number"),_.Ob(),_.Pb(12,"td"),_.Pb(13,"button",65),_.Wb("click",(function(){_.oc(t);const i=e.$implicit;return _.Yb(2).onOrderDetail(i.id)})),_.vc(14," Detail "),_.Ob(),_.tc(15,dt,2,0,"button",66),_.tc(16,ct,2,0,"button",66),_.tc(17,at,2,0,"button",66),_.tc(18,ut,2,3,"button",67),_.tc(19,lt,2,0,"button",68),_.Ob(),_.Ob()}if(2&t){const t=e.$implicit,i=_.Yb(2);_.yb(2),_.wc(t.id),_.yb(2),_.wc(t.created_at),_.yb(2),_.wc(t.distributor_name),_.yb(2),_.wc(t.employee_name),_.yb(2),_.wc(_.bc(11,10,t.order_total,"1.2-2")),_.yb(5),_.ec("ngIf",i.PRIMARY_ORDER_CONST.BOOKED===i.orderStatus),_.yb(1),_.ec("ngIf",i.PRIMARY_ORDER_CONST.PROCESSED===i.orderStatus),_.yb(1),_.ec("ngIf",i.PRIMARY_ORDER_CONST.EXECUTE===i.orderStatus),_.yb(1),_.ec("ngIf",!(i.PRIMARY_ORDER_CONST.COMPLETED===i.orderStatus||i.PRIMARY_ORDER_CONST.CANCELED===i.orderStatus)&&"purchased"!==i.orderStatus&&"returned"!==i.orderStatus),_.yb(1),_.ec("ngIf",!(i.PRIMARY_ORDER_CONST.COMPLETED===i.orderStatus||i.PRIMARY_ORDER_CONST.CANCELED===i.orderStatus)&&"purchased"!==i.orderStatus&&"returned"!==i.orderStatus)}}function ht(t,e){if(1&t&&(_.Pb(0,"table",64),_.Pb(1,"thead"),_.Pb(2,"tr"),_.Pb(3,"th"),_.vc(4,"Order ID"),_.Ob(),_.Pb(5,"th"),_.vc(6,"Date"),_.Ob(),_.Pb(7,"th"),_.vc(8,"Distributor"),_.Ob(),_.Pb(9,"th"),_.vc(10,"Employee"),_.Ob(),_.Pb(11,"th"),_.vc(12,"Order Total"),_.Ob(),_.Pb(13,"th"),_.vc(14,"Action"),_.Ob(),_.Ob(),_.Ob(),_.Pb(15,"tbody"),_.tc(16,_t,20,13,"tr",56),_.Ob(),_.Ob()),2&t){const t=_.Yb();_.ec("dtOptions",t.dtOptions),_.yb(16),_.ec("ngForOf",t.primaryOrders)}}function pt(t,e){1&t&&(_.Pb(0,"div",25),_.Kb(1,"app-loader-white"),_.Ob())}let mt=(()=>{class t{constructor(t,e,i){this.primaryOrderService=t,this.toastService=e,this.route=i,this.isReports=!1,this.PRIMARY_ORDER_CONST=O.a,this.PRIMARY_ORDER_STATUS_UPDATE=O.c,this.orderBookers=[],this.salesMen=[],this.primaryOrders=[],this.dtOptions={},this.selectedOrders=[],this.orderDetial=null,this.totalGrossAmt=0,this.totalDiscount=0,this.totalTax=0,this.totalPkr=0,this.frienghtPrice=0,this.route.params.subscribe(t=>{switch(this.orderStatus=t.status,this.orderStatus){case O.a.BOOKED:this.orderStatusAPI=O.b.BOOKED;break;case O.a.PURCHASE_HISTORY:this.orderStatusAPI=O.b.PURCHASE_HISTORY;break;case O.a.PROCESSED:this.orderStatusAPI=O.b.PROCESSED;break;case O.a.EXECUTE:this.orderStatusAPI=O.b.EXECUTE;break;case O.a.COMPLETED:this.orderStatusAPI=O.b.COMPLETED;break;case O.a.RETURNED:this.orderStatusAPI=O.b.RETURNED;break;case O.a.CANCELED:this.orderStatusAPI=O.b.CANCELED}this.onInit()})}onInit(){this.byOrderBooker=!0,this.dtOptions={pagingType:"simple_numbers"},this.getPendingOrders(),this.isReports=this.orderStatusAPI===O.a.COMPLETED||this.orderStatusAPI===O.a.CANCELED||this.orderStatusAPI===O.b.PURCHASE_HISTORY||this.orderStatusAPI===O.b.RETURNED,console.log(this.orderStatus)}getPendingOrders(){this.loading=!0,this.primaryOrderService.getPendingOrdersList(this.orderStatusAPI).subscribe(t=>{this.primaryOrders=[...t.data],this.loading=!1})}onOrderDetail(t){this.loading=!0,this.primaryOrderService.getOderDetailById(t).subscribe(t=>{this.order=new o;{const e=Object.assign({},t.data.order);this.order.distributor_name=e.distributor_name,this.order.employee_name=e.employee_name,this.order.date=e.date,this.order.id=e.id,this.order.distributor_phone=e.distributor_phone,this.order.distributor_address=e.distributor_address,this.order.status=e.status,this.order.date=e.date,this.order.employee_name=e.employee_name,this.order.frieght_price=e.frieght_price,this.order.orderContent=this.primaryOrderService.getPrimaryOrderItem([...t.data.content]),this.loading=!1}})}getTotalDiscount(t){return this.getTradeOfferDiscount(t)+this.getDistributorDiscount(t)+this.getSpecialDiscount(t)+this.getBookDiscount(t)}getTradeOfferDiscount(t){return 0!==(null==t?void 0:t.scheme_id)?(null==t?void 0:t.booked_total_qty)*((null==t?void 0:t.booked_total_qty)*(null==t?void 0:t.unit_price)/(null==t?void 0:t.itemscheme_min_quantity)+(null==t?void 0:t.scheme_quantity_free)):0}getDistributorDiscount(t){return this.totalGrossAmt*(null==t?void 0:t.distributor_discount)/100}getSpecialDiscount(t){return(null==t?void 0:t.special_discount)*(null==t?void 0:t.unit_price)/100*(null==t?void 0:t.special_discount)}getBookDiscount(t){return(null==t?void 0:t.booker_discount)*(null==t?void 0:t.booked_total_qty)}addOrderToAssignment(t){this.selectedOrders=this.selectedOrders.filter(e=>e.id!==t.id),this.selectedOrders.push({sales_man:t.selectedSaleman.id,employee_id:t.employee_id,id:t.id,date:t.date})}openDetailsModal(t){document.body.classList.add("no-scroll")}closeDetailsModal(){document.body.classList.remove("no-scroll")}onUpdateOrderStatus(t,e){this.loading=!0,this.primaryOrderService.updateOrderStatus(t,e).subscribe(t=>{this.onInit()},t=>{console.log("err => ",t)})}onConfirmationDelete(t){this.confirmDeleteOrderID=t}}return t.\u0275fac=function(e){return new(e||t)(_.Jb(f),_.Jb(v.a),_.Jb(s.a))},t.\u0275cmp=_.Db({type:t,selectors:[["app-list"]],decls:66,vars:12,consts:[["id","cancelYesNo","tabindex","-1","role","dialog","aria-labelledby","cancelYesNoLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top-borderRed"],[1,"modal-header"],["id","cancelYesNoLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-12"],[1,"modal-footer","border-0"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","btn-primary",3,"click"],["type","submit","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-full","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","border-0"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",2,"font-size","30px"],[1,"modal-body","p-0"],[1,"container"],["class","card",4,"ngIf"],[1,"row","mt-2","mb-3"],[1,"col-lg-6","col-md-6","col-sm-6"],["class","_head01",4,"ngIf"],[1,"breadcrumb"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"body","PT-15"],["id","floating-label"],[1,"form-wrap","p-0"],["datatable","","class","table table-hover dt-responsive nowrap","id","primaryOrdersId","style","width: 100%",3,"dtOptions",4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"sticky-footer"],[1,"container","my-auto"],[1,"copyright","text-center","my-auto"],[1,"p-10",2,"border-bottom","solid 2px #000"],[1,"row","m-0"],[1,"col-8","OrderLogo"],["src","../../../../../assests/images/sell-360.svg","alt",""],[1,"col-4","ord-no"],[1,"body",2,"padding","15px 20px"],[1,"form-body"],[1,"row","OrderInfo"],[1,"col-md-9"],[1,"retailer_name"],[1,"retailer_phone"],[1,"retailer_location"],[1,"col-md-3","p-0"],[1,"status"],[1,"booking_date"],[1,"employee_name"],[1,"seprator-block"],[1,"Order-Detail-table","mt-30"],[1,"table"],[1,"order_items_body"],[4,"ngFor","ngForOf"],["colspan","2",1,"bold_text"],[1,"bold_text"],["colspan","6",1,"bold_text"],[1,"border-0"],[2,"background-color","#000","color","#fff"],[1,"clearfix"],[1,"_head01"],["datatable","","id","primaryOrdersId",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],["type","button","data-toggle","modal","data-target","#exampleModal",1,"btn","btn-default","btn-line",3,"click"],["class","btn btn-default",3,"click",4,"ngIf"],["class","btn btn-default",3,"routerLink",4,"ngIf"],["class","btn btn-default","data-toggle","modal","data-target","#cancelYesNo",3,"click",4,"ngIf"],[1,"btn","btn-default",3,"click"],[1,"btn","btn-default",3,"routerLink"],["data-toggle","modal","data-target","#cancelYesNo",1,"btn","btn-default",3,"click"]],template:function(t,e){1&t&&(_.Pb(0,"div",0),_.Pb(1,"div",1),_.Pb(2,"div",2),_.Pb(3,"div",3),_.Pb(4,"h5",4),_.vc(5,"Delete "),_.Kb(6,"span"),_.Ob(),_.Pb(7,"button",5),_.Pb(8,"span",6),_.vc(9,"\xd7"),_.Ob(),_.Ob(),_.Ob(),_.Pb(10,"div",7),_.Pb(11,"div",8),_.Pb(12,"div",9),_.Pb(13,"strong"),_.vc(14,"Are you sure you want to cancel this Order?"),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(15,"div",10),_.Pb(16,"button",11),_.Wb("click",(function(){return e.onUpdateOrderStatus(e.confirmDeleteOrderID,e.PRIMARY_ORDER_STATUS_UPDATE.CANCELED)})),_.vc(17," Yes "),_.Ob(),_.Pb(18,"button",12),_.vc(19," No "),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(20,"div",13),_.Pb(21,"div",14),_.Pb(22,"div",15),_.Pb(23,"div",16),_.Pb(24,"button",17),_.vc(25," \xd7 "),_.Ob(),_.Ob(),_.Pb(26,"div",18),_.Pb(27,"div",19),_.Pb(28,"div",8),_.Pb(29,"div",9),_.tc(30,st,181,31,"div",20),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(31,"div",19),_.Pb(32,"div",21),_.Pb(33,"div",22),_.tc(34,ot,2,0,"h2",23),_.tc(35,nt,4,0,"h2",23),_.Ob(),_.Pb(36,"div",22),_.Pb(37,"ol",24),_.Pb(38,"li"),_.Pb(39,"a"),_.Pb(40,"span"),_.vc(41),_.Ob(),_.Ob(),_.Ob(),_.Pb(42,"li"),_.Pb(43,"span"),_.vc(44),_.Zb(45,"titlecase"),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(46,"div",8),_.Pb(47,"div",25),_.Pb(48,"div",26),_.Pb(49,"div",27),_.Pb(50,"h2"),_.vc(51),_.Zb(52,"titlecase"),_.Pb(53,"span"),_.vc(54," Orders List"),_.Ob(),_.Ob(),_.Ob(),_.Pb(55,"div",28),_.Pb(56,"div",29),_.Pb(57,"div",30),_.Pb(58,"div",8),_.Pb(59,"div",25),_.tc(60,ht,17,2,"table",31),_.tc(61,pt,2,0,"div",32),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Ob(),_.Pb(62,"footer",33),_.Pb(63,"div",34),_.Pb(64,"div",35),_.vc(65," 2019 Sell3sixty All rights reserved "),_.Ob(),_.Ob(),_.Ob(),_.Ob()),2&t&&(_.yb(30),_.ec("ngIf",!e.loading&&e.order),_.yb(4),_.ec("ngIf",e.isReports),_.yb(1),_.ec("ngIf",!e.isReports),_.yb(6),_.wc(e.isReports?"Reports":"Order Management"),_.yb(3),_.xc("",_.ac(45,8,e.orderStatus)," Orders"),_.yb(7),_.xc("",_.ac(52,10,e.orderStatus)," "),_.yb(9),_.ec("ngIf",!e.loading),_.yb(1),_.ec("ngIf",e.loading))},directives:[r.k,r.j,it.a,s.g,S.a],pipes:[r.o,r.d],styles:[".OrderLogo[_ngcontent-%COMP%]{text-align:left;padding-left:0}.OrderLogo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:46px}.OrderInfo[_ngcontent-%COMP%]{font-size:14px}.OrderInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:105px;float:left}.Order-Detail-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #333;padding:5px!important;font-size:12px}.Order-Detail-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #333!important;background-color:#000!important;color:#fff;padding:5px!important;font-size:12px}.button-list[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{font-size:14px!important;letter-spacing:1px}.button-list[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{padding-right:3px}.ord-no[_ngcontent-%COMP%]{padding-top:17px;font-size:14px;text-align:right}.bold_text[_ngcontent-%COMP%]{font-family:proximanova-semibold,sans-serif!important;background-color:#e9e6e6;font-weight:700}"]}),t})();const gt=[{path:"",component:(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Db({type:t,selectors:[["app-orders-component"]],decls:1,vars:0,template:function(t,e){1&t&&_.Kb(0,"router-outlet")},directives:[s.j],encapsulation:2}),t})(),children:[{path:":status",pathMatch:"full",component:mt},{path:":status/:new",pathMatch:"full",component:et},{path:":status/edit/:orderId",pathMatch:"full",component:et}]}];let Pt=(()=>{class t{}return t.\u0275mod=_.Hb({type:t}),t.\u0275inj=_.Gb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(gt)],s.i]}),t})();var Ot=i("5TcN"),yt=i("FpXt");let ft=(()=>{class t{}return t.\u0275mod=_.Hb({type:t}),t.\u0275inj=_.Gb({factory:function(e){return new(e||t)},providers:[f,Ot.a],imports:[[r.b,Pt,x.b,k.c,it.b,yt.a,C.b]]}),t})()}}]);