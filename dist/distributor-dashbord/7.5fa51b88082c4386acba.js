(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{mycG:function(t,e,n){"use strict";n.r(e),n.d(e,"InventoryModule",(function(){return wt}));var i=n("ofXK"),o=n("3Pt+"),r=n("qew9"),c=n("njyG"),s=n("ZOsW"),a=n("tyNb"),d=n("fXoL");let b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Db({type:t,selectors:[["app-inventory-component"]],decls:1,vars:0,template:function(t,e){1&t&&d.Kb(0,"router-outlet")},directives:[a.j],styles:[""]}),t})();var l=n("oo4J"),u=n("bUwk");let g=(()=>{class t{constructor(t){this.httpService=t}getBrnads(){return this.httpService.get(l.a.BRANDS)}getCategories(){return this.httpService.get(l.a.CATEGORIES)}getProducts(){return this.httpService.get(l.a.PRODUCTS)}getDistributorPurchaseData(){return this.httpService.get(""+l.a.DISTRIBUTOR_PURCHASE_DATA)}addDistributorPurchase(t){return this.httpService.post(l.a.ADD_DISTRIBUTOR_PURCHASE,t)}getProductsWithStock(){return this.httpService.get(l.a.PRODUCTS_WITH_STOCK)}getProductStockHistory(t,e,n){return this.httpService.post(`${l.a.PRODUCT_STOCK_DETAIL}/${t}/${e}`,n)}addDistributorOpeningStock(t){return this.httpService.post(""+l.a.ADD_OPENING_STOCK,{opening_stock:t})}}return t.\u0275fac=function(e){return new(e||t)(d.Tb(u.a))},t.\u0275prov=d.Fb({token:t,factory:t.\u0275fac}),t})();var h=n("uoBr");function p(t,e){if(1&t&&(d.Pb(0,"option",30),d.vc(1),d.Ob()),2&t){const t=e.$implicit;d.ec("value",t.name),d.yb(1),d.xc(" ",t.name," ")}}function P(t,e){if(1&t&&(d.Pb(0,"option",30),d.vc(1),d.Ob()),2&t){const t=e.$implicit;d.ec("value",t.sub_category_name),d.yb(1),d.xc(" ",t.sub_category_name," ")}}const m=function(t){return[t]};function O(t,e){if(1&t&&(d.Pb(0,"div",44),d.Pb(1,"a",45),d.Pb(2,"div",5),d.Pb(3,"div",46),d.Pb(4,"div",47),d.vc(5),d.Ob(),d.Ob(),d.Pb(6,"div",48),d.Pb(7,"div",47),d.vc(8),d.Ob(),d.Ob(),d.Pb(9,"div",49),d.Pb(10,"div",50),d.Kb(11,"img",51),d.Ob(),d.Pb(12,"div",52),d.vc(13),d.Ob(),d.Ob(),d.Pb(14,"div",53),d.Pb(15,"div",47),d.vc(16),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&t){const t=e.$implicit;d.yb(1),d.ec("routerLink",d.ic(7,m,"/product/"+t.item_id)),d.yb(4),d.wc(t.item_id),d.yb(3),d.wc(t.item_sku),d.yb(3),d.fc("alt",t.item_name),d.ec("src",t.thumbnail,d.pc),d.yb(2),d.wc(t.item_name),d.yb(3),d.wc(t.brand_name)}}function f(t,e){if(1&t&&(d.Pb(0,"div",54),d.Pb(1,"div",55),d.Pb(2,"a",45),d.Pb(3,"h2"),d.vc(4),d.Ob(),d.Pb(5,"div",56),d.Pb(6,"div",47),d.Kb(7,"img",57),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&t){const t=e.$implicit;d.yb(2),d.ec("routerLink",d.ic(3,m,"/product/"+t.item_id)),d.yb(2),d.wc(t.item_name),d.yb(3),d.ec("src",t.thumbnail,d.pc)}}function v(t,e){if(1&t){const t=d.Qb();d.Pb(0,"li",67),d.Pb(1,"a",68),d.Wb("click",(function(e){d.oc(t);const n=d.Yb().$implicit,i=d.Yb(3);return i.getProductsByPageID(i.pageNum-n,e)})),d.vc(2),d.Ob(),d.Ob()}if(2&t){const t=d.Yb().$implicit,e=d.Yb(3);d.yb(2),d.wc(e.pageNum-t)}}function y(t,e){if(1&t&&(d.Nb(0),d.tc(1,v,3,1,"li",66),d.Mb()),2&t){const t=e.$implicit,n=d.Yb(3);d.yb(1),d.ec("ngIf",n.pageNum>t)}}function _(t,e){if(1&t){const t=d.Qb();d.Pb(0,"li",67),d.Pb(1,"a",68),d.Wb("click",(function(e){d.oc(t);const n=d.Yb().$implicit,i=d.Yb(3);return i.getProductsByPageID(n+i.pageNum,e)})),d.vc(2),d.Ob(),d.Ob()}if(2&t){const t=d.Yb().$implicit,e=d.Yb(3);d.yb(2),d.wc(t+e.pageNum)}}function C(t,e){if(1&t&&(d.Nb(0),d.tc(1,_,3,1,"li",66),d.Mb()),2&t){const t=e.$implicit,n=d.Yb(3);d.yb(1),d.ec("ngIf",n.pageNum!=n.getRange(1,n.pageCount).length&&t+n.pageNum<=n.pageCount)}}const M=function(t){return{disabled:t}};function x(t,e){if(1&t){const t=d.Qb();d.Pb(0,"div",58),d.Pb(1,"ul",59),d.Pb(2,"li",60),d.Wb("click",(function(e){d.oc(t);const n=d.Yb(2);return n.pageNum>1&&n.getProductsByPageID(n.pageNum-1,e)})),d.Pb(3,"a",61),d.vc(4,"Previous"),d.Ob(),d.Ob(),d.tc(5,y,2,1,"ng-container",62),d.Pb(6,"li",63),d.Pb(7,"a",64),d.vc(8),d.Ob(),d.Ob(),d.tc(9,C,2,1,"ng-container",62),d.Pb(10,"li",60),d.Wb("click",(function(e){d.oc(t);const n=d.Yb(2);return n.pageNum<n.pageCount&&n.getProductsByPageID(n.pageNum+1,e)})),d.Pb(11,"a",65),d.vc(12,"Next"),d.Ob(),d.Ob(),d.Ob(),d.Ob()}if(2&t){const t=d.Yb(2);d.yb(2),d.ec("ngClass",d.ic(7,M,1===t.pageNum)),d.yb(1),d.ec("ngClass",d.ic(9,M,1===t.pageNum)),d.yb(2),d.ec("ngForOf",t.getRange(1,t.pageCount).reverse()),d.yb(3),d.wc(t.pageNum),d.yb(1),d.ec("ngForOf",t.getRange(1,t.pageCount)),d.yb(1),d.ec("ngClass",d.ic(11,M,t.pageNum===t.pageCount)),d.yb(1),d.ec("ngClass",d.ic(13,M,t.pageNum===t.pageCount))}}function w(t,e){if(1&t&&(d.Pb(0,"div",5),d.Pb(1,"div",31),d.Pb(2,"div",32),d.Pb(3,"div",33),d.Pb(4,"div",34),d.Pb(5,"div",5),d.Pb(6,"div",35),d.vc(7,"S.No"),d.Ob(),d.Pb(8,"div",36),d.vc(9,"ITEM SKU"),d.Ob(),d.Pb(10,"div",37),d.vc(11,"ITEM NAME"),d.Ob(),d.Pb(12,"div",38),d.vc(13,"ITEM BRAND"),d.Ob(),d.Ob(),d.Ob(),d.tc(14,O,17,9,"div",39),d.Ob(),d.Pb(15,"div",40),d.Pb(16,"div",41),d.tc(17,f,8,5,"div",42),d.Ob(),d.Ob(),d.Ob(),d.tc(18,x,13,15,"div",43),d.Ob(),d.Ob()),2&t){const t=d.Yb();d.yb(3),d.ec("ngClass",t.showList?"show active":""),d.yb(11),d.ec("ngForOf",t.productDispList),d.yb(1),d.ec("ngClass",t.showList?"":"show active"),d.yb(2),d.ec("ngForOf",t.productDispList),d.yb(1),d.ec("ngIf",t.pageCount>1&&!t.loading)}}function k(t,e){1&t&&(d.Pb(0,"div",5),d.Pb(1,"div",31),d.Kb(2,"app-loader-white"),d.Ob(),d.Ob())}function S(t,e){1&t&&(d.Pb(0,"div",5),d.Pb(1,"div",31),d.Pb(2,"div",69),d.vc(3," Something went wrong, please check your internet connection and try again! "),d.Ob(),d.Ob(),d.Ob())}let T=(()=>{class t{constructor(t){this.inventoryService=t}ngOnInit(){this.searchText="",this.sortFilter="0",this.selectedBrand="All Brands",this.selectedCategory="All Categories",this.totalProducts=0,this.productsPerPage=12,this.showList=!0,this.loading=!1,this.loadingError=!1,this.getAllProducts(),this.getBrands(),this.getCategories()}getAllProducts(){this.loading=!0,this.loadingError=!1,this.inventoryService.getProducts().subscribe(t=>{this.loading=!1,200===t.status&&(this.products=t.data,this.countPagesAndProductsDisp(this.products))},t=>{this.loading=!1,1===t.status&&(this.loadingError=!0)})}getBrands(){this.inventoryService.getBrnads().subscribe(t=>{this.brands=t.data},t=>{console.log("Error while getting brands",t)})}getCategories(){this.inventoryService.getCategories().subscribe(t=>{this.categories=t.data},t=>{console.log("Error while getting brands",t)})}countPagesAndProductsDisp(t){this.totalProducts=t.length,this.pageCount=Math.ceil(this.totalProducts/12),this.pageNum=1,this.lastVisitedPage=12,this.productsFilteredArray=JSON.parse(JSON.stringify(t)),this.productDispList=t.slice(0,this.productsPerPage)}getProductsByPageID(t,e){e.stopPropagation(),e.preventDefault(),this.pageNum=t,this.lastVisitedPage=this.productsPerPage*(t-1),this.productDispList=this.productsFilteredArray.slice(this.lastVisitedPage,this.productsPerPage*this.pageNum)}filterProducts(){const t=[];if(this.searchText&&t.push(t=>t.item_name.toLowerCase().includes(this.searchText)),"All Brands"!==this.selectedBrand&&t.push(t=>t.brand_name.toLowerCase()===this.selectedBrand.toLowerCase()),"All Categories"!==this.selectedCategory&&t.push(t=>t.sub_cat.toLowerCase()===this.selectedCategory.toLowerCase()),t.length){const e=this.products.filter(e=>t.every(t=>t(e)));this.countPagesAndProductsDisp(e)}else this.countPagesAndProductsDisp(this.products);"0"!==this.sortFilter&&this.sortProducts()}sortProducts(){switch(this.sortFilter){case"asc":case"desc":this.productsFilteredArray=this.sortAscDesc(this.productsFilteredArray,this.sortFilter);break;case"latest":case"oldest":this.productsFilteredArray=this.sortAsCreated(this.productsFilteredArray,this.sortFilter)}this.countPagesAndProductsDisp(this.productsFilteredArray)}sortAscDesc(t,e){return t.sort((t,n)=>"asc"===e?t.item_name.toLowerCase()>n.item_name.toLowerCase()?1:-1:n.item_name.toLowerCase()>t.item_name.toLowerCase()?1:-1)}sortAsCreated(t,e){return t.sort((t,n)=>"latest"===e?t.item_id>n.item_id?1:-1:n.item_id>t.item_id?1:-1)}resetTimer(){clearTimeout(this.timer),this.timer=void 0}getRange(t,e){return Array.apply(0,Array(e)).map((e,n)=>n+t)}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(g))},t.\u0275cmp=d.Db({type:t,selectors:[["app-gallerty-component"]],decls:54,vars:11,consts:[[1,"container"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],[1,"row"],[1,"col-lg-12"],[1,"Product-Filter"],[1,"col","pr-0"],[1,"CL-Product"],[1,"fa","fa-search"],["type","text","id","search-product","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup","keydown"],[1,"_cust_filter"],[1,"custom-select","custom-select-sm",3,"ngModel","change","ngModelChange"],["selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"custom-select","custom-select-sm",3,"ngModel","ngModelChange","change"],["value","0","disabled",""],["value","asc"],["value","desc"],["value","latest"],["value","oldest"],[1,"col-auto"],["id","nav-tab","role","tablist",1,"nav"],["id","productthumb-tab","data-toggle","tab","role","tab","aria-controls","productthumb","aria-selected","false",1,"nav-item","nav-link",3,"ngClass","click"],[1,"fa","fa-th-large"],["id","productList-tab","data-toggle","tab","role","tab","aria-controls","productList","aria-selected","true",1,"nav-item","nav-link",3,"ngClass","click"],[1,"fa","fa-th-list"],[1,"clearfix"],["class","row",4,"ngIf"],[3,"value"],[1,"col-md-12"],["id","nav-tabContent",1,"tab-content"],["id","productList","role","tabpanel","aria-labelledby","productList-tab",1,"tab-pane","fade",3,"ngClass"],[1,"Product-row-title"],[1,"col","_SNO","h-auto"],[1,"col","_ITEMSKU","h-auto"],[1,"col","_ITEMNAME","h-auto"],[1,"col","_ITEMBRAND","h-auto"],["class","Product-row",4,"ngFor","ngForOf"],["id","productthumb","role","tabpanel","aria-labelledby","productthumb-tab",1,"tab-pane","fade",3,"ngClass"],[1,"row","PT-15"],["class","col-lg-3 col-md-4",4,"ngFor","ngForOf"],["class","ProductPageNav",4,"ngIf"],[1,"Product-row"],[3,"routerLink"],[1,"col","_SNO"],[1,"middle"],[1,"col","_ITEMSKU"],[1,"col","_ITEMNAME"],[1,"Product-IMG"],[3,"src","alt"],[1,"Product-Name"],[1,"col","_ITEMBRAND"],[1,"col-lg-3","col-md-4"],[1,"_product-card"],[1,"PR-Thumb"],["alt","",3,"src"],[1,"ProductPageNav"],[1,"pagination","justify-content-center"],[1,"page-item",3,"ngClass","click"],["tabindex","-1",1,"page-link",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"page-item","active"],[1,"page-link"],[1,"page-link",3,"ngClass"],["class","page-item",4,"ngIf"],[1,"page-item"],[1,"page-link",3,"click"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(d.Pb(0,"div",0),d.Pb(1,"div",1),d.Pb(2,"div",2),d.Pb(3,"h2",3),d.vc(4,"Gallery"),d.Ob(),d.Ob(),d.Pb(5,"div",2),d.Pb(6,"ol",4),d.Pb(7,"li"),d.Pb(8,"a"),d.Pb(9,"span"),d.vc(10,"Inventory "),d.Ob(),d.Ob(),d.Ob(),d.Pb(11,"li"),d.Pb(12,"span"),d.vc(13,"Gallery"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(14,"div",5),d.Pb(15,"div",6),d.Pb(16,"div",7),d.Pb(17,"div",5),d.Pb(18,"div",8),d.Pb(19,"div",9),d.Kb(20,"i",10),d.Pb(21,"input",11),d.Wb("ngModelChange",(function(t){return e.searchText=t}))("keyup",(function(){return e.filterProducts()}))("keydown",(function(){return e.resetTimer()})),d.Ob(),d.Ob(),d.Pb(22,"div",12),d.Pb(23,"select",13),d.Wb("change",(function(){return e.filterProducts()}))("ngModelChange",(function(t){return e.selectedBrand=t})),d.Pb(24,"option",14),d.vc(25,"All Brands"),d.Ob(),d.tc(26,p,2,2,"option",15),d.Ob(),d.Ob(),d.Pb(27,"div",12),d.Pb(28,"select",13),d.Wb("change",(function(){return e.filterProducts()}))("ngModelChange",(function(t){return e.selectedCategory=t})),d.Pb(29,"option",14),d.vc(30,"All Categories"),d.Ob(),d.tc(31,P,2,2,"option",15),d.Ob(),d.Ob(),d.Pb(32,"div",12),d.Pb(33,"select",16),d.Wb("ngModelChange",(function(t){return e.sortFilter=t}))("change",(function(){return e.sortProducts()})),d.Pb(34,"option",17),d.vc(35," Sort By Any"),d.Ob(),d.Pb(36,"option",18),d.vc(37," Name (ASC)"),d.Ob(),d.Pb(38,"option",19),d.vc(39," Name (DESC)"),d.Ob(),d.Pb(40,"option",20),d.vc(41,"Latest to Oldest"),d.Ob(),d.Pb(42,"option",21),d.vc(43,"Oldest to Latest"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(44,"div",22),d.Pb(45,"div",23),d.Pb(46,"a",24),d.Wb("click",(function(){return e.showList=!1})),d.Kb(47,"i",25),d.Ob(),d.Pb(48,"a",26),d.Wb("click",(function(){return e.showList=!0})),d.Kb(49,"i",27),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Kb(50,"div",28),d.Ob(),d.Ob(),d.Ob(),d.tc(51,w,19,5,"div",29),d.tc(52,k,3,0,"div",29),d.tc(53,S,4,0,"div",29),d.Ob()),2&t&&(d.yb(21),d.ec("ngModel",e.searchText),d.yb(2),d.ec("ngModel",e.selectedBrand),d.yb(3),d.ec("ngForOf",e.brands),d.yb(2),d.ec("ngModel",e.selectedCategory),d.yb(3),d.ec("ngForOf",e.categories),d.yb(2),d.ec("ngModel",e.sortFilter),d.yb(13),d.ec("ngClass",e.showList?"":"active"),d.yb(2),d.ec("ngClass",e.showList?"active":""),d.yb(3),d.ec("ngIf",!e.loading),d.yb(1),d.ec("ngIf",e.loading),d.yb(1),d.ec("ngIf",e.loadingError))},directives:[o.b,o.e,o.h,o.n,o.i,o.o,i.j,i.i,i.k,a.h,h.a],styles:['.Product-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.Product-Filter[_ngcontent-%COMP%]{background-color:#f3f2f2;padding:15px 15px 0;box-shadow:0 0 20px 0 rgba(0,0,0,.2);margin-bottom:15px;border-bottom:2px solid #0038ba}.Product-Filter[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:6px 8px 0;cursor:pointer}.Product-Filter[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{width:74px;float:right}.Product-Filter[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#a6a5a5;font-size:20px}.Product-Filter[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#0038ba}.CL-Product[_ngcontent-%COMP%]{width:230px;position:relative;float:left;padding-right:15px}.CL-Product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;border:1px solid #dedede;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}._cust_filter[_ngcontent-%COMP%]   .select2-container[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]{background-color:#fff;border-color:#e4e4e4;font-size:14px;border-radius:0;height:32px}._cust_filter[_ngcontent-%COMP%]   .select2-container--default[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]   .select2-selection__rendered[_ngcontent-%COMP%]{line-height:32px}.Product-Filter[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff!important;cursor:pointer;margin-left:15px;padding-top:4px;padding-bottom:4px}.CL-Product[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;color:#b5b5b5}._cust_filter[_ngcontent-%COMP%]{width:170px;float:left;margin-bottom:15px}._cust_filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:0;height:32px;border:1px solid #dedede}.Product-row-title[_ngcontent-%COMP%]{border:none;padding:15px;text-transform:uppercase;color:#0038ba;font-family:proximanova-semibold,sans-serif;letter-spacing:1px;transform:scale(.97)}.Product-row[_ngcontent-%COMP%], .Product-row-title[_ngcontent-%COMP%]{position:relative;font-size:13px}.Product-row[_ngcontent-%COMP%]{background-color:#fff;padding:10px 15px;border-radius:0;width:100%;margin-bottom:10px;border:none;border-bottom:2px solid #fff;transition:all .2s;transform:translateZ(0);transform:scale(.97);box-shadow:0 0 20px 0 rgba(0,0,0,.15)}.Product-row[_ngcontent-%COMP%]:HOVER{border-bottom:2px solid #0038ba;transition:all .3s ease;transform:scale(1);box-shadow:0 0 30px 0 rgba(0,0,0,.3);z-index:5}.Product-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .Product-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none;color:#282828}.ProductPageNav[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:20px}.ProductPageNav[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{font-size:13px;line-height:17px;padding:10px}.Product-Name[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;width:100%}.Product-IMG[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid #e2e2e2;margin-right:15px}._SNO[_ngcontent-%COMP%]{max-width:65px;padding-top:0}._ITEMSKU[_ngcontent-%COMP%], ._SNO[_ngcontent-%COMP%]{padding-right:0;line-height:17px;display:table;height:40px}._ITEMSKU[_ngcontent-%COMP%]{max-width:150px}._ITEMNAME[_ngcontent-%COMP%]{max-width:513px}._ITEMBRAND[_ngcontent-%COMP%], ._ITEMNAME[_ngcontent-%COMP%]{padding-right:0;line-height:17px;display:table;height:40px}._ITEMBRAND[_ngcontent-%COMP%]{max-width:300px}.middle[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}._product-card[_ngcontent-%COMP%]{background-image:url(/assets/images/c-profile-bg.jpg);background-position:100% 0;background-repeat:no-repeat;background-color:#fff;padding:18px 20px 20px;box-shadow:0 0 20px 0 rgba(0,0,0,.2);position:relative;color:#6f6f6f;font-size:14px;margin-bottom:30px;transition:all .2s;transform:scale(.96)}._product-card[_ngcontent-%COMP%]:HOVER{transition:all .3s ease;transform:scale(1);box-shadow:0 0 30px 0 rgba(0,0,0,.3)}._product-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px;line-height:20px;height:42px;overflow:hidden;color:#282828}._product-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{background:#002272;position:absolute;width:2px;height:32px;left:0;top:22px;content:""}._product-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ._product-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:HOVER{text-decoration:none}.PR-Thumb[_ngcontent-%COMP%]{display:table;height:220px}._product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:220px}._product-card[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{float:right;margin-right:-20px}._Action[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{float:right;margin-right:20px}._Action[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], ._product-card[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:4px;font-size:12px;border-radius:0;-khtml-border-radius:0;text-transform:capitalize;background:linear-gradient(90deg,#1e54d3,#0038ba);color:#fff;line-height:1;letter-spacing:1px}._Action[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%], ._product-card[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{min-width:65px;padding:0;margin:0;font-size:11px;border-radius:0}._product-card[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#282828;padding:5px 11px;letter-spacing:1px}._Action[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:HOVER, ._product-card[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:HOVER{color:#fff;background-color:#0038ba;outline:none!important}.se_cus-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .se_cus-type[_ngcontent-%COMP%]   .form-s2[_ngcontent-%COMP%]   .select2-container[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]{border:1px solid #eee;background-color:#fff}.p-stock[_ngcontent-%COMP%]{height:24px;font-size:13px;background-color:#0038ba;padding:3px 5px 3px 10px;color:#fff;position:absolute;left:-5px;bottom:11px;letter-spacing:1px;line-height:normal}.p-Scheme[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .p-stock[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Rationale,sans-serif;font-size:14px}.p-stock[_ngcontent-%COMP%]:before{border-top:10px solid #002e9a;border-left:5px solid transparent;content:"";left:0;position:absolute;top:23px;z-index:-1}.p-Scheme[_ngcontent-%COMP%]{height:24px;font-size:13px;background-color:#282828;padding:3px 5px;color:#fff;position:absolute;right:10px;bottom:11px;letter-spacing:normal;line-height:normal}@media (max-width:1300px){.PR-Thumb[_ngcontent-%COMP%]{height:202px}}._cust_filter[_ngcontent-%COMP%]{width:230px;padding-right:10px}._cust_filter[_ngcontent-%COMP%]   .select2-container[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]{height:32px!important}._cust_filter[_ngcontent-%COMP%]   .select2-container--default[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]   .select2-selection__rendered[_ngcontent-%COMP%]{line-height:30px}._cust_filter[_ngcontent-%COMP%]   .form-s2[_ngcontent-%COMP%]   .select2-container--default[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]   .select2-selection__arrow[_ngcontent-%COMP%]{height:32px}.CL-Product[_ngcontent-%COMP%]{padding-right:10px}.Product-Filter[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin:0;letter-spacing:1px;float:left;box-shadow:none}@media (max-width:1170px){.PR-Thumb[_ngcontent-%COMP%]{height:175px}}@media (max-width:1024px){._product-card[_ngcontent-%COMP%], .Product-row[_ngcontent-%COMP%]{transform:scale(1)}}@media (max-width:992px){._product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:175px}}']}),t})();var D=n("XNiG"),N=n("Cfvw"),I=n("vkgz"),F=n("ZgVV"),A=n("NJqk");function L(t,e){if(1&t){const t=d.Qb();d.Pb(0,"td"),d.Pb(1,"button",80),d.Wb("click",(function(e){d.oc(t);const n=d.Yb().$implicit,i=d.Yb(2);return e.stopPropagation(),i.addSelectedProduct(n)})),d.vc(2,"Add"),d.Ob(),d.Ob()}}function E(t,e){if(1&t){const t=d.Qb();d.Pb(0,"td"),d.Pb(1,"button",81),d.Wb("click",(function(e){d.oc(t);const n=d.Yb().$implicit,i=d.Yb(2);return e.stopPropagation(),i.removeSelectedProduct(n)})),d.vc(2,"Remove"),d.Ob(),d.Ob()}}function R(t,e){if(1&t&&(d.Pb(0,"tr"),d.Pb(1,"td"),d.Pb(2,"div",76),d.Kb(3,"img",77),d.Pb(4,"div",78),d.vc(5),d.Ob(),d.Ob(),d.Ob(),d.tc(6,L,3,0,"td",79),d.tc(7,E,3,0,"td",79),d.Ob()),2&t){const t=e.$implicit,n=d.Yb(2);d.yb(3),d.fc("src",t.thumbnail,d.pc),d.yb(2),d.wc(t.item_name),d.yb(1),d.ec("ngIf",!n.isInTheArray(t.item_id)),d.yb(1),d.ec("ngIf",n.isInTheArray(t.item_id))}}function K(t,e){if(1&t&&(d.Pb(0,"div",5),d.Pb(1,"div",74),d.Pb(2,"table",75),d.Pb(3,"tbody"),d.tc(4,R,8,4,"tr",68),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&t){const t=d.Yb();d.yb(4),d.ec("ngForOf",t.productsDispList)}}function W(t,e){1&t&&(d.Pb(0,"div",82),d.Pb(1,"h2",83),d.vc(2,"Loading products!"),d.Ob(),d.Ob())}function Y(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add Received No. "),d.Ob())}function B(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add Received Date "),d.Ob())}function z(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add Invoice No. "),d.Ob())}function J(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add P.O no. "),d.Ob())}function Q(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add D.C No. "),d.Ob())}function $(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add Invoice Date "),d.Ob())}function U(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add Remarks "),d.Ob())}function H(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add P.O Date "),d.Ob())}function q(t,e){1&t&&(d.Pb(0,"span",84),d.vc(1," Add D.C Date "),d.Ob())}function j(t,e){if(1&t&&(d.Pb(0,"span",85),d.vc(1),d.Ob()),2&t){const t=d.Yb();d.yb(1),d.wc(null==t.purchasedProducts?null:t.purchasedProducts.length)}}function G(t,e){if(1&t&&(d.Pb(0,"span",85),d.vc(1),d.Ob()),2&t){const t=d.Yb();d.yb(1),d.wc(null==t.freeProducts?null:t.freeProducts.length)}}function V(t,e){if(1&t){const t=d.Qb();d.Pb(0,"tr"),d.Pb(1,"td"),d.vc(2),d.Ob(),d.Pb(3,"td"),d.Pb(4,"div",76),d.Kb(5,"img",77),d.Pb(6,"div",78),d.vc(7),d.Ob(),d.Ob(),d.Ob(),d.Pb(8,"td",65),d.vc(9),d.Ob(),d.Pb(10,"td",65),d.vc(11),d.Ob(),d.Pb(12,"td",65),d.Pb(13,"input",86),d.Wb("keydown",(function(e){return d.oc(t),d.Yb().isNumber(e,"qty")}))("keyup",(function(){d.oc(t);const n=e.$implicit;return d.Yb().getUnitPrice(n,!0)}))("ngModelChange",(function(n){return d.oc(t),e.$implicit.stockQty=n})),d.Ob(),d.Ob(),d.Pb(14,"td",65),d.Pb(15,"input",87),d.Wb("keydown",(function(e){return d.oc(t),d.Yb().isNumber(e,"qty")}))("keyup",(function(){d.oc(t);const n=e.$implicit;return d.Yb().getUnitPrice(n,!0)}))("ngModelChange",(function(n){return d.oc(t),e.$implicit.stockQty=n})),d.Ob(),d.Ob(),d.Pb(16,"td"),d.vc(17),d.Ob(),d.Pb(18,"td",65),d.vc(19),d.Ob(),d.Pb(20,"td",65),d.vc(21),d.Zb(22,"number"),d.Ob(),d.Pb(23,"td"),d.Pb(24,"button",88),d.Wb("click",(function(){d.oc(t);const n=e.$implicit;return d.Yb().removeSelectedProduct(n)})),d.vc(25,"Delete"),d.Ob(),d.Ob(),d.Ob()}if(2&t){const t=e.$implicit,n=d.Yb();d.yb(2),d.wc(t.item_sku),d.yb(3),d.fc("src",t.thumbnail,d.pc),d.yb(2),d.wc(t.item_name),d.yb(1),d.ec("hidden",n.showFreeProducts),d.yb(1),d.xc(" ",t.unit_name," "),d.yb(1),d.ec("hidden",!n.showFreeProducts),d.yb(1),d.xc(" ",t.unit_name," "),d.yb(1),d.ec("hidden",!n.showFreeProducts),d.yb(1),d.ec("ngModel",t.stockQty),d.yb(1),d.ec("hidden",n.showFreeProducts),d.yb(1),d.ec("ngModel",t.stockQty),d.yb(2),d.wc(t.item_trade_price),d.yb(1),d.ec("hidden",n.showFreeProducts),d.yb(1),d.wc(t.discount_type_value),d.yb(1),d.ec("hidden",n.showFreeProducts),d.yb(1),d.xc("",d.bc(22,16,t.net_amount,"1.2-2")," ")}}function Z(t,e){1&t&&(d.Pb(0,"button",89),d.Pb(1,"div",90),d.Pb(2,"span",91),d.vc(3,"Loading..."),d.Ob(),d.Ob(),d.Ob())}function X(t,e){if(1&t){const t=d.Qb();d.Pb(0,"button",92),d.Wb("click",(function(){return d.oc(t),d.Yb().placeOrder()})),d.vc(1,"Order"),d.Ob()}}function tt(t,e){1&t&&(d.Pb(0,"button",93),d.vc(1,"Cancel"),d.Ob()),2&t&&d.ec("routerLink","/inventory/gallery")}function et(t,e){if(1&t){const t=d.Qb();d.Pb(0,"div",9),d.Pb(1,"div",10),d.Pb(2,"strong"),d.vc(3,"To:"),d.Ob(),d.Pb(4,"input",38),d.Wb("ngModelChange",(function(e){return d.oc(t),d.Yb().historyDateTo=e}))("change",(function(){return d.oc(t),d.Yb().dateChanged()})),d.Ob(),d.Ob(),d.Ob()}if(2&t){const t=d.Yb();d.yb(4),d.ec("ngModel",t.historyDateTo)}}const nt=function(t){return["/reports","purchase",t]};function it(t,e){if(1&t){const t=d.Qb();d.Pb(0,"button",42),d.Wb("click",(function(){return d.oc(t),d.Yb(3).closePopup()})),d.vc(1,"View Details"),d.Ob()}if(2&t){const t=d.Yb().$implicit;d.ec("routerLink",d.ic(1,nt,t.purchase_id))}}function ot(t,e){if(1&t&&(d.Pb(0,"tr"),d.Pb(1,"td"),d.vc(2),d.Ob(),d.Pb(3,"td"),d.vc(4),d.Zb(5,"number"),d.Ob(),d.Pb(6,"td"),d.vc(7),d.Ob(),d.Pb(8,"td"),d.vc(9),d.Ob(),d.Pb(10,"td"),d.vc(11),d.Ob(),d.Pb(12,"td"),d.tc(13,it,2,3,"button",41),d.Ob(),d.Ob()),2&t){const t=e.$implicit;d.yb(2),d.wc(t.item_name),d.yb(2),d.wc(d.ac(5,6,t.balance||0)),d.yb(3),d.wc(t.type),d.yb(2),d.wc("Return Market"===t.module&&"out"===t.status?"Damage":"Return Market"===t.module&&"in"===t.status?"Sellable":t.status),d.yb(2),d.wc(t.created_at),d.yb(2),d.ec("ngIf","purchase"===t.type)}}function rt(t,e){if(1&t&&(d.Pb(0,"table",39),d.Pb(1,"thead"),d.Pb(2,"tr"),d.Pb(3,"th"),d.vc(4,"ITEM"),d.Ob(),d.Pb(5,"th"),d.vc(6,"STOCK"),d.Ob(),d.Pb(7,"th"),d.vc(8,"TYPE"),d.Ob(),d.Pb(9,"th"),d.vc(10,"STATE"),d.Ob(),d.Pb(11,"th"),d.vc(12,"LAST ADDED ON"),d.Ob(),d.Pb(13,"th"),d.vc(14,"ACTION"),d.Ob(),d.Ob(),d.Ob(),d.Pb(15,"tbody"),d.tc(16,ot,14,8,"tr",40),d.Ob(),d.Ob()),2&t){const t=d.Yb();d.ec("dtOptions",t.dtOptions),d.yb(16),d.ec("ngForOf",t.stockHistory)}}function ct(t,e){1&t&&(d.Pb(0,"div",43),d.Pb(1,"span",44),d.vc(2,"Loading..."),d.Ob(),d.Ob())}function st(t,e){if(1&t&&(d.Pb(0,"span"),d.vc(1),d.Zb(2,"number"),d.Ob()),2&t){const t=e.$implicit,n=e.index,i=d.Yb().$implicit;d.yb(1),d.zc(" ",t.type,": ",d.ac(2,3,t.exact),"",n!==i.stockDetail.length-1?",":""," ")}}function at(t,e){if(1&t){const t=d.Qb();d.Pb(0,"tr"),d.Pb(1,"td"),d.vc(2),d.Ob(),d.Pb(3,"td"),d.vc(4),d.Zb(5,"number"),d.Ob(),d.Pb(6,"td"),d.tc(7,st,3,5,"span",40),d.Ob(),d.Pb(8,"td"),d.vc(9),d.Ob(),d.Pb(10,"td"),d.vc(11),d.Ob(),d.Pb(12,"td"),d.Pb(13,"button",46),d.Wb("click",(function(n){d.oc(t);const i=e.$implicit;return d.Yb(2).getHistory(i.item_id,n)})),d.vc(14,"View History"),d.Ob(),d.Ob(),d.Ob()}if(2&t){const t=e.$implicit;d.yb(2),d.wc(t.item_name),d.yb(2),d.wc(d.ac(5,5,t.stock||0)),d.yb(3),d.ec("ngForOf",t.stockDetail),d.yb(2),d.wc(t.state),d.yb(2),d.wc(t.created_at)}}function dt(t,e){if(1&t&&(d.Pb(0,"table",45),d.Pb(1,"thead"),d.Pb(2,"tr"),d.Pb(3,"th"),d.vc(4,"ITEM"),d.Ob(),d.Pb(5,"th"),d.vc(6,"CURRENT STOCK"),d.Ob(),d.Pb(7,"th"),d.vc(8,"STOCK DETAILS"),d.Ob(),d.Pb(9,"th"),d.vc(10,"STATE"),d.Ob(),d.Pb(11,"th"),d.vc(12,"LAST ADDED ON"),d.Ob(),d.Pb(13,"th"),d.vc(14,"ACTION"),d.Ob(),d.Ob(),d.Ob(),d.Pb(15,"tbody"),d.tc(16,at,15,7,"tr",40),d.Ob(),d.Ob()),2&t){const t=d.Yb();d.ec("dtOptions",t.dtOptions),d.yb(16),d.ec("ngForOf",t.productsStock)}}function bt(t,e){1&t&&(d.Pb(0,"div"),d.Kb(1,"app-loader-white"),d.Ob())}function lt(t,e){if(1&t&&(d.Pb(0,"ng-option",21),d.vc(1),d.Ob()),2&t){const t=e.$implicit;d.ec("value",t),d.yb(1),d.xc(" ",t," ")}}function ut(t,e){if(1&t&&(d.Pb(0,"ng-option",21),d.vc(1),d.Ob()),2&t){const t=e.$implicit;d.ec("value",t.name),d.yb(1),d.xc(" ",t.name," ")}}function gt(t,e){if(1&t&&(d.Pb(0,"ng-option",21),d.vc(1),d.Ob()),2&t){const t=e.$implicit;d.ec("value",t.sub_category_name),d.yb(1),d.xc(" ",t.sub_category_name," ")}}function ht(t,e){if(1&t){const t=d.Qb();d.Pb(0,"td"),d.Pb(1,"button",28),d.Wb("click",(function(){d.oc(t);const e=d.Yb().$implicit;return d.Yb(2).addProduct(e)})),d.vc(2,"Add"),d.Ob(),d.Ob()}if(2&t){const t=d.Yb().$implicit;d.yb(1),d.ec("disabled",!t.stockQty)}}function pt(t,e){if(1&t){const t=d.Qb();d.Pb(0,"td"),d.Pb(1,"button",29),d.Wb("click",(function(){d.oc(t);const e=d.Yb().$implicit;return d.Yb(2).removeProduct(e)})),d.vc(2,"Remove"),d.Ob(),d.Ob()}}function Pt(t,e){if(1&t){const t=d.Qb();d.Pb(0,"tr"),d.Pb(1,"td"),d.vc(2),d.Ob(),d.Pb(3,"td"),d.Kb(4,"img",25),d.vc(5),d.Ob(),d.Pb(6,"td"),d.vc(7),d.Ob(),d.Pb(8,"td"),d.vc(9),d.Ob(),d.Pb(10,"td"),d.Pb(11,"input",26),d.Wb("keydown",(function(e){return d.oc(t),d.Yb(2).isNumber(e)}))("ngModelChange",(function(n){return d.oc(t),e.$implicit.stockQty=n})),d.Ob(),d.Ob(),d.tc(12,ht,3,1,"td",27),d.tc(13,pt,3,0,"td",27),d.Ob()}if(2&t){const t=e.$implicit;d.yb(2),d.wc(t.item_sku),d.yb(2),d.ec("src",t.thumbnail,d.pc),d.yb(1),d.xc(" ",t.item_name,""),d.yb(2),d.wc(t.brand_name),d.yb(2),d.wc(t.unit_name),d.yb(2),d.ec("ngModel",t.stockQty),d.yb(1),d.ec("ngIf",!t.isAdded),d.yb(1),d.ec("ngIf",t.isAdded)}}function mt(t,e){if(1&t&&(d.Pb(0,"table",22),d.Pb(1,"thead"),d.Pb(2,"tr"),d.Pb(3,"th"),d.vc(4,"ITEM SKU"),d.Ob(),d.Pb(5,"th",23),d.vc(6,"ITEM NAME"),d.Ob(),d.Pb(7,"th"),d.vc(8,"ITEM BRAND"),d.Ob(),d.Pb(9,"th"),d.vc(10,"UNITS"),d.Ob(),d.Pb(11,"th"),d.vc(12,"ADD STOCK"),d.Ob(),d.Pb(13,"th"),d.vc(14,"ACTIONS"),d.Ob(),d.Ob(),d.Ob(),d.Pb(15,"tbody"),d.tc(16,Pt,14,8,"tr",24),d.Ob(),d.Ob()),2&t){const t=d.Yb();d.ec("dtOptions",t.dtOptions),d.yb(16),d.ec("ngForOf",t.dispProducts)}}function Ot(t,e){1&t&&(d.Pb(0,"div",16),d.Kb(1,"app-loader-white"),d.Ob())}function ft(t,e){1&t&&(d.Pb(0,"button",30),d.Pb(1,"div",31),d.Pb(2,"span",32),d.vc(3,"Loading..."),d.Ob(),d.Ob(),d.Ob())}function vt(t,e){if(1&t){const t=d.Qb();d.Pb(0,"button",33),d.Wb("click",(function(){return d.oc(t),d.Yb().addOpeningStock()})),d.vc(1,"Save"),d.Ob()}}const yt=function(){return["/retailer","opening-balance"]};function _t(t,e){1&t&&(d.Pb(0,"button",34),d.vc(1,"Cancel"),d.Ob()),2&t&&d.ec("routerLink",d.hc(1,yt))}const Ct=[{path:"",component:b,children:[{path:"",redirectTo:"gallery"},{path:"gallery",pathMatch:"full",component:T},{path:"distributor-purchase",pathMatch:"full",component:(()=>{class t{constructor(t,e,n,i,o,r){this.change=t,this.router=e,this.inventoryService=n,this.toastService=i,this.generalDataService=o,this.dataService=r,this.dtTrigger=new D.a,this.dtOptions={},this.purchasedProductsIds=[],this.freeProductsIds=[],this.primaryProducts=[],this.secondaryProducts=[]}ngOnInit(){this.dtOptions={pagingType:"simple_numbers"},this.distributorPurchase={dcDate:"  ",dcNo:"",invoiceDate:"  ",invoiceNo:"",poDate:"  ",poNo:null,receivedDate:"  ",receivedNo:null,remark:"",gst:0,fare:0,supplier:"shahi",original_amount:0,discount:0,net_amount:0,items:[],free:[]},this.loading=!1,this.showFreeProducts=!1,this.addNewProducts=!1,this.subTotalBill=0,this.totalBill=0,this.freeProducts=[],this.purchasedProducts=[],this.productPrefs=[],this.itemMargin=[],this.getDistributorInventory()}ngAfterViewInit(){this.dtTrigger.next()}getDistributorInventory(){this.inventoryService.getDistributorPurchaseData().subscribe(t=>{200===t.status&&(this.products=t.data.inventory.map(e=>{var n;return e.discount=0,e.discount_type="percentage",e.discount_type_value=(null===(n=t.data.itemMargin.find(t=>t.item_id===e.item_id))||void 0===n?void 0:n.discount)||0,e.net_amount=0,e.stockQty=0,e.original_amount=0,e}),this.primaryProducts=this.products.filter(t=>0===t.child),this.secondaryProducts=this.products.filter(t=>0!==t.child),this.productsDispList=JSON.parse(JSON.stringify(this.secondaryProducts)))},t=>{1!==t.status&&401!==t.status&&this.toastService.showToaster({title:"Error:",message:"Products not fetched, please try again later.",type:"error"})})}getProductsWithPrefType(){this.loadingProducts=!0,this.generalDataService.getProductsWithPrefType("").subscribe(t=>{this.loadingProducts=!1,200===t.status&&(this.products=t.data.invetory.map(e=>{var n;return e.discount=0,e.discount_type="percentage",e.discount_type_value=(null===(n=t.data.itemMargin.find(t=>t.item_id===e.item_id))||void 0===n?void 0:n.discount)||0,e.net_amount=0,e.stockQty=0,e.original_amount=0,e.pref_id="0",e}),this.primaryProducts=this.products.filter(t=>0===t.child),this.secondaryProducts=this.products.filter(t=>0!==t.child),this.productsDispList=JSON.parse(JSON.stringify(this.secondaryProducts)))},t=>{this.loadingProducts=!1,1!==t.status&&401!==t.status&&this.toastService.showToaster({title:"Error:",message:"Products not fetched, please try again later.",type:"error"})})}searchProducts(t){this.productsDispList=t?this.showFreeProducts?this.secondaryProducts.filter(e=>e.item_name.toLowerCase().includes(t.toLowerCase())):this.primaryProducts.filter(e=>e.item_name.toLowerCase().includes(t.toLowerCase())):this.showFreeProducts?JSON.parse(JSON.stringify(this.secondaryProducts)):JSON.parse(JSON.stringify(this.primaryProducts))}addSelectedProduct(t){const e=JSON.parse(JSON.stringify(t));e.stockQty=1,e.tradePrice=0,this.showFreeProducts?(e.original_amount=e.stockQty*e.item_trade_price,e.discount=e.original_amount,e.discount_type="percentage",e.discount_type_value=100,e.net_amount=0,this.freeProducts.push(e),this.freeProductsIds.push(e.item_id),this.calculatePurchasedSubTotal(),this.rerenderPurchasedProducts()):(this.purchasedProducts.push(e),this.purchasedProductsIds.push(e.item_id),this.rerenderPurchasedProducts()),this.getUnitPrice(e)}getArray(){return this.showFreeProducts?this.freeProducts:this.purchasedProducts}rerenderPurchasedProducts(){Object(N.a)(this.dtPurchasedProducts.dtInstance).pipe(Object(I.a)(t=>t.destroy())).subscribe(t=>{this.dtTrigger.next(),this.change.detectChanges()})}removeSelectedProduct(t){if(this.showFreeProducts){const e=this.freeProducts.findIndex(e=>e.item_id===t.item_id);this.freeProducts.splice(e,1),this.freeProductsIds.splice(e,1)}else{const e=this.purchasedProducts.findIndex(e=>e.item_id===t.item_id);this.purchasedProducts.splice(e,1),this.purchasedProductsIds.splice(e,1)}this.calculatePurchasedSubTotal(),this.rerenderPurchasedProducts()}openNewProducts(t){t.stopPropagation(),this.productsDispList=this.showFreeProducts?JSON.parse(JSON.stringify(this.secondaryProducts)):JSON.parse(JSON.stringify(this.primaryProducts)),this.addNewProducts=!0,document.body.classList.add("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.add("d-block"),document.getElementById("purchase-list").classList.add("blur-div")}closeNewProducts(){this.addNewProducts=!1,document.body.classList.remove("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.remove("d-block"),document.getElementById("purchase-list").classList.remove("blur-div")}clickOutSide(t){t.target.className.includes("ng-option")||t.target.className.includes("ng-value-icon left")||this.closeNewProducts()}isInTheArray(t){return this.showFreeProducts?this.freeProductsIds.includes(t):this.purchasedProductsIds.includes(t)}focused(t){t.target.parentElement.classList.add("focused")}left(t){t.target.value||t.target.parentElement.classList.remove("focused")}isNumber(t,e="charges"){return this.dataService.isNumber(t,e)}getUnitPrice(t,e=!1){+t.stockQty>1e3&&(t.stockQty=0),t.original_amount=this.dataService.calculateUnitPrice(t.stockQty,t.item_trade_price),t.discount=this.dataService.calculateDiscount(t.discount_type_value,t.discount_type,t.original_amount),t.net_amount=t.original_amount-t.discount,this.calculatePurchasedSubTotal()}calculatePurchasedSubTotal(){const t=[];this.distributorPurchase.discount=0,this.purchasedProducts.length?this.purchasedProducts.forEach(e=>{this.distributorPurchase.discount+=+e.discount,t.push(+e.original_amount),t.length===this.purchasedProducts.length&&this.calculateFreeSubTotal(t)}):this.calculateFreeSubTotal(t)}calculateFreeSubTotal(t){this.freeProducts.length?this.freeProducts.forEach((e,n)=>{this.distributorPurchase.discount+=+e.discount,t.push(+e.original_amount),n===this.freeProducts.length-1&&(this.distributorPurchase.original_amount=this.dataService.calculateItemsBill(t))}):this.distributorPurchase.original_amount=this.dataService.calculateItemsBill(t),this.calculateTotal()}calculateTotal(){this.distributorPurchase.net_amount=+this.distributorPurchase.original_amount+ +this.distributorPurchase.gst+ +this.distributorPurchase.fare-this.distributorPurchase.discount}placeOrder(){this.submitted=!0,this.validateForm()&&(this.loading=!0,this.distributorPurchase.discount=Number(this.distributorPurchase.discount),this.distributorPurchase.net_amount=Number(this.distributorPurchase.net_amount),this.distributorPurchase.original_amount=Number(this.distributorPurchase.original_amount),this.distributorPurchase.items=this.purchasedProducts.map(t=>({type:"regular",pref_id:t.pref_id,unit_id:t.unit_id,item_id:t.item_id,item_sku:t.item_sku,child:t.child,item_name:t.item_name,unit_name:t.unit_name,quantity:t.stockQty,original_amount:t.original_amount,discount:t.discount,discount_type:"percentage",discount_type_value:t.discount_type_value,net_amount:t.net_amount})),this.distributorPurchase.free=this.freeProducts.map(t=>({type:"free",pref_id:t.pref_id,unit_id:t.unit_id,item_id:t.item_id,child:t.child,item_sku:t.item_sku,item_name:t.item_name,unit_name:t.unit_name,quantity:t.stockQty,original_amount:t.original_amount,discount:t.original_amount,discount_type:"percentage",discount_type_value:100,net_amount:0})),this.inventoryService.addDistributorPurchase(this.distributorPurchase).subscribe(t=>{this.loading=!1,this.submitted=!1,this.toastService.showToaster({title:"Order Placed:",message:"Your order is placed successfully.",type:"success"}),this.router.navigateByUrl("/reports/purchase-history")},t=>{this.loading=!1,this.submitted=!1,401!==t.status&&1!==t.status&&this.toastService.showToaster({title:"Error:",message:"Order is not placed, try again later.",type:"error"}),scrollTo(0,0)}))}validateForm(){if(this.distributorPurchase.dcDate.trim()&&this.distributorPurchase.dcNo.trim()&&null!==this.distributorPurchase.discount&&null!==this.distributorPurchase.fare&&null!==this.distributorPurchase.gst&&this.distributorPurchase.invoiceDate.trim()&&this.distributorPurchase.invoiceNo.trim()&&(this.purchasedProducts.length||this.freeProducts.length)&&null!==this.distributorPurchase.net_amount&&this.distributorPurchase.original_amount&&this.distributorPurchase.poDate.trim()&&this.distributorPurchase.poNo.trim()&&this.distributorPurchase.receivedDate.trim()&&this.distributorPurchase.receivedNo.trim()&&this.distributorPurchase.remark.trim()&&this.distributorPurchase.supplier.trim()){const t=this.purchasedProducts.filter(t=>"0"===t.pref_id);return!(this.freeProducts.filter(t=>"0"===t.pref_id).length>0||t.length>0)||(this.toastService.showToaster({title:"Error:",message:"Please select the unit for all products!",type:"error"}),scrollTo(0,0),!1)}return this.toastService.showToaster({title:"Error:",message:"Please fill all the fields and select products to purchase and select the product units!",type:"error"}),scrollTo(0,0),!1}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.change.detach()}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(d.h),d.Jb(a.f),d.Jb(g),d.Jb(F.a),d.Jb(A.b),d.Jb(A.a))},t.\u0275cmp=d.Db({type:t,selectors:[["app-distributor-purchase"]],viewQuery:function(t,e){var n;1&t&&d.Ac(c.a,!0),2&t&&d.mc(n=d.Xb())&&(e.dtPurchasedProducts=n.first)},decls:234,vars:73,consts:[["id","product-cl-sec",3,"ngClass","clickOutside"],["id","pl-close",1,"close-btn-pl",3,"click"],[1,"pro-header-text"],[1,"se_cus-type","form-wrap","p-15"],[1,"row"],[1,"col-12"],[1,"productSearch"],[1,"fa","fa-search"],["type","text","id","","placeholder","Search",1,"form-control",3,"keyup"],[1,"pc-cartlist"],[1,"overflow-plist"],[1,"plist-content"],[1,"_left-filter","pt-0"],[1,"container"],["class","col-12",4,"ngIf"],["class","col-12 loader",4,"ngIf"],[1,"_cl-bottom"],["id","pl-close",1,"btn","btn-cancel","mr-2",3,"click"],["id","purchase-list",1,"container"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],[1,"col-md-12","mb-30"],[1,"card","mb-30"],[1,"header"],[1,"body","PT-15"],["id","floating-label"],[1,"form-wrap","p-0"],[1,"col-2","pr-0"],[1,"form-group","mb-5"],[1,"control-label","mb-0"],["type","text","id","received_no","required","","name","received_no","placeholder","",1,"form-control",3,"ngModel","focus","ngModelChange","blur"],["rcvNo","ngModel"],["class","input-error",4,"ngIf"],["type","date","id","received_date","required","","name","received_date","placeholder","","autocomplete","off",1,"form-control",3,"ngModel","focus","ngModelChange","blur"],["rcvDate","ngModel"],["type","text","id","inv_no","required","","name","inv_no","placeholder","",1,"form-control",3,"ngModel","focus","blur","ngModelChange"],["invNo","ngModel"],["type","text","id","p_o_no","required","","name","p_o_no","placeholder","",1,"form-control",3,"ngModel","focus","blur","ngModelChange"],["poNo","ngModel"],["type","text","id","d_c_no","required","","name","d_c_no","placeholder","",1,"form-control",3,"ngModel","focus","blur","ngModelChange"],["dcNo","ngModel"],[1,"col-2"],["type","date","id","inv_date","required","","name","inv_date","placeholder","","autocomplete","off",1,"form-control",3,"ngModel","focus","blur","ngModelChange"],["invcDate","ngModel"],[1,"col-6","pr-0"],["type","text","id","remark","required","","name","remark","placeholder","",1,"form-control",3,"ngModel","focus","blur","ngModelChange"],["remark","ngModel"],["type","date","id","p_o_date","required","","name","p_o_date","placeholder","","autocomplete","off",1,"form-control",3,"ngModel","focus","blur","ngModelChange"],["poDate","ngModel"],["type","date","id","d_c_date","required","","name","d_c_date","placeholder","","autocomplete","off",1,"form-control",3,"ngModel","focus","blur","ngModelChange"],["dcDate","ngModel"],[1,"col-md-12","PT-20"],[1,"header-tabs",2,"box-shadow","none","border-bottom","solid 1px #e2e9fb"],["id","pills-tab","role","tablist",1,"nav","nav-pills"],[1,"nav-item",3,"click"],["id","pills-home-tab",1,"nav-link",3,"ngClass"],["class","_cus-val",4,"ngIf"],["id","pills-profile-tab",1,"nav-link",3,"ngClass"],["id","productlist01","type","submit",1,"btn","add_button",3,"click"],[1,"fa","fa-plus",2,"padding-right","3px"],["id","pills-tabContent",1,"tab-content"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","fade","show","active"],["datatable","","id","purchase-table",1,"table","table-hover","dt-responsive","nowrap","dis-pr-list",2,"width","100%",3,"dtOptions","dtTrigger"],[3,"hidden"],["placeholder","0.0",1,"itemQTY",3,"ngModel","keydown","ngModelChange","keyup"],["placeholder","0.0",1,"itemQTY",3,"ngModel","keydown","keyup","ngModelChange"],[4,"ngFor","ngForOf"],[1,"col-md-12","p-0"],[1,"action-ord"],["type","submit","class","btn btn-primary mr-2","disabled","",4,"ngIf"],["type","submit","class","btn btn-primary mr-2",3,"click",4,"ngIf"],["id","pl-close","class","btn btn-cancel mr-2",3,"routerLink",4,"ngIf"],[1,"card","top_border","p-15"],["width","100%",1,"AddProductTable"],[1,"ProListDiv"],["alt","",1,"PrList_img",3,"src"],[1,"PR_Name"],[4,"ngIf"],["data-toggle","modal",1,"btn","btn-default","mb-0",3,"click"],["data-toggle","modal",1,"btn","btn-default","red-bg","mb-0",3,"click"],[1,"col-12","loader"],[1,"loading"],[1,"input-error"],[1,"_cus-val"],["placeholder","0","name","free-qty","type","number","min","1",1,"itemQTY",3,"ngModel","keydown","keyup","ngModelChange"],["placeholder","0","name","purchase-qty","type","number","min","1",1,"itemQTY",3,"ngModel","keydown","keyup","ngModelChange"],[1,"btn","smBTN","red-bg","mb-0",3,"click"],["type","submit","disabled","",1,"btn","btn-primary","mr-2"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary","mr-2",3,"click"],["id","pl-close",1,"btn","btn-cancel","mr-2",3,"routerLink"]],template:function(t,e){if(1&t&&(d.Pb(0,"div",0),d.Wb("clickOutside",(function(t){return e.clickOutSide(t)})),d.Pb(1,"a",1),d.Wb("click",(function(){return e.closeNewProducts()})),d.Ob(),d.Pb(2,"div",2),d.vc(3,"Add "),d.Pb(4,"span"),d.vc(5,"Product"),d.Ob(),d.Ob(),d.Pb(6,"div",3),d.Pb(7,"div",4),d.Pb(8,"div",5),d.Pb(9,"div",6),d.Kb(10,"i",7),d.Pb(11,"input",8),d.Wb("keyup",(function(t){return e.searchProducts(t.target.value)})),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(12,"div",9),d.Pb(13,"div",10),d.Pb(14,"div",11),d.Pb(15,"div",12),d.Pb(16,"div",13),d.Pb(17,"div",4),d.tc(18,K,5,1,"div",14),d.tc(19,W,3,0,"div",15),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(20,"div",16),d.Pb(21,"button",17),d.Wb("click",(function(){return e.closeNewProducts()})),d.vc(22,"Close"),d.Ob(),d.Ob(),d.Ob(),d.Pb(23,"div",18),d.Pb(24,"div",19),d.Pb(25,"div",20),d.Pb(26,"h2",21),d.vc(27,"Distributor "),d.Pb(28,"span"),d.vc(29,"Purchase"),d.Ob(),d.Ob(),d.Ob(),d.Pb(30,"div",20),d.Pb(31,"ol",22),d.Pb(32,"li"),d.Pb(33,"a"),d.Pb(34,"span"),d.vc(35,"Distributor Purchase"),d.Ob(),d.Ob(),d.Ob(),d.Pb(36,"li"),d.Pb(37,"span"),d.vc(38,"Create"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(39,"div",4),d.Pb(40,"div",23),d.Pb(41,"div",24),d.Pb(42,"div",25),d.Pb(43,"h2"),d.vc(44,"Create "),d.Pb(45,"span"),d.vc(46," Order"),d.Ob(),d.Ob(),d.Ob(),d.Pb(47,"div",26),d.Pb(48,"div",27),d.Pb(49,"div",28),d.Pb(50,"div",4),d.Pb(51,"div",29),d.Pb(52,"div",30),d.Pb(53,"label",31),d.vc(54,"Received No."),d.Ob(),d.Pb(55,"input",32,33),d.Wb("focus",(function(t){return e.focused(t)}))("ngModelChange",(function(t){return e.distributorPurchase.receivedNo=t}))("blur",(function(t){return e.left(t)})),d.Ob(),d.Ob(),d.tc(57,Y,2,0,"span",34),d.Ob(),d.Pb(58,"div",29),d.Pb(59,"div",30),d.Pb(60,"label",31),d.vc(61,"Receive Date"),d.Ob(),d.Pb(62,"input",35,36),d.Wb("focus",(function(t){return e.focused(t)}))("ngModelChange",(function(t){return e.distributorPurchase.receivedDate=t}))("blur",(function(t){return e.left(t)})),d.Ob(),d.Ob(),d.tc(64,B,2,0,"span",34),d.Ob(),d.Pb(65,"div",29),d.Pb(66,"div",30),d.Pb(67,"label",31),d.vc(68,"Inv. No."),d.Ob(),d.Pb(69,"input",37,38),d.Wb("focus",(function(t){return e.focused(t)}))("blur",(function(t){return e.left(t)}))("ngModelChange",(function(t){return e.distributorPurchase.invoiceNo=t})),d.Ob(),d.Ob(),d.tc(71,z,2,0,"span",34),d.Ob(),d.Pb(72,"div",29),d.Pb(73,"div",30),d.Pb(74,"label",31),d.vc(75,"P.O No."),d.Ob(),d.Pb(76,"input",39,40),d.Wb("focus",(function(t){return e.focused(t)}))("blur",(function(t){return e.left(t)}))("ngModelChange",(function(t){return e.distributorPurchase.poNo=t})),d.Ob(),d.Ob(),d.tc(78,J,2,0,"span",34),d.Ob(),d.Pb(79,"div",29),d.Pb(80,"div",30),d.Pb(81,"label",31),d.vc(82,"D.C No."),d.Ob(),d.Pb(83,"input",41,42),d.Wb("focus",(function(t){return e.focused(t)}))("blur",(function(t){return e.left(t)}))("ngModelChange",(function(t){return e.distributorPurchase.dcNo=t})),d.Ob(),d.Ob(),d.tc(85,Q,2,0,"span",34),d.Ob(),d.Pb(86,"div",43),d.Pb(87,"div",30),d.Pb(88,"label",31),d.vc(89,"Inv. Date"),d.Ob(),d.Pb(90,"input",44,45),d.Wb("focus",(function(t){return e.focused(t)}))("blur",(function(t){return e.left(t)}))("ngModelChange",(function(t){return e.distributorPurchase.invoiceDate=t})),d.Ob(),d.Ob(),d.tc(92,$,2,0,"span",34),d.Ob(),d.Pb(93,"div",46),d.Pb(94,"div",30),d.Pb(95,"label",31),d.vc(96,"Remarks"),d.Ob(),d.Pb(97,"input",47,48),d.Wb("focus",(function(t){return e.focused(t)}))("blur",(function(t){return e.left(t)}))("ngModelChange",(function(t){return e.distributorPurchase.remark=t})),d.Ob(),d.Ob(),d.tc(99,U,2,0,"span",34),d.Ob(),d.Pb(100,"div",29),d.Pb(101,"div",30),d.Pb(102,"label",31),d.vc(103,"P.O Date"),d.Ob(),d.Pb(104,"input",49,50),d.Wb("focus",(function(t){return e.focused(t)}))("blur",(function(t){return e.left(t)}))("ngModelChange",(function(t){return e.distributorPurchase.poDate=t})),d.Ob(),d.Ob(),d.tc(106,H,2,0,"span",34),d.Ob(),d.Pb(107,"div",29),d.Pb(108,"div",30),d.Pb(109,"label",31),d.vc(110,"D.C Date"),d.Ob(),d.Pb(111,"input",51,52),d.Wb("focus",(function(t){return e.focused(t)}))("blur",(function(t){return e.left(t)}))("ngModelChange",(function(t){return e.distributorPurchase.dcDate=t})),d.Ob(),d.Ob(),d.tc(113,q,2,0,"span",34),d.Ob(),d.Pb(114,"div",53),d.Pb(115,"div",54),d.Pb(116,"ul",55),d.Pb(117,"li",56),d.Wb("click",(function(){return e.showFreeProducts=!1,e.rerenderPurchasedProducts()})),d.Pb(118,"a",57),d.Pb(119,"span"),d.vc(120,"Product List"),d.Ob(),d.tc(121,j,2,1,"span",58),d.Ob(),d.Ob(),d.Pb(122,"li",56),d.Wb("click",(function(){return e.showFreeProducts=!0,e.rerenderPurchasedProducts()})),d.Pb(123,"a",59),d.Pb(124,"span"),d.vc(125,"Free Product List"),d.Ob(),d.tc(126,G,2,1,"span",58),d.Ob(),d.Ob(),d.Ob(),d.Pb(127,"button",60),d.Wb("click",(function(t){return e.openNewProducts(t)})),d.Kb(128,"i",61),d.Pb(129,"span"),d.vc(130,"Add Product"),d.Ob(),d.Ob(),d.Ob(),d.Pb(131,"div",62),d.Pb(132,"div",63),d.Pb(133,"table",64),d.Pb(134,"thead"),d.Pb(135,"tr"),d.Pb(136,"th"),d.vc(137,"SKU"),d.Ob(),d.Pb(138,"th"),d.vc(139,"Item Name"),d.Ob(),d.Pb(140,"th",65),d.vc(141,"Select Unit"),d.Ob(),d.Pb(142,"th",65),d.vc(143,"Qty"),d.Ob(),d.Pb(144,"th",65),d.vc(145,"Select Free Unit"),d.Ob(),d.Pb(146,"th",65),d.vc(147,"Free Qty"),d.Ob(),d.Pb(148,"th"),d.vc(149,"Trade Price"),d.Ob(),d.Pb(150,"th",65),d.vc(151,"Margin %"),d.Ob(),d.Pb(152,"th",65),d.vc(153,"Net Amount"),d.Ob(),d.Pb(154,"th"),d.vc(155,"Action"),d.Ob(),d.Ob(),d.Ob(),d.Pb(156,"tfoot",65),d.Pb(157,"tr"),d.Pb(158,"th"),d.vc(159,"Total items"),d.Ob(),d.Pb(160,"th"),d.vc(161),d.Ob(),d.Kb(162,"th",65),d.Kb(163,"th",65),d.Kb(164,"th",65),d.Kb(165,"th"),d.Kb(166,"th",65),d.Pb(167,"th"),d.vc(168,"Subtotal PKR."),d.Ob(),d.Pb(169,"th"),d.vc(170),d.Zb(171,"number"),d.Ob(),d.Kb(172,"th"),d.Ob(),d.Pb(173,"tr"),d.Kb(174,"th"),d.Kb(175,"th",65),d.Kb(176,"th",65),d.Kb(177,"th",65),d.Kb(178,"th"),d.Kb(179,"th",65),d.Kb(180,"th"),d.Pb(181,"th"),d.vc(182,"Distribution Discount."),d.Ob(),d.Pb(183,"th"),d.vc(184),d.Zb(185,"number"),d.Ob(),d.Kb(186,"th"),d.Ob(),d.Pb(187,"tr"),d.Kb(188,"th"),d.Kb(189,"th",65),d.Kb(190,"th",65),d.Kb(191,"th"),d.Kb(192,"th",65),d.Kb(193,"th",65),d.Kb(194,"th"),d.Pb(195,"th"),d.vc(196,"GST"),d.Ob(),d.Pb(197,"th"),d.Pb(198,"input",66),d.Wb("keydown",(function(t){return e.isNumber(t)}))("ngModelChange",(function(t){return e.distributorPurchase.gst=t}))("keyup",(function(){return e.calculateTotal()})),d.Ob(),d.Ob(),d.Kb(199,"th"),d.Ob(),d.Pb(200,"tr"),d.Kb(201,"th"),d.Kb(202,"th",65),d.Kb(203,"th",65),d.Kb(204,"th",65),d.Kb(205,"th"),d.Kb(206,"th",65),d.Kb(207,"th"),d.Pb(208,"th"),d.vc(209,"Freight Charges."),d.Ob(),d.Pb(210,"th"),d.Pb(211,"input",67),d.Wb("keydown",(function(t){return e.isNumber(t)}))("keyup",(function(){return e.calculateTotal()}))("ngModelChange",(function(t){return e.distributorPurchase.fare=t})),d.Ob(),d.Ob(),d.Kb(212,"th"),d.Ob(),d.Pb(213,"tr"),d.Kb(214,"th"),d.Kb(215,"th",65),d.Kb(216,"th",65),d.Kb(217,"th",65),d.Kb(218,"th"),d.Kb(219,"th",65),d.Kb(220,"th"),d.Pb(221,"th"),d.vc(222,"Total PKR.."),d.Ob(),d.Pb(223,"th"),d.vc(224),d.Zb(225,"number"),d.Ob(),d.Kb(226,"th"),d.Ob(),d.Ob(),d.Pb(227,"tbody"),d.tc(228,V,26,19,"tr",68),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(229,"div",69),d.Pb(230,"div",70),d.tc(231,Z,4,0,"button",71),d.tc(232,X,2,0,"button",72),d.tc(233,tt,2,1,"button",73),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&t){const t=d.nc(56),n=d.nc(70),i=d.nc(77),o=d.nc(84),r=d.nc(98);d.ec("ngClass",e.addNewProducts?"active show":""),d.yb(18),d.ec("ngIf",!e.loadingProducts),d.yb(1),d.ec("ngIf",e.loadingProducts),d.yb(36),d.ec("ngModel",e.distributorPurchase.receivedNo),d.yb(2),d.ec("ngIf",e.submitted&&(null==t.errors?null:t.errors.required)),d.yb(5),d.ec("ngModel",e.distributorPurchase.receivedDate),d.yb(2),d.ec("ngIf",e.submitted&&"  "===e.distributorPurchase.receivedDate),d.yb(5),d.ec("ngModel",e.distributorPurchase.invoiceNo),d.yb(2),d.ec("ngIf",e.submitted&&(null==n.errors?null:n.errors.required)),d.yb(5),d.ec("ngModel",e.distributorPurchase.poNo),d.yb(2),d.ec("ngIf",e.submitted&&(null==i.errors?null:i.errors.required)),d.yb(5),d.ec("ngModel",e.distributorPurchase.dcNo),d.yb(2),d.ec("ngIf",e.submitted&&(null==o.errors?null:o.errors.required)),d.yb(5),d.ec("ngModel",e.distributorPurchase.invoiceDate),d.yb(2),d.ec("ngIf",e.submitted&&"  "===e.distributorPurchase.invoiceDate),d.yb(5),d.ec("ngModel",e.distributorPurchase.remark),d.yb(2),d.ec("ngIf",e.submitted&&(null==r.errors?null:r.errors.required)),d.yb(5),d.ec("ngModel",e.distributorPurchase.poDate),d.yb(2),d.ec("ngIf",e.submitted&&"  "===e.distributorPurchase.poDate),d.yb(5),d.ec("ngModel",e.distributorPurchase.dcDate),d.yb(2),d.ec("ngIf",e.submitted&&"  "===e.distributorPurchase.dcDate),d.yb(5),d.ec("ngClass",!1===e.showFreeProducts?"active":""),d.yb(3),d.ec("ngIf",null==e.purchasedProducts?null:e.purchasedProducts.length),d.yb(2),d.ec("ngClass",!0===e.showFreeProducts?"active":""),d.yb(3),d.ec("ngIf",null==e.freeProducts?null:e.freeProducts.length),d.yb(7),d.ec("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),d.yb(7),d.ec("hidden",e.showFreeProducts),d.yb(2),d.ec("hidden",e.showFreeProducts),d.yb(2),d.ec("hidden",!e.showFreeProducts),d.yb(2),d.ec("hidden",!e.showFreeProducts),d.yb(4),d.ec("hidden",e.showFreeProducts),d.yb(2),d.ec("hidden",e.showFreeProducts),d.yb(4),d.ec("hidden",e.showFreeProducts),d.yb(5),d.wc(null==e.purchasedProducts?null:e.purchasedProducts.length),d.yb(1),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",!e.showFreeProducts),d.yb(2),d.ec("hidden",!e.showFreeProducts),d.yb(4),d.wc(d.bc(171,64,e.distributorPurchase.original_amount,"1.2-2")),d.yb(5),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",!e.showFreeProducts),d.yb(2),d.ec("hidden",!e.showFreeProducts),d.yb(5),d.wc(d.bc(185,67,e.distributorPurchase.discount,"1.2-2")),d.yb(5),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",e.showFreeProducts),d.yb(2),d.ec("hidden",!e.showFreeProducts),d.yb(1),d.ec("hidden",!e.showFreeProducts),d.yb(5),d.ec("ngModel",e.distributorPurchase.gst),d.yb(4),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",!e.showFreeProducts),d.yb(2),d.ec("hidden",!e.showFreeProducts),d.yb(5),d.ec("ngModel",e.distributorPurchase.fare),d.yb(4),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",e.showFreeProducts),d.yb(1),d.ec("hidden",!e.showFreeProducts),d.yb(2),d.ec("hidden",!e.showFreeProducts),d.yb(5),d.wc(d.bc(225,70,e.distributorPurchase.net_amount,"1.2-2")),d.yb(4),d.ec("ngForOf",e.getArray()),d.yb(3),d.ec("ngIf",e.loading),d.yb(1),d.ec("ngIf",!e.loading),d.yb(1),d.ec("ngIf",!e.loading)}},directives:[i.i,r.a,i.k,o.b,o.m,o.e,o.h,c.a,i.j,o.j,a.g],pipes:[i.d],styles:[".itemQTY[_ngcontent-%COMP%]{font-size:12px;width:70px;padding:0 5px;border:1px solid #e6e6e6;height:24px}.productSearch[_ngcontent-%COMP%]{position:relative}.productSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;border:1px solid #eae9e9;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}.productSearch[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;color:#b5b5b5}.input-error[_ngcontent-%COMP%]{color:#ff4500;font-size:13px}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.AddProductTable[_ngcontent-%COMP%]{padding:0;margin:0}.AddProductTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.AddProductTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:7px;padding-top:7px}.ProListDiv[_ngcontent-%COMP%]{padding:0;display:table}.ProListDiv[_ngcontent-%COMP%]   .PR_Name[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;font-size:14px;letter-spacing:1px;line-height:16px}.ProListDiv[_ngcontent-%COMP%]   .PrList_img[_ngcontent-%COMP%]{width:35px;height:35px;margin-right:8px;border:1px solid #e0e0e0}.AddProductTable[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:5px 8px;font-size:13px;border-radius:0;-khtml-border-radius:0;background:linear-gradient(90deg,#1e54d3,#0038ba);color:#fff;text-align:center;margin:0;line-height:1;min-width:74px;letter-spacing:1px;float:right;border:none!important}.AddDetailPR[_ngcontent-%COMP%]{padding:25px;font-size:14px}.AddDetailPR[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:32px;border:1px solid #dedede;box-shadow:none;padding:0 10px;font-size:13px;letter-spacing:1px}.AddDetailPR[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:0;padding:0 10px;height:32px;border:1px solid #dedede;font-size:14px}.dis-pr-list[_ngcontent-%COMP%]   .ProListDiv[_ngcontent-%COMP%]{padding:0;display:table}.dis-pr-list[_ngcontent-%COMP%]   .ProListDiv[_ngcontent-%COMP%]   .PR_Name[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;font-size:12px;letter-spacing:1px;line-height:normal}.dis-pr-list[_ngcontent-%COMP%]   .ProListDiv[_ngcontent-%COMP%]   .PrList_img[_ngcontent-%COMP%]{width:28px;height:28px;margin-right:8px;border:1px solid #e0e0e0}.se_cus-type[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #eee;background-color:#fff}input[type=date][_ngcontent-%COMP%]{color:transparent}.focused[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{color:#212121}.action-ord[_ngcontent-%COMP%]{background-color:#f6f6f6;padding:10px;margin-top:15px;text-align:center;margin-bottom:1px}.dis-pr-list[_ngcontent-%COMP%]   .dataTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .dis-pr-list[_ngcontent-%COMP%]   .dataTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px}.dis-pr-list[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background:linear-gradient(0deg,#f6f6f6,#f6f6f6);font-size:14px}.dis-pr-list[_ngcontent-%COMP%]   .custom-select-sm[_ngcontent-%COMP%]{color:#212121;height:24px;border-radius:0;font-size:12px;line-height:1;min-width:90px;padding:0 5px;background-color:#fff;border-color:#e6e6e6}.add_button[_ngcontent-%COMP%]{right:15px!important;top:30px!important;box-shadow:none}.nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.loader[_ngcontent-%COMP%]{text-align:center;padding:30px}.loading[_ngcontent-%COMP%]{color:#b5b5b5;font-size:24px;margin:0 auto}"]}),t})()},{path:"stock",pathMatch:"full",component:(()=>{class t{constructor(t,e){this.inventoryService=t,this.toasterService=e,this.dtOptions={},this.productsStock=[],this.stockHistory=[]}ngOnInit(){this.historyFilter="monthly",this.dtOptions={pagingType:"simple_numbers"},this.getProductsWithStock()}getProductsWithStock(){this.loading=!0,this.inventoryService.getProductsWithStock().subscribe(t=>{this.loading=!1,200===t.status&&(this.productsStock=t.data)},t=>{this.loading=!1,1!==t.status&&401!==t.status&&this.toasterService.showToaster({title:"Error:",message:"Something went wrong while getting stock please try again!",type:"error"})})}getHistory(t,e){e.stopPropagation(),this.selectedProductId=t,this.showHistory=!0,this.historyDateFrom=(new Date).toISOString().split("T")[0],this.getStockHistory(),document.getElementById("open-history").click()}dateChanged(){this.resetTimer(),(("monthly"===this.historyFilter||"daily"===this.historyFilter)&&this.historyDateFrom||"range"===this.historyFilter&&this.historyDateFrom&&this.historyDateTo)&&this.getStockHistory()}getStockHistory(){if(!this.timer){let t={};this.stockHistory=null,this.historyLoading=!0,t="monthly"===this.historyFilter?{month:new Date(this.historyDateFrom).getMonth()+1,year:new Date(this.historyDateFrom).getFullYear()}:"daily"===this.historyFilter?{date:this.historyDateFrom}:{from:this.historyDateFrom,to:this.historyDateTo},this.timer=setTimeout(()=>{this.inventoryService.getProductStockHistory(this.selectedProductId,this.historyFilter,t).subscribe(t=>{this.historyLoading=!1,200===t.status&&(this.stockHistory=t.data.history),this.resetTimer()},t=>{this.historyLoading=!1,this.resetTimer(),1!==t.status&&401!==t.status&&this.toasterService.showToaster({title:"Error:",message:"Something went wrong while getting stock history please try again!",type:"error"})})},2e3)}}resetTimer(){clearTimeout(this.timer),this.timer=void 0}clickOutSide(t){t.target.className.includes("paginate_button")||this.closeHistory()}closePopup(){document.getElementById("close-history-btn").click()}closeHistory(){this.showHistory&&(this.showHistory=!1,this.historyFilter="monthly",this.historyDateTo="",this.historyDateFrom="")}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(g),d.Jb(F.a))},t.\u0275cmp=d.Db({type:t,selectors:[["app-distributor-stock"]],decls:70,vars:8,consts:[["id","historyModal","tabindex","-1","role","dialog","aria-labelledby","historyModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-lg",3,"clickOutside"],[1,"modal-content","top_border"],[1,"modal-header"],["id","historyModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","m-0","mb-10"],[1,"col-4"],[1,"gary-box"],["name","filter","id","filter",1,"form-control",3,"ngModel","ngModelChange","change"],["value","monthly"],["value","daily"],["value","range"],["type","date","name","date-from","id","date-from","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["class","col-4",4,"ngIf"],[1,"row"],[1,"col-12"],["class","table table-hover dt-responsive nowrap","datatable","","id","history-table","style","width:100%",3,"dtOptions",4,"ngIf"],[1,"col-md-12",2,"text-align","center","padding","30px"],["class","spinner-border","style","width: 5rem; height: 5rem;color: #0038ba","role","status",4,"ngIf"],[1,"modal-footer","border-0",2,"background-color","#f6f6f6"],["type","submit","id","close-history-btn","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel",3,"click"],[1,"container"],[1,"row","mt-2","mb-3"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],[1,"col-md-12"],[1,"card"],[1,"col-12","p-0"],[1,"topstats"],[1,"row","m-0"],[1,"body"],["id","stock-table","datatable","","class","table table-hover dt-responsive nowrap","style","width:100%",3,"dtOptions",4,"ngIf"],[4,"ngIf"],["hidden","","id","open-history","data-toggle","modal","data-target","#historyModal"],["type","date","name","date-to","id","date-to","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["datatable","","id","history-table",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[4,"ngFor","ngForOf"],["class","btn btn-default mb-0",3,"routerLink","click",4,"ngIf"],[1,"btn","btn-default","mb-0",3,"routerLink","click"],["role","status",1,"spinner-border",2,"width","5rem","height","5rem","color","#0038ba"],[1,"sr-only"],["id","stock-table","datatable","",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[1,"btn","btn-default","mb-0",3,"click"]],template:function(t,e){1&t&&(d.Pb(0,"div",0),d.Pb(1,"div",1),d.Wb("clickOutside",(function(t){return e.clickOutSide(t)})),d.Pb(2,"div",2),d.Pb(3,"div",3),d.Pb(4,"h5",4),d.vc(5,"History List"),d.Kb(6,"span"),d.Ob(),d.Pb(7,"button",5),d.Wb("click",(function(){return e.closeHistory()})),d.Pb(8,"span",6),d.vc(9,"\xd7"),d.Ob(),d.Ob(),d.Ob(),d.Pb(10,"div",7),d.Pb(11,"div",8),d.Pb(12,"div",9),d.Pb(13,"div",10),d.Pb(14,"strong"),d.vc(15,"Filter:"),d.Ob(),d.Pb(16,"select",11),d.Wb("ngModelChange",(function(t){return e.historyFilter=t}))("change",(function(){return e.dateChanged()})),d.Pb(17,"option",12),d.vc(18,"Monthly"),d.Ob(),d.Pb(19,"option",13),d.vc(20,"Daily"),d.Ob(),d.Pb(21,"option",14),d.vc(22,"Date Range"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(23,"div",9),d.Pb(24,"div",10),d.Pb(25,"strong"),d.vc(26,"From:"),d.Ob(),d.Pb(27,"input",15),d.Wb("ngModelChange",(function(t){return e.historyDateFrom=t}))("change",(function(){return e.dateChanged()})),d.Ob(),d.Ob(),d.Ob(),d.tc(28,et,5,1,"div",16),d.Ob(),d.Pb(29,"div",17),d.Pb(30,"div",18),d.tc(31,rt,17,2,"table",19),d.Pb(32,"div",20),d.tc(33,ct,3,0,"div",21),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(34,"div",22),d.Pb(35,"button",23),d.Wb("click",(function(){return e.closeHistory()})),d.vc(36,"Close"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(37,"div",24),d.Pb(38,"div",25),d.Pb(39,"div",26),d.Pb(40,"h2",27),d.vc(41,"Stock "),d.Pb(42,"span"),d.vc(43," Report"),d.Ob(),d.Ob(),d.Ob(),d.Pb(44,"div",26),d.Pb(45,"ol",28),d.Pb(46,"li"),d.Pb(47,"a"),d.Pb(48,"span"),d.vc(49,"Stock Management"),d.Ob(),d.Ob(),d.Ob(),d.Pb(50,"li"),d.Pb(51,"span"),d.vc(52,"Stock Report"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(53,"div",17),d.Pb(54,"div",29),d.Pb(55,"div",30),d.Pb(56,"div",31),d.Pb(57,"div",32),d.Pb(58,"div",33),d.Pb(59,"div",9),d.Pb(60,"div",10),d.Pb(61,"strong"),d.vc(62,"Total Products:"),d.Ob(),d.Pb(63,"span"),d.vc(64),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(65,"div",34),d.tc(66,dt,17,2,"table",35),d.tc(67,bt,2,0,"div",36),d.Pb(68,"button",37),d.vc(69," Open History "),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&t&&(d.yb(16),d.ec("ngModel",e.historyFilter),d.yb(11),d.ec("ngModel",e.historyDateFrom),d.yb(1),d.ec("ngIf","range"===e.historyFilter),d.yb(3),d.ec("ngIf",e.stockHistory&&!e.historyLoading),d.yb(2),d.ec("ngIf",e.historyLoading),d.yb(31),d.wc(null==e.productsStock?null:e.productsStock.length),d.yb(2),d.ec("ngIf",e.productsStock&&e.productsStock.length&&!e.loading),d.yb(1),d.ec("ngIf",e.loading))},directives:[r.a,o.n,o.e,o.h,o.i,o.o,o.b,o.m,i.k,c.a,i.j,a.g,h.a],pipes:[i.d],styles:[".Product-IMG[_ngcontent-%COMP%]{display:inline}.Product-IMG[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid #e2e2e2;margin-right:15px}._PR_filter[_ngcontent-%COMP%]{margin-top:-2px;width:300px!important;float:left}._PR_filter[_ngcontent-%COMP%]   .form-s2[_ngcontent-%COMP%]   .select2-container--default[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]   .select2-selection__rendered[_ngcontent-%COMP%]{line-height:30px!important;font-family:proximanova-light,sans-serif!important;font-size:13px!important}._PR_filter[_ngcontent-%COMP%]   .form-s2[_ngcontent-%COMP%]   .select2-container--default[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]   .select2-selection__arrow[_ngcontent-%COMP%], ._PR_filter[_ngcontent-%COMP%]   .form-s2[_ngcontent-%COMP%]   .select2-container[_ngcontent-%COMP%]   .select2-selection--single[_ngcontent-%COMP%]{height:31px!important}.addPR-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;padding-right:10px;line-height:2;margin:0}.topstats[_ngcontent-%COMP%]{margin-top:15px;font-size:14px}.topstats[_ngcontent-%COMP%]   .gary-box[_ngcontent-%COMP%]{line-height:1;background-color:#f9f9f9;border-bottom:1px solid #d1d1d1;padding:10px;letter-spacing:1px}.topstats[_ngcontent-%COMP%]   .gary-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Rationale,sans-serif;color:#0038ba;font-size:22px;float:right;margin-top:-4px}.btn-generate[_ngcontent-%COMP%]{float:right;font-size:13px;padding:5px 14px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:capitalize}.show[_ngcontent-%COMP%]{display:block}"]}),t})()},{path:"add-stock",pathMatch:"full",component:(()=>{class t{constructor(t,e,n,i,o){this.router=t,this.inventoryService=e,this.generalDataService=n,this.dataService=i,this.toastService=o,this.dtOptions={},this.products=[],this.dispProducts=[],this.categories=[],this.brands=[],this.stock=[],this.units=[],this.dtOptions={pagingType:"simple_numbers"}}ngOnInit(){this.submitted=!1,this.units=["All Units","Piece","Box","Carton","Dozen","Half Dozen","Strip","12 Pack","18 Pack","Jar"],this.selectedUnit="All Units",this.selectedBrand="all",this.selectedCategory="all",this.getAllProducts(),this.getBrands(),this.getCategories()}getAllProducts(){this.loading=!0,this.generalDataService.getProductsWithPrefType("secondary").subscribe(t=>{this.loading=!1,200===t.status&&(this.products=t.data,this.dispProducts=JSON.parse(JSON.stringify(this.products)))},t=>{this.loading=!1,1!==t.status&&401!==t.status&&this.toastService.showToaster({title:"Error:",message:"Something went wrong while fetching products!",type:"error"})})}isNumber(t){return this.dataService.isNumber(t,"quantity")}getBrands(){this.inventoryService.getBrnads().subscribe(t=>{this.brands=t.data},t=>{console.log("Error while getting brands",t)})}getCategories(){this.inventoryService.getCategories().subscribe(t=>{this.categories=t.data},t=>{console.log("Error while getting brands",t)})}filterProducts(){this.loading=!0;const t=[];if("all"!==this.selectedBrand&&t.push(t=>t.brand_name.toLowerCase()===this.selectedBrand.toLowerCase()),"All Units"!==this.selectedUnit&&t.push(t=>t.unit_name.toLowerCase()===this.selectedUnit.toLowerCase()),"all"!==this.selectedCategory&&t.push(t=>t.sub_cat.toLowerCase()===this.selectedCategory.toLowerCase()),t.length){const e=this.products.filter(e=>t.every(t=>t(e)));this.dispProducts=JSON.parse(JSON.stringify(e))}else this.dispProducts=JSON.parse(JSON.stringify(this.products));setTimeout(()=>{this.loading=!1},1e3)}addProduct(t){t.isAdded=!0;const{pref_id:e,unit_id:n,item_id:i,unit_name:o,item_name:r}=t;this.stock.push({pref_id:e,unit_id:n,item_id:i,unit_name:o,item_name:r,quantity:t.stockQty})}removeProduct(t){t.isAdded=!1,this.stock=this.stock.filter(e=>e.item_id!==t.item_id)}addOpeningStock(){this.stock.length?(this.submitted=!0,this.inventoryService.addDistributorOpeningStock(this.stock).subscribe(t=>{this.submitted=!1,200===t.status?(this.toastService.showToaster({title:"Stock Added",message:"Opening Stock added successfully!",type:"success"}),this.router.navigateByUrl("/retailer/opening-balance")):208===t.status&&this.toastService.showToaster({title:"Error:",message:"Your stock already added. If you want to add more stock go to Distributor Purchase!",type:"error"})},t=>{this.submitted=!1,1!==t.status&&401!==t.status&&this.toastService.showToaster({title:"Error:",message:"Something went wrong while adding stock!",type:"error"})})):this.toastService.showToaster({title:"Error:",message:"Please select product with quantity to add in stock!",type:"error"})}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(a.f),d.Jb(g),d.Jb(A.b),d.Jb(A.a),d.Jb(F.a))},t.\u0275cmp=d.Db({type:t,selectors:[["app-add-stock"]],decls:34,vars:14,consts:[[1,"container","mw-1280"],[1,"row"],[1,"col-md-12","mb-30"],[1,"card","PB-20"],[1,"col-12","p-0"],[1,"header","addPR-head","mb-10"],[1,"_PR_filter","pr-15"],[1,"form-s2"],["id","unit","name","units",1,"formselect",3,"multiple","ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","brand","name","brands",1,"formselect",3,"multiple","ngModel","change","ngModelChange"],["value","all"],["id","category","name","cateogires",1,"formselect",3,"multiple","ngModel","change","ngModelChange"],[1,"col-12","retailerTable"],["datatable","","class","table table-hover dt-responsive nowrap","id","example","style","width:100%",3,"dtOptions",4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],[1,"action-ord"],["type","submit","class","btn btn-primary mr-2","disabled","",4,"ngIf"],["type","submit","class","btn btn-primary mr-2",3,"click",4,"ngIf"],["class","btn btn-cancel",3,"routerLink",4,"ngIf"],[3,"value"],["datatable","","id","example",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[2,"min-width","240px"],[4,"ngFor","ngForOf"],["alt","",3,"src"],["type","number","min","0","placeholder","0","required","","name","qty",1,"form-control","add-stock-input",3,"ngModel","keydown","ngModelChange"],[4,"ngIf"],[1,"btn","btn-default","btn-line","mb-0",3,"disabled","click"],[1,"btn","btn-default","red-bg","btn-line","mb-0",3,"click"],["type","submit","disabled","",1,"btn","btn-primary","mr-2"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary","mr-2",3,"click"],[1,"btn","btn-cancel",3,"routerLink"]],template:function(t,e){1&t&&(d.Pb(0,"div",0),d.Pb(1,"div",1),d.Pb(2,"div",2),d.Pb(3,"div",3),d.Pb(4,"div",4),d.Pb(5,"div",5),d.Pb(6,"h2"),d.vc(7,"Add "),d.Pb(8,"span"),d.vc(9," Stock"),d.Ob(),d.Ob(),d.Pb(10,"div",6),d.Pb(11,"div",7),d.Pb(12,"ng-select",8),d.Wb("change",(function(){return e.filterProducts()}))("ngModelChange",(function(t){return e.selectedUnit=t})),d.tc(13,lt,2,2,"ng-option",9),d.Ob(),d.Ob(),d.Ob(),d.Pb(14,"div",6),d.Pb(15,"div",7),d.Pb(16,"ng-select",10),d.Wb("change",(function(){return e.filterProducts()}))("ngModelChange",(function(t){return e.selectedBrand=t})),d.Pb(17,"ng-option",11),d.vc(18,"All Brands"),d.Ob(),d.tc(19,ut,2,2,"ng-option",9),d.Ob(),d.Ob(),d.Ob(),d.Pb(20,"div",6),d.Pb(21,"div",7),d.Pb(22,"ng-select",12),d.Wb("change",(function(){return e.filterProducts()}))("ngModelChange",(function(t){return e.selectedCategory=t})),d.Pb(23,"ng-option",11),d.vc(24," All Categories "),d.Ob(),d.tc(25,gt,2,2,"ng-option",9),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(26,"div",13),d.tc(27,mt,17,2,"table",14),d.tc(28,Ot,2,0,"div",15),d.Ob(),d.Ob(),d.Pb(29,"div",16),d.Pb(30,"div",17),d.tc(31,ft,4,0,"button",18),d.tc(32,vt,2,0,"button",19),d.tc(33,_t,2,2,"button",20),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&t&&(d.yb(12),d.ec("multiple",!1)("ngModel",e.selectedUnit),d.yb(1),d.ec("ngForOf",e.units),d.yb(3),d.ec("multiple",!1)("ngModel",e.selectedBrand),d.yb(3),d.ec("ngForOf",e.brands),d.yb(3),d.ec("multiple",!1)("ngModel",e.selectedCategory),d.yb(3),d.ec("ngForOf",e.categories),d.yb(2),d.ec("ngIf",!e.loading),d.yb(1),d.ec("ngIf",e.loading),d.yb(3),d.ec("ngIf",e.submitted),d.yb(1),d.ec("ngIf",!e.submitted),d.yb(1),d.ec("ngIf",!e.submitted))},directives:[s.a,o.e,o.h,i.j,s.c,i.k,c.a,o.j,o.b,o.m,h.a,a.g],styles:["._PR_filter{margin-top:-4px;width:210px!important}._PR_filter .form-s2 .ng-select{padding:0!important;height:30px!important}._PR_filter .form-s2 .ng-select .ng-select-container div.ng-input{top:0!important}._PR_filter .form-s2 .ng-select .ng-select-container{line-height:28px!important;font-family:proximanova-light,sans-serif!important;font-size:13px!important}._PR_filter .form-s2 .ng-select .ng-arrow-wrapper,._PR_filter .form-s2 .ng-select .ng-select-container{height:31px!important;min-height:31px!important}._PR_filter .form-s2 .ng-select .ng-select-container{border-radius:0!important}._PR_filter .form-s2 .ng-select .ng-clear-wrapper{display:none!important}.mw-1280{max-width:1280px}.add-stock-input{font-size:13px;width:80px;height:25px;box-shadow:none;border-color:#ddd;padding:0 5px 0 8px}.retailerTable .dataTable td,.retailerTable .dataTable th{vertical-align:middle}.CP-name,.CP-name span{letter-spacing:1px}.CP-name span{display:block;margin-top:4px}.ProList-div .Pr_imgV{border-radius:50%}.ProList-div .table img{margin-top:-2px;margin-bottom:-2px;margin-left:4px}._selectProList .header .add_button{padding:4px 8px 3px;right:15px}.action-ord{background-color:#f6f6f6;padding:10px;margin-top:15px;text-align:center}.dataTable .red-bg{color:#fff!important;border-color:#f12300!important}.w-auto{width:200px!important;text-align:right}.btn-bulk{font-size:12px;padding:5px 16px;box-shadow:none}.btn-bulk i{margin-right:5px}._PR_filter{width:245px;float:right;padding-right:0}._PR_filter .custom-select-sm{border-radius:0;border:1px solid #eae9e9}._PR_filter .select2-container .select2-selection--single{background-color:#fff;border-color:#e4e4e4;font-size:14px;border-radius:0}.ProList-div .table img,.retailerTable .table img{width:35px;height:35px;border:1px solid #e0e0e0;margin-top:-5px;margin-bottom:-5px;margin-right:5px;float:left}.retailerTable .table td,.table th{padding:8px}.retailerTable .custom-select-tab{border-radius:0;height:22px;padding:0 5px;font-size:12px;border:none}.retailerTable .table thead th{border-bottom:1px solid #0038ba!important}.table thead th{border:none!important;background-color:#f6f6f6}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}"],encapsulation:2}),t})()}]}];let Mt=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(Ct)],a.i]}),t})();var xt=n("FpXt");let wt=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},providers:[g],imports:[[i.b,o.c,r.b,c.b,s.b,Mt,xt.a]]}),t})()}}]);