(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{fAJX:function(e,t,i){"use strict";i.r(t),i.d(t,"OrderModule",(function(){return oo}));var r=i("ofXK"),o=i("3Pt+"),a=i("tyNb"),n=i("fXoL");let d=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Db({type:e,selectors:[["app-orders-component"]],decls:1,vars:0,template:function(e,t){1&e&&n.Kb(0,"router-outlet")},directives:[a.j],styles:[""]}),e})();var s=i("NJqk"),c=i("5TcN"),l=i("ZgVV"),b=i("ZOsW"),u=i("njyG"),p=i("uoBr");function h(e,t){if(1&e&&(n.Pb(0,"ng-option",69),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.id),n.yb(1),n.xc(" ",e.name," ")}}function m(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.Pb(2,"div",70),n.Kb(3,"input",71),n.Kb(4,"label",72),n.Ob(),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Ob(),n.Pb(7,"td"),n.vc(8),n.Ob(),n.Pb(9,"td"),n.vc(10),n.Zb(11,"number"),n.Ob(),n.Pb(12,"td"),n.Pb(13,"button",73),n.Wb("click",(function(){n.oc(e);const i=t.$implicit,r=n.Yb();return r.showDetailsPopup=!0,r.openDetailsModal(i)})),n.vc(14,"Detail"),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=t.index;n.yb(3),n.ec("id",i),n.yb(1),n.ec("for",i),n.yb(2),n.wc(e.emp_name),n.yb(2),n.wc(e.retailer_name),n.yb(2),n.wc(n.bc(11,5,e.order_total,"1.2-2"))}}function g(e,t){if(1&e&&(n.Pb(0,"ng-option",69),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.id),n.yb(1),n.xc(" ",e.name," ")}}function O(e,t){if(1&e&&(n.Pb(0,"ng-option",69),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e),n.yb(1),n.wc(e.name)}}const v=function(e,t){return["/orders/order-list-details",e,t]};function _(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Ob(),n.Pb(7,"td"),n.Pb(8,"ng-select",75),n.Wb("change",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).addOrderToAssignment(i)}))("ngModelChange",(function(i){return n.oc(e),t.$implicit.selectedSaleman=i})),n.tc(9,O,2,2,"ng-option",53),n.Ob(),n.Ob(),n.Pb(10,"td"),n.Pb(11,"a",76),n.vc(12,"View Orders"),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=t.index,r=n.Yb(2);n.yb(2),n.wc(e.date),n.yb(2),n.wc(e.emp_name),n.yb(2),n.wc(e.total_orders),n.yb(2),n.gc("name","select-saleman-",i,""),n.gc("id","select-saleman-",i,""),n.ec("multiple",!1)("ngModel",e.selectedSaleman),n.yb(1),n.ec("ngForOf",r.salesMen),n.yb(2),n.ec("routerLink",n.jc(9,v,e.employee_id,e.date))}}function P(e,t){if(1&e&&(n.Pb(0,"table",74),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th"),n.vc(4,"Date"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Order Booker"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Total Orders"),n.Ob(),n.Pb(9,"th"),n.vc(10,"Assign To Salesman"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(13,"tbody"),n.tc(14,_,13,12,"tr",57),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.ec("dtOptions",e.dtOptions),n.yb(14),n.ec("ngForOf",e.orders)}}function f(e,t){1&e&&(n.Pb(0,"div",42),n.Kb(1,"app-loader-white"),n.Ob())}function y(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",58),n.Pb(1,"div",59),n.Pb(2,"div",62),n.Pb(3,"button",77),n.Wb("click",(function(){return n.oc(e),n.Yb().assignSaleman()})),n.vc(4),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.yb(3),n.ec("disabled",0===e.selectedOrders.length),n.yb(1),n.wc(0===e.selectedOrders.length?"Select Salesman":"Assign Salesman")}}let x=(()=>{class e{constructor(e,t,i){this.generalDataService=e,this.ordersService=t,this.toastService=i,this.orderBookers=[],this.salesMen=[],this.orders=[],this.dtOptions={},this.selectedOrders=[]}ngOnInit(){this.byOrderBooker=!0,this.dtOptions={pagingType:"simple_numbers"},this.getAllSalesMen(),this.getNewOrders()}getAllSalesMen(){this.generalDataService.getAllSalesMen().subscribe(e=>{200===e.status&&(this.salesMen=e.data)},e=>{401!==e.status&&1!==e.status&&this.toastService.showToaster({title:"Error:",message:"Salesmen not fetched, try again later.",type:"error"})})}getNewOrders(){this.loading=!0,this.ordersService.getNewOrders().subscribe(e=>{this.loading=!1,200===e.status&&(this.orders=e.data)},e=>{this.loading=!1,401!==e.status&&1!==e.status&&this.toastService.showToaster({title:"Error:",message:"New Orders not fetched, try again later.",type:"error"}),scrollTo(0,0)})}addOrderToAssignment(e){this.selectedOrders=this.selectedOrders.filter(t=>t.id!==e.id),this.selectedOrders.push({sales_man:e.selectedSaleman.id,employee_id:e.employee_id,id:e.id,date:e.date})}assignSaleman(){if(this.selectedOrders.length){const e={salesman:this.selectedOrders.map(e=>{const{sales_man:t,employee_id:i,date:r}=e;return{sales_man:t,employee_id:i,date:r}})};this.loading=!0,this.ordersService.assignSalesMan(e).subscribe(e=>{e.status&&(this.toastService.showToaster({title:"Salesman Assigned:",message:"Salesmen assigned to selected order.",type:"success"}),this.selectedOrders.forEach(e=>{this.orders=this.orders.filter(t=>t.id!==e.id)}),this.loading=!1,this.selectedOrders=[])},e=>{this.loading=!1,401!==e.status&&1!==e.status&&this.toastService.showToaster({title:"Error:",message:"Salesmen assignment is not working at the moment, try again later.",type:"error"}),scrollTo(0,0)})}else this.toastService.showToaster({title:"Error:",message:"Please select saleman to assign orders!",type:"error"})}openDetailsModal(e){document.body.classList.add("no-scroll")}closeDetailsModal(){document.body.classList.remove("no-scroll")}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(s.b),n.Jb(c.a),n.Jb(l.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-orders-list"]],decls:284,vars:14,consts:[["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"ngClass"],["role","document",1,"modal-dialog","modal-full","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","border-0"],["type","button","aria-label","Close",1,"close",2,"font-size","30px","outline","none",3,"click"],[1,"modal-body","p-0"],[1,"container"],[1,"row"],[1,"col-12"],[1,"card"],[1,"p-10",2,"border-bottom","solid 2px #000"],[1,"row","m-0"],[1,"col-8","OrderLogo"],["src","assets/images/sell-360.svg","alt",""],[1,"col-4","ord-no"],[1,"body",2,"padding","15px 20px"],[1,"form-body"],[1,"row","OrderInfo"],[1,"col-md-9"],[1,"col-md-3","p-0"],[1,"seprator-block"],[1,"Order-Detail-table","mt-30"],[1,"table"],[1,"order_items_body"],[1,"border-0"],[2,"background-color","#000","color","#fff"],[1,"clearfix"],[1,"modal-footer","button-list"],["type","button",1,"btn","btn-primary","btn-outline"],[1,"fa","fa-file-pdf"],[1,"fa","fa-envelope"],[1,"fa","fa-print"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],["routerLink","/orders"],[1,"col-lg-12"],[1,"header-tabs","mb-0",2,"min-height","47px"],[1,"col-auto"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","ProcessedOrder-tab","data-toggle","tab","role","tab","aria-controls","ProcessedOrder","aria-selected","false",1,"nav-item","nav-link",3,"ngClass","click"],[1,"col-md-12"],["id","nav-tabContent",1,"tab-content"],["id","NewOrder","role","tabpanel","aria-labelledby","NewOrder-tab",1,"tab-pane","fade",3,"ngClass"],[1,"Product-Filter","border-0"],[1,"col-auto","pr-0"],[1,"CL-Product",2,"width","180px!important"],["type","text","id","datepicker","placeholder","Select Date",1,"form-control","pl-15"],[1,"col","pl-0"],[1,"_cust_filter"],[1,"form-s2"],["placeholder","Select Order Booker","name","order-booker","id","order-booker",1,"form-control","formselect",2,"width","100%!important",3,"multiple","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"card","p-15"],[1,"col-12","p-0",2,"min-height","360px"],["datatable","","id","example",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[4,"ngFor","ngForOf"],[1,"col-12","bottom-gray"],[1,"row","justify-content-end"],[1,"_cust_filter","m-0"],["placeholder","Select Salesman","name","select-saleman","id","select-saleman",1,"form-control","formselect",2,"width","100%!important",3,"ngModel","ngModelChange"],[1,"col-auto","pl-0"],["type","submit",1,"btn","btn-primary"],["id","ProcessedOrder","role","tabpanel","aria-labelledby","ProcessedOrder-tab",1,"tab-pane","fade",3,"ngClass"],[1,"card","p-15","mt-15"],["datatable","","class","table table-hover dt-responsive nowrap","id","example2","style","width:100%",3,"dtOptions",4,"ngIf"],["class","col-md-12",4,"ngIf"],["class","col-12 bottom-gray",4,"ngIf"],[3,"value"],[1,"custom-control","custom-checkbox","cus-che-table"],["type","checkbox","name","","value","",1,"custom-control-input",3,"id"],[1,"custom-control-label",3,"for"],[1,"btn","btn-default","btn-line","mb-0",3,"click"],["datatable","","id","example2",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],["placeholder","Select Salesman",1,"formselect",2,"width","95%!important",3,"name","multiple","ngModel","id","change","ngModelChange"],[1,"btn","btn-default","btn-line","mb-0",3,"routerLink"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"button",4),n.Wb("click",(function(){return t.showDetailsPopup=!1,t.closeDetailsModal()})),n.vc(5,"\xd7"),n.Ob(),n.Ob(),n.Pb(6,"div",5),n.Pb(7,"div",6),n.Pb(8,"div",7),n.Pb(9,"div",8),n.Pb(10,"div",9),n.Pb(11,"div",10),n.Pb(12,"div",11),n.Pb(13,"div",12),n.Kb(14,"img",13),n.Ob(),n.Pb(15,"div",14),n.vc(16," Order # "),n.Pb(17,"strong"),n.vc(18,"05485"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(19,"div",15),n.Pb(20,"div",7),n.Pb(21,"div",8),n.Pb(22,"div",16),n.Pb(23,"div",17),n.Pb(24,"div",18),n.Pb(25,"span"),n.vc(26,"Retailer Name: "),n.Ob(),n.Pb(27,"strong"),n.vc(28,"Chohan Store Township"),n.Ob(),n.Kb(29,"br"),n.Pb(30,"span"),n.vc(31,"Phone No: "),n.Ob(),n.Pb(32,"strong"),n.vc(33,"02222222221"),n.Ob(),n.Kb(34,"br"),n.Pb(35,"span"),n.vc(36,"Location: "),n.Ob(),n.Pb(37,"strong"),n.vc(38,"Madina Market Township, Lahore"),n.Ob(),n.Ob(),n.Pb(39,"div",19),n.Pb(40,"span"),n.vc(41,"Status: "),n.Ob(),n.Pb(42,"strong"),n.vc(43,"Awaiting"),n.Ob(),n.Kb(44,"br"),n.Pb(45,"span"),n.vc(46,"Booking Date: "),n.Ob(),n.Pb(47,"strong"),n.vc(48,"12/04/2020"),n.Ob(),n.Kb(49,"br"),n.Pb(50,"span"),n.vc(51,"Employee: "),n.Ob(),n.Pb(52,"strong"),n.vc(53,"Asad Ali"),n.Ob(),n.Ob(),n.Ob(),n.Kb(54,"div",20),n.Pb(55,"div",21),n.Pb(56,"table",22),n.Pb(57,"thead"),n.Pb(58,"tr"),n.Pb(59,"th"),n.Pb(60,"strong"),n.vc(61,"Code"),n.Ob(),n.Ob(),n.Pb(62,"th"),n.Pb(63,"strong"),n.vc(64,"Product Name"),n.Ob(),n.Ob(),n.Pb(65,"th"),n.Pb(66,"strong"),n.vc(67,"CTN"),n.Ob(),n.Ob(),n.Pb(68,"th"),n.Pb(69,"strong"),n.vc(70,"BOX/PCS"),n.Ob(),n.Ob(),n.Pb(71,"th"),n.Pb(72,"strong"),n.vc(73,"T.P"),n.Ob(),n.Ob(),n.Pb(74,"th"),n.Pb(75,"strong"),n.vc(76,"GR Amt"),n.Ob(),n.Ob(),n.Pb(77,"th"),n.Pb(78,"strong"),n.vc(79,"T.O"),n.Ob(),n.Ob(),n.Pb(80,"th"),n.Pb(81,"strong"),n.vc(82,"T.Disc"),n.Ob(),n.Ob(),n.Pb(83,"th"),n.Pb(84,"strong"),n.vc(85,"SPC.Disc"),n.Ob(),n.Ob(),n.Pb(86,"th"),n.Pb(87,"strong"),n.vc(88,"Net.Amt"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(89,"tbody",23),n.Pb(90,"tr"),n.Pb(91,"td"),n.vc(92,"5261"),n.Ob(),n.Pb(93,"td"),n.vc(94,"AasPas R5 (Chocolate BTNT) (24x36)"),n.Ob(),n.Pb(95,"td"),n.vc(96,"0"),n.Ob(),n.Pb(97,"td"),n.vc(98,"1"),n.Ob(),n.Pb(99,"td"),n.vc(100,"103.25"),n.Ob(),n.Pb(101,"td"),n.vc(102,"103.25"),n.Ob(),n.Pb(103,"td"),n.vc(104,"0"),n.Ob(),n.Pb(105,"td"),n.vc(106,"3%"),n.Ob(),n.Pb(107,"td"),n.vc(108,"0"),n.Ob(),n.Pb(109,"td"),n.vc(110,"100.00"),n.Ob(),n.Ob(),n.Pb(111,"tr"),n.Pb(112,"td"),n.vc(113,"5259"),n.Ob(),n.Pb(114,"td"),n.vc(115,"AasPas Rs2 (chocolate WO BTNT)"),n.Ob(),n.Pb(116,"td"),n.vc(117,"0"),n.Ob(),n.Pb(118,"td"),n.vc(119,"1"),n.Ob(),n.Pb(120,"td"),n.vc(121,"82.61"),n.Ob(),n.Pb(122,"td"),n.vc(123,"82.61"),n.Ob(),n.Pb(124,"td"),n.vc(125,"0"),n.Ob(),n.Pb(126,"td"),n.vc(127,"3%"),n.Ob(),n.Pb(128,"td"),n.vc(129,"5"),n.Ob(),n.Pb(130,"td"),n.vc(131,"75.00"),n.Ob(),n.Ob(),n.Pb(132,"tr"),n.Pb(133,"td"),n.vc(134,"5258"),n.Ob(),n.Pb(135,"td"),n.vc(136,"AasPas Rs5 (Sweet Sonf) (24x24)"),n.Ob(),n.Pb(137,"td"),n.vc(138,"0"),n.Ob(),n.Pb(139,"td"),n.vc(140,"9"),n.Ob(),n.Pb(141,"td"),n.vc(142,"103.26"),n.Ob(),n.Pb(143,"td"),n.vc(144,"929.34"),n.Ob(),n.Pb(145,"td"),n.vc(146,"0"),n.Ob(),n.Pb(147,"td"),n.vc(148,"3%"),n.Ob(),n.Pb(149,"td"),n.vc(150,"1"),n.Ob(),n.Pb(151,"td"),n.vc(152,"900.02"),n.Ob(),n.Ob(),n.Pb(153,"tr"),n.Kb(154,"td",24),n.Kb(155,"td",24),n.Kb(156,"td",24),n.Kb(157,"td",24),n.Kb(158,"td",24),n.Kb(159,"td",24),n.Kb(160,"td",24),n.Kb(161,"td",24),n.Pb(162,"td"),n.Pb(163,"strong"),n.vc(164,"Subtotal PKR."),n.Ob(),n.Ob(),n.Pb(165,"td"),n.Pb(166,"strong"),n.vc(167,"1115.20"),n.Ob(),n.Ob(),n.Ob(),n.Pb(168,"tr"),n.Kb(169,"td",24),n.Kb(170,"td",24),n.Kb(171,"td",24),n.Kb(172,"td",24),n.Kb(173,"td",24),n.Kb(174,"td",24),n.Kb(175,"td",24),n.Kb(176,"td",24),n.Pb(177,"td"),n.Pb(178,"strong"),n.vc(179,"Discount PKR."),n.Ob(),n.Ob(),n.Pb(180,"td"),n.Pb(181,"strong"),n.vc(182,"-40.18"),n.Ob(),n.Ob(),n.Ob(),n.Pb(183,"tr"),n.Kb(184,"td",24),n.Kb(185,"td",24),n.Kb(186,"td",24),n.Kb(187,"td",24),n.Kb(188,"td",24),n.Kb(189,"td",24),n.Kb(190,"td",24),n.Kb(191,"td",24),n.Pb(192,"td",25),n.Pb(193,"strong"),n.vc(194,"Total PKR."),n.Ob(),n.Ob(),n.Pb(195,"td",25),n.Pb(196,"strong"),n.vc(197,"1075.02"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Kb(198,"div",26),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(199,"div",27),n.Pb(200,"button",28),n.Kb(201,"i",29),n.Pb(202,"span"),n.vc(203," Save PDF"),n.Ob(),n.Ob(),n.Pb(204,"button",28),n.Kb(205,"i",30),n.Pb(206,"span"),n.vc(207," Send Email"),n.Ob(),n.Ob(),n.Pb(208,"button",28),n.Kb(209,"i",31),n.Pb(210,"span"),n.vc(211," Print"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(212,"div",6),n.Pb(213,"div",32),n.Pb(214,"div",33),n.Pb(215,"h2",34),n.vc(216,"Orders "),n.Pb(217,"span"),n.vc(218," Management"),n.Ob(),n.Ob(),n.Ob(),n.Pb(219,"div",33),n.Pb(220,"ol",35),n.Pb(221,"li"),n.Pb(222,"a",36),n.Pb(223,"span"),n.vc(224,"Orders"),n.Ob(),n.Ob(),n.Ob(),n.Pb(225,"li"),n.Pb(226,"span"),n.vc(227,"List"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(228,"div",7),n.Pb(229,"div",37),n.Pb(230,"div",38),n.Pb(231,"div",7),n.Pb(232,"div",39),n.Pb(233,"div",40),n.Pb(234,"a",41),n.Wb("click",(function(){return t.byOrderBooker=!0})),n.vc(235,"Assign By Order Booker"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(236,"div",7),n.Pb(237,"div",42),n.Pb(238,"div",43),n.Pb(239,"div",44),n.Pb(240,"div",45),n.Pb(241,"div",7),n.Pb(242,"div",46),n.Pb(243,"div",47),n.Kb(244,"input",48),n.Ob(),n.Ob(),n.Pb(245,"div",49),n.Pb(246,"div",50),n.Pb(247,"div",51),n.Pb(248,"ng-select",52),n.Wb("ngModelChange",(function(e){return t.selectedOrderBooker=e})),n.tc(249,h,2,2,"ng-option",53),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Kb(250,"div",26),n.Ob(),n.Pb(251,"div",54),n.Pb(252,"div",55),n.Pb(253,"table",56),n.Pb(254,"thead"),n.Pb(255,"tr"),n.Pb(256,"th"),n.vc(257," Select "),n.Ob(),n.Pb(258,"th"),n.vc(259,"Retailer"),n.Ob(),n.Pb(260,"th"),n.vc(261,"Channel"),n.Ob(),n.Pb(262,"th"),n.vc(263,"Order Total"),n.Ob(),n.Pb(264,"th"),n.vc(265,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(266,"tbody"),n.tc(267,m,15,8,"tr",57),n.Ob(),n.Ob(),n.Ob(),n.Pb(268,"div",58),n.Pb(269,"div",59),n.Pb(270,"div",46),n.Pb(271,"div",60),n.Pb(272,"div",51),n.Pb(273,"ng-select",61),n.Wb("ngModelChange",(function(e){return t.selectedOrderBooker=e})),n.tc(274,g,2,2,"ng-option",53),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(275,"div",62),n.Pb(276,"button",63),n.vc(277,"Assign Orders"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(278,"div",64),n.Pb(279,"div",65),n.Pb(280,"div",55),n.tc(281,P,15,2,"table",66),n.tc(282,f,2,0,"div",67),n.Ob(),n.tc(283,y,5,2,"div",68),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.ec("ngClass",t.showDetailsPopup?"show active":""),n.yb(234),n.ec("ngClass",!0===t.byOrderBooker?"active":""),n.yb(5),n.ec("ngClass",!1===t.byOrderBooker?"active show":""),n.yb(9),n.ec("multiple",!1)("ngModel",t.selectedOrderBooker),n.yb(1),n.ec("ngForOf",t.orderBookers),n.yb(4),n.ec("dtOptions",t.dtOptions),n.yb(14),n.ec("ngForOf",t.orders),n.yb(6),n.ec("ngModel",t.selectedOrderBooker),n.yb(1),n.ec("ngForOf",t.orderBookers),n.yb(4),n.ec("ngClass",!0===t.byOrderBooker?"active show":""),n.yb(3),n.ec("ngIf",!t.loading),n.yb(1),n.ec("ngIf",t.loading),n.yb(1),n.ec("ngIf",!t.loading))},directives:[r.i,a.h,b.a,o.h,o.k,r.j,u.a,r.k,b.c,p.a],pipes:[r.d],styles:[".OrderLogo{text-align:left;padding-left:0}.OrderLogo img{width:auto;height:46px}._cust_filter{padding-left:0!important;padding-top:0!important}._cust_filter .form-s2 .ng-select{padding:0!important;height:30px!important}._cust_filter .form-s2 .ng-select .ng-select-container{width:100%;font-size:14px;border:none;border-radius:0;min-height:30px!important;height:30px!important}.nav-item{cursor:pointer;text-transform:capitalize!important}.CL-Product{padding-top:0!important;margin-left:0!important}.OrderInfo{font-size:14px}.dataTable .btn-default,.smBTN{color:#fff}.OrderInfo span{width:105px;float:left}.Order-Detail-table table td{border:1px solid #333;padding:5px!important;font-size:12px}.Order-Detail-table table th{border:1px solid #333!important;background-color:#ededed!important;color:#000;padding:5px!important;font-size:12px}.button-list .btn-primary{font-size:14px!important;letter-spacing:1px}.button-list .btn-primary .fa{padding-right:3px}.ord-no{padding-top:17px;font-size:14px;text-align:right}.table .select2-container--default .select2-selection--single{border-radius:0;border-color:#ddd}.select2-container .select2-selection--single,.table .select2-container--default .select2-selection--single .select2-selection__rendered{height:26px}.table .select2-container--default .select2-selection--single .select2-selection__arrow{height:24px}.cus-che-table .custom-control-label:after,.cus-che-table .custom-control-label:before{top:-7px;left:0}.cus-che-table{padding:0;margin:0;width:22px}.btn-primary{padding-top:4px;padding-bottom:4px;letter-spacing:1px}.bottom-gray{background-color:#f6f6f6;padding:10px;margin-top:20px}.active{display:block}#example2 .ng-select .ng-select-container{width:100%;font-size:14px;border-radius:0;min-height:25px!important;height:25px!important}#example2 .ng-select .ng-select-container div.ng-input{top:0!important}.ng-select .ng-clear{display:none!important}.Product-Filter{background-color:#f3f2f2;padding:15px 15px 0;box-shadow:0 0 20px 0 rgba(0,0,0,.2);margin-bottom:15px;border-bottom:2px solid #0038ba}.Product-Filter .nav-link{padding:6px 8px 0;cursor:pointer}.Product-Filter .nav{width:74px;float:right}.Product-Filter .nav .fa{color:#a6a5a5;font-size:20px}.Product-Filter .active .fa{color:#0038ba}.CL-Product{width:230px;position:relative;float:left;padding-right:15px}.CL-Product input{height:32px;border:1px solid #dedede;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}._cust_filter .select2-container .select2-selection--single{background-color:#fff;border-color:#e4e4e4;font-size:14px;border-radius:0;height:32px}._cust_filter .select2-container--default .select2-selection--single .select2-selection__rendered{line-height:32px}.Product-Filter .btn-primary{color:#fff!important;cursor:pointer;margin-left:15px;padding-top:4px;padding-bottom:4px}.CL-Product .fa{position:absolute;top:8px;left:8px;color:#b5b5b5}._cust_filter{width:170px;float:left;margin-bottom:15px}._cust_filter select{border-radius:0;height:32px;border:1px solid #dedede}@media (max-width:1300px){.header-tabs .nav-tabs .nav-item.show .nav-link,.header-tabs .nav-tabs .nav-link,.header-tabs .nav-tabs .nav-link.active{font-size:14px;padding:12px;letter-spacing:.5px}}._cust_filter{width:230px;padding-right:10px}._cust_filter .select2-container .select2-selection--single{height:32px!important}._cust_filter .select2-container--default .select2-selection--single .select2-selection__rendered{line-height:30px}._cust_filter .form-s2 .select2-container--default .select2-selection--single .select2-selection__arrow{height:32px}.CL-Product{padding-right:10px}.Product-Filter .btn-primary{margin:0;letter-spacing:1px;float:left;box-shadow:none}@media (max-width:1170px){.header-tabs .nav-tabs .nav-item.show .nav-link,.header-tabs .nav-tabs .nav-link,.header-tabs .nav-tabs .nav-link.active{padding:12px 10px;letter-spacing:normal}}"],encapsulation:2}),e})();var C=i("nSBS");function S(e,t){if(1&e&&(n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Ob(),n.Pb(7,"td"),n.vc(8),n.Ob(),n.Pb(9,"td"),n.vc(10),n.Ob(),n.Pb(11,"td"),n.vc(12),n.Zb(13,"decimal"),n.Ob(),n.Pb(14,"td"),n.vc(15),n.Zb(16,"number"),n.Ob(),n.Pb(17,"td"),n.vc(18),n.Zb(19,"number"),n.Ob(),n.Pb(20,"td"),n.vc(21),n.Zb(22,"number"),n.Ob(),n.Pb(23,"td"),n.vc(24),n.Zb(25,"number"),n.Ob(),n.Ob()),2&e){const e=t.$implicit;n.yb(2),n.wc(e.item_sku),n.yb(2),n.wc(e.item_name),n.yb(2),n.wc(e.parent_qty),n.yb(2),n.wc(e.child_qty),n.yb(2),n.wc(e.original_price),n.yb(2),n.wc(n.ac(13,10,e.original_price*e.quantity)),n.yb(3),n.wc(n.bc(16,12,e.scheme_discount*e.quantity,"1.2-2")),n.yb(3),n.wc(n.bc(19,15,e.merchant_discount_pkr*e.quantity,"1.2-2")),n.yb(3),n.wc(n.bc(22,18,e.special_discount*e.quantity,"1.2-2")),n.yb(3),n.wc(n.bc(25,21,e.final_price,"1.2-2"))}}function k(e,t){if(1&e&&(n.Pb(0,"div",10),n.Pb(1,"div",11),n.Pb(2,"div",12),n.Pb(3,"div",13),n.Pb(4,"div",14),n.Kb(5,"img",15),n.Ob(),n.Pb(6,"div",16),n.vc(7," Order # "),n.Pb(8,"strong"),n.vc(9),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(10,"div",17),n.Pb(11,"div",7),n.Pb(12,"div",10),n.Pb(13,"div",18),n.Pb(14,"div",19),n.Pb(15,"div",20),n.Pb(16,"span"),n.vc(17,"Retailer Name: "),n.Ob(),n.Pb(18,"strong"),n.vc(19),n.Ob(),n.Kb(20,"br"),n.Pb(21,"span"),n.vc(22,"Phone No: "),n.Ob(),n.Pb(23,"strong"),n.vc(24),n.Ob(),n.Kb(25,"br"),n.Pb(26,"span"),n.vc(27,"Location: "),n.Ob(),n.Pb(28,"strong"),n.vc(29),n.Ob(),n.Ob(),n.Pb(30,"div",21),n.Pb(31,"span"),n.vc(32,"Status: "),n.Ob(),n.Pb(33,"strong"),n.vc(34),n.Ob(),n.Kb(35,"br"),n.Pb(36,"span"),n.vc(37,"Booking Date: "),n.Ob(),n.Pb(38,"strong"),n.vc(39),n.Ob(),n.Kb(40,"br"),n.Pb(41,"span"),n.vc(42,"Employee: "),n.Ob(),n.Pb(43,"strong"),n.vc(44),n.Ob(),n.Ob(),n.Ob(),n.Kb(45,"div",22),n.Pb(46,"div",23),n.Pb(47,"table",24),n.Pb(48,"thead"),n.Pb(49,"tr"),n.Pb(50,"th"),n.Pb(51,"strong"),n.vc(52,"Code"),n.Ob(),n.Ob(),n.Pb(53,"th"),n.Pb(54,"strong"),n.vc(55,"Product Name"),n.Ob(),n.Ob(),n.Pb(56,"th"),n.Pb(57,"strong"),n.vc(58,"CTN"),n.Ob(),n.Ob(),n.Pb(59,"th"),n.Pb(60,"strong"),n.vc(61,"BOX/PCS"),n.Ob(),n.Ob(),n.Pb(62,"th"),n.Pb(63,"strong"),n.vc(64,"T.P"),n.Ob(),n.Ob(),n.Pb(65,"th"),n.Pb(66,"strong"),n.vc(67,"GR Amt"),n.Ob(),n.Ob(),n.Pb(68,"th"),n.Pb(69,"strong"),n.vc(70,"T.O"),n.Ob(),n.Ob(),n.Pb(71,"th"),n.Pb(72,"strong"),n.vc(73,"T.Disc"),n.Ob(),n.Ob(),n.Pb(74,"th"),n.Pb(75,"strong"),n.vc(76,"SPC.Disc"),n.Ob(),n.Ob(),n.Pb(77,"th"),n.Pb(78,"strong"),n.vc(79,"Net.Amt"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(80,"tbody",25),n.tc(81,S,26,24,"tr",26),n.Pb(82,"tr"),n.Kb(83,"td",27),n.Kb(84,"td",27),n.Kb(85,"td",27),n.Kb(86,"td",27),n.Kb(87,"td",27),n.Kb(88,"td",27),n.Kb(89,"td",27),n.Kb(90,"td",27),n.Pb(91,"td"),n.Pb(92,"strong"),n.vc(93,"Total Discount PKR."),n.Ob(),n.Ob(),n.Pb(94,"td"),n.Pb(95,"strong"),n.vc(96),n.Zb(97,"decimal"),n.Ob(),n.Ob(),n.Ob(),n.Pb(98,"tr"),n.Kb(99,"td",27),n.Kb(100,"td",27),n.Kb(101,"td",27),n.Kb(102,"td",27),n.Kb(103,"td",27),n.Kb(104,"td",27),n.Kb(105,"td",27),n.Kb(106,"td",27),n.Pb(107,"td",28),n.Pb(108,"strong"),n.vc(109,"Total PKR."),n.Ob(),n.Ob(),n.Pb(110,"td",28),n.Pb(111,"strong"),n.vc(112),n.Zb(113,"number"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Kb(114,"div",29),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.yb(9),n.wc(null==e.orderDetail||null==e.orderDetail.retailer_detail?null:e.orderDetail.retailer_detail.id),n.yb(10),n.xc(" ",null==e.orderDetail?null:e.orderDetail.retailer_detail.retailer_name," "),n.yb(5),n.xc(" ",null==e.orderDetail?null:e.orderDetail.retailer_detail.retailer_phone," "),n.yb(5),n.xc(" ",null==e.orderDetail?null:e.orderDetail.retailer_detail.retailer_address," "),n.yb(5),n.xc(" ",null==e.orderDetail?null:e.orderDetail.retailer_detail.status," "),n.yb(5),n.xc(" ",null==e.orderDetail?null:e.orderDetail.retailer_detail.order_date," "),n.yb(5),n.xc(" ",null==e.orderDetail?null:e.orderDetail.retailer_detail.employee_name," "),n.yb(37),n.ec("ngForOf",null==e.orderDetail?null:e.orderDetail.order_detail),n.yb(15),n.wc(n.ac(97,10,null==e.orderDetail?null:e.orderDetail.totalDiscount)),n.yb(16),n.wc(n.bc(113,12,null==e.orderDetail||null==e.orderDetail.retailer_detail?null:e.orderDetail.retailer_detail.order_total,"1.2-2"))}}function w(e,t){1&e&&(n.Pb(0,"div",10),n.Kb(1,"app-loader-white"),n.Ob())}function D(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Ob(),n.Pb(7,"td"),n.vc(8),n.Ob(),n.Pb(9,"td"),n.vc(10),n.Zb(11,"number"),n.Ob(),n.Pb(12,"td"),n.Pb(13,"button",41),n.Wb("click",(function(){n.oc(e);const i=t.$implicit,r=n.Yb(3);return r.showDetails=!0,r.openDetailsModal(i.id)})),n.vc(14,"Detail"),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit;n.yb(2),n.wc(e.date),n.yb(2),n.wc(e.retailer),n.yb(2),n.xc("",e.channel," "),n.yb(2),n.wc(e.emp_name),n.yb(2),n.wc(n.bc(11,5,e.order_total,"1.2-2"))}}function T(e,t){if(1&e&&(n.Pb(0,"table",40),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th"),n.vc(4,"Date"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Retailer"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Channel"),n.Ob(),n.Pb(9,"th"),n.vc(10,"Orders Booker"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Order Total"),n.Ob(),n.Pb(13,"th"),n.vc(14,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"tbody"),n.tc(16,D,15,8,"tr",26),n.Ob(),n.Ob()),2&e){const e=n.Yb(2);n.ec("dtOptions",e.dtOptions),n.yb(16),n.ec("ngForOf",e.orders)}}function R(e,t){1&e&&(n.Pb(0,"div",10),n.Kb(1,"app-loader-white"),n.Ob())}function I(e,t){if(1&e&&(n.Pb(0,"div",6),n.Pb(1,"div",30),n.Pb(2,"div",31),n.Pb(3,"h2",32),n.vc(4,"Orders "),n.Pb(5,"span"),n.vc(6," Management"),n.Ob(),n.Ob(),n.Ob(),n.Pb(7,"div",31),n.Pb(8,"ol",33),n.Pb(9,"li"),n.Pb(10,"a",34),n.Pb(11,"span"),n.vc(12,"Orders"),n.Ob(),n.Ob(),n.Ob(),n.Pb(13,"li"),n.Pb(14,"span"),n.vc(15,"List"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(16,"div",7),n.Pb(17,"div",35),n.Pb(18,"div",11),n.Pb(19,"div",36),n.Pb(20,"h2"),n.vc(21,"Booked Order "),n.Pb(22,"span"),n.vc(23," Detail"),n.Ob(),n.Pb(24,"div",37),n.vc(25),n.Ob(),n.Ob(),n.Ob(),n.Pb(26,"div",38),n.tc(27,T,17,2,"table",39),n.tc(28,R,2,0,"div",8),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.yb(25),n.wc(e.orders.length||0),n.yb(2),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",e.loading)}}let M=(()=>{class e{constructor(e,t,i){this.route=e,this.ordersService=t,this.toastService=i,this.dtOptions={},this.orders=[],this.orderDetail=null,this.date=0,this.employeeId=0}ngOnInit(){this.showDetails=!1,this.date=this.route.snapshot.params.date,this.employeeId=this.route.snapshot.params.employeeId,this.dtOptions={pagingType:"simple_numbers"},this.getViewOrdersByEmployee()}getViewOrdersByEmployee(){this.loading=!0,this.ordersService.getViewOrdersByEmployee(this.employeeId,this.date.toString()).subscribe(e=>{this.loading=!1,200===e.status&&(this.orders=e.data)},e=>{this.loading=!1,401!==e.status&&1!==e.status&&this.toastService.showToaster({title:"Error:",message:"New Orders not fetched, try again later.",type:"error"}),scrollTo(0,0)})}getViewOrderDetailById(e){this.loading=!0,this.ordersService.getViewOrderDetailById(e).subscribe(e=>{this.loading=!1,200===e.status&&(this.orderDetail=e.data,this.orderDetail.subTotal=this.orderDetail.order_detail.map(e=>e.final_price).reduce((e,t)=>e+t,0),this.orderDetail.totalDiscount=this.orderDetail.order_detail.map(e=>e.original_price*e.quantity-e.unit_price_after_individual_discount*e.quantity).reduce((e,t)=>e+t,0),this.showDetails=!0)},e=>{this.loading=!1,401!==e.status&&1!==e.status&&this.toastService.showToaster({title:"Error:",message:"New Orders not fetched, try again later.",type:"error"}),scrollTo(0,0)})}openDetailsModal(e){this.orderDetail=null,this.getViewOrderDetailById(e)}closeDetailsModal(){document.body.classList.remove("no-scroll")}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(a.a),n.Jb(c.a),n.Jb(l.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-order-detail-list"]],decls:12,vars:4,consts:[["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",2,"overflow-y","auto",3,"ngClass"],["role","document",1,"modal-dialog","modal-full","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","border-0"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",2,"font-size","30px","outline","none",3,"click"],[1,"modal-body","p-0"],[1,"container"],[1,"row"],["class","col-12",4,"ngIf"],["class","container",4,"ngIf"],[1,"col-12"],[1,"card"],[1,"p-10",2,"border-bottom","solid 2px #000"],[1,"row","m-0"],[1,"col-8","OrderLogo"],["src","assets/images/sell-360.svg","alt",""],[1,"col-4","ord-no"],[1,"body",2,"padding","15px 20px"],[1,"form-body"],[1,"row","OrderInfo"],[1,"col-md-9"],[1,"col-md-3","p-0"],[1,"seprator-block"],[1,"Order-Detail-table","mt-30"],[1,"table"],[1,"order_items_body"],[4,"ngFor","ngForOf"],[1,"border-0"],[2,"background-color","#000","color","#fff"],[1,"clearfix"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],["routerLink","/orders"],[1,"col-md-12"],[1,"header"],[1,"_list-total"],[1,"body"],["datatable","","class","table table-hover dt-responsive nowrap","id","example","style","width:100%",3,"dtOptions",4,"ngIf"],["datatable","","id","example",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[1,"btn","btn-default","btn-line","mb-0",3,"click"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"button",4),n.Wb("click",(function(){return t.showDetails=!1,t.closeDetailsModal()})),n.vc(5,"\xd7"),n.Ob(),n.Ob(),n.Pb(6,"div",5),n.Pb(7,"div",6),n.Pb(8,"div",7),n.tc(9,k,115,15,"div",8),n.tc(10,w,2,0,"div",8),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(11,I,29,3,"div",9)),2&e&&(n.ec("ngClass",t.showDetails?"show active":""),n.yb(9),n.ec("ngIf",!t.loading),n.yb(1),n.ec("ngIf",t.loading),n.yb(1),n.ec("ngIf",!t.showDetails))},directives:[r.i,r.k,r.j,p.a,a.h,u.a],pipes:[C.a,r.d],styles:[".OrderLogo[_ngcontent-%COMP%]{text-align:left;padding-left:0}.OrderLogo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:46px}.OrderInfo[_ngcontent-%COMP%]{font-size:14px}.OrderInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:105px;float:left}.Order-Detail-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #333;padding:5px!important;font-size:12px}.Order-Detail-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #333!important;background-color:#ededed!important;color:#000;padding:5px!important;font-size:12px}.button-list[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{font-size:14px!important;letter-spacing:1px}.button-list[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{padding-right:3px}.ord-no[_ngcontent-%COMP%]{padding-top:17px;font-size:14px;text-align:right}.active[_ngcontent-%COMP%]{display:block!important}"]}),e})();var A=i("oo4J"),E=i("AytR");const q=function(e,t,i){return["/orders","dispatch",e,t,i]};function L(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Zb(5,"titlecase"),n.Ob(),n.Pb(6,"td"),n.vc(7),n.Ob(),n.Pb(8,"td"),n.vc(9),n.Ob(),n.Pb(10,"td"),n.vc(11),n.Zb(12,"number"),n.Ob(),n.Pb(13,"td"),n.Pb(14,"button",25),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).loadBookingSheet(i)})),n.vc(15,"BS"),n.Ob(),n.Pb(16,"a",26),n.vc(17,"Dispatch"),n.Ob(),n.Pb(18,"button",27),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).selectedAssignmentId=i.assignment_id})),n.vc(19,"Revert"),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit;n.yb(2),n.wc(e.date),n.yb(2),n.wc(n.ac(5,6,e.sales_man)),n.yb(3),n.xc("",e.emp_names||e.emp_name," "),n.yb(2),n.wc(e.total_orders),n.yb(2),n.wc(n.bc(12,8,e.order_total,"1.2-2")),n.yb(5),n.ec("routerLink",n.kc(11,q,e.assignment_id,e.sales_man_id,e.date))}}function N(e,t){if(1&e&&(n.Pb(0,"table",23),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th"),n.vc(4,"Date"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Sales Man"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Order Bookers"),n.Ob(),n.Pb(9,"th"),n.vc(10,"Orders"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Booked Value"),n.Ob(),n.Pb(13,"th"),n.vc(14,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"tbody"),n.tc(16,L,20,15,"tr",24),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.ec("dtOptions",e.dtOptions),n.yb(16),n.ec("ngForOf",e.ordersList)}}function Y(e,t){1&e&&(n.Pb(0,"div",8),n.Kb(1,"app-loader-white"),n.Ob())}let B=(()=>{class e{constructor(e,t,i){this.router=e,this.toastService=t,this.orderService=i,this.dtOptions={},this.ordersList=[],this.bookingSheetUrl=`${E.a.baseUrl}${A.a.BOOKING_SHEET_PDF}`}ngOnInit(){this.dtOptions={pagingType:"simple_numbers"},this.getDispatchOrderListing()}getDispatchOrderListing(){this.loading=!0,this.orderService.getDispatchOrdersListing().subscribe(e=>{this.loading=!1,200===e.status&&(this.ordersList=e.data)},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Dispatch Order list cannot be fetched at the moment! Please try again",title:"Error:"})})}revertOrder(){this.loading=!0,document.getElementById("close-revert").click(),this.orderService.revertOrder("assignment",this.selectedAssignmentId).subscribe(e=>{this.loading=!1,200===e.status?(this.toastService.showToaster({title:"Revet Success:",message:"The order reverted successfully!",type:"success"}),this.router.navigateByUrl("/orders")):this.toastService.showToaster({title:"Revet Error:",message:"The order cannot be reverted at the momnent, please try again later.",type:"error"})},e=>{this.loading=!1,1!==e.status&&401!==e.status&&this.toastService.showToaster({title:"Revet Error:",message:"The order cannot be reverted at the momnent, please try again later.",type:"error"})})}loadBookingSheet(e){window.open(`${this.bookingSheetUrl}?emp=${e.sales_man_id}&date=${e.date}&assignmentId=${e.assignment_id}`)}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(a.f),n.Jb(l.a),n.Jb(c.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-create-dispatched"]],decls:41,vars:2,consts:[["id","order-revert","tabindex","-1","role","dialog","aria-labelledby","orderLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top-borderRed"],[1,"modal-header"],["id","orderLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"modal-footer","border-0"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button","id","close-revert","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],[1,"container"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],["routerLink","/orders"],[1,"row"],[1,"card"],[1,"body"],["datatable","","class","table table-hover dt-responsive nowrap","id","example","style","width:100%",3,"dtOptions",4,"ngIf"],["class","col-md-12",4,"ngIf"],["datatable","","id","example",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[4,"ngFor","ngForOf"],[1,"btn","btn-default","mb-0",3,"click"],[1,"btn","btn-default","btn-line","mb-0",3,"routerLink"],["data-toggle","modal","data-target","#order-revert",1,"btn","btn-default","red-bg","mb-0",3,"click"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"h5",4),n.vc(5,"Cancel Order "),n.Kb(6,"span"),n.Ob(),n.Pb(7,"button",5),n.Pb(8,"span",6),n.vc(9,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(10,"div",7),n.Pb(11,"div",8),n.Pb(12,"p"),n.vc(13,"Are you sure you want to revert the order?"),n.Ob(),n.Ob(),n.Ob(),n.Pb(14,"div",9),n.Pb(15,"button",10),n.Wb("click",(function(){return t.revertOrder()})),n.vc(16,"Yes"),n.Ob(),n.Pb(17,"button",11),n.vc(18,"No"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(19,"div",12),n.Pb(20,"div",13),n.Pb(21,"div",14),n.Pb(22,"h2",15),n.vc(23,"Create "),n.Pb(24,"span"),n.vc(25," Dispatch"),n.Ob(),n.Ob(),n.Ob(),n.Pb(26,"div",14),n.Pb(27,"ol",16),n.Pb(28,"li"),n.Pb(29,"a",17),n.Pb(30,"span"),n.vc(31,"Orders"),n.Ob(),n.Ob(),n.Ob(),n.Pb(32,"li"),n.Pb(33,"span"),n.vc(34,"List"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(35,"div",18),n.Pb(36,"div",8),n.Pb(37,"div",19),n.Pb(38,"div",20),n.tc(39,N,17,2,"table",21),n.tc(40,Y,2,0,"div",22),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.yb(39),n.ec("ngIf",!t.loading),n.yb(1),n.ec("ngIf",t.loading))},directives:[a.h,r.k,u.a,r.j,p.a],pipes:[r.o,r.d],styles:[""]}),e})();var K=i("UYTb");const F=function(e,t,i){return["/orders","execute-order",e,t,i]};function J(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Ob(),n.Pb(7,"td"),n.vc(8),n.Ob(),n.Pb(9,"td"),n.vc(10),n.Zb(11,"number"),n.Ob(),n.Pb(12,"td"),n.Pb(13,"button",27),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).loadBookingSheet(i)})),n.vc(14,"BS"),n.Ob(),n.Pb(15,"button",27),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).loadLoadSheet(i)})),n.vc(16,"LS"),n.Ob(),n.Pb(17,"button",27),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).loadBills(i)})),n.vc(18,"Bills"),n.Ob(),n.Pb(19,"button",28),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).selectedLoadId=i.load_id})),n.vc(20,"Revert"),n.Ob(),n.Pb(21,"button",29),n.vc(22,"Execute"),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit;n.yb(2),n.wc(e.date),n.yb(2),n.wc(e.sales_man),n.yb(2),n.xc("",e.emp_names," "),n.yb(2),n.wc(e.total_orders),n.yb(2),n.wc(n.bc(11,6,e.order_total,"1.2-2")),n.yb(11),n.ec("routerLink",n.kc(9,F,e.sales_man_id,e.date,e.load_id))}}function Q(e,t){if(1&e&&(n.Pb(0,"table",25),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th"),n.vc(4,"Date"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Sales Man"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Order Bookers"),n.Ob(),n.Pb(9,"th"),n.vc(10,"Orders"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Amount"),n.Ob(),n.Pb(13,"th"),n.vc(14,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"tbody"),n.tc(16,J,23,13,"tr",26),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.ec("dtOptions",e.dtOptions),n.yb(16),n.ec("ngForOf",e.ordersList)}}function W(e,t){1&e&&(n.Pb(0,"div",30),n.Kb(1,"app-loader-white"),n.Ob())}let z=(()=>{class e{constructor(e,t,i,r){this.router=e,this.orderService=t,this.toastServicer=i,this.storageService=r,this.dtOptions={},this.ordersList=[],this.bookingSheetUrl=`${E.a.baseUrl}${A.a.BOOKING_SHEET_PDF}`,this.distributorId=r.getItem("distributor").id}ngOnInit(){this.showExecuteOrder=!1,this.dtOptions={pagingType:"simple_numbers"},this.getExecutionList()}getExecutionList(){this.loading=!0,this.orderService.getExecutionList().subscribe(e=>{this.loading=!1,200===e.status?this.ordersList=e.data:(console.log("Error when fetching orders :>> ",e.message),this.toastServicer.showToaster({type:"error",message:"Cannot fetch orders list, please try again later!",title:"Error:"}))},e=>{this.loading=!1,1!==e.status&&401!==e.status&&(console.log("Cannot fetch orders list for execution :>> ",e.messge),this.toastServicer.showToaster({type:"error",message:"Cannot fetch orders list, please try again later!",title:"Error:"}))})}loadBookingSheet(e){window.open(`${this.bookingSheetUrl}?emp=${e.sales_man_id}&date=${e.date}&loadId=${e.load_id}`)}loadLoadSheet(e){window.open(`${E.a.baseUrl}${A.a.LS_PDF}/${e.load_id}/${e.sales_man_id}/${e.date}`)}loadBills(e){window.open(`${E.a.baseUrl}${A.a.BILLS}?type=bill&emp=${e.sales_man_id}&date=${e.date}&dist_id=${this.distributorId}&size=A4&status=processed&loadId=${e.load_id}`)}revertOrder(){this.loading=!0,document.getElementById("close-revert").click(),this.orderService.revertOrder("load",this.selectedLoadId).subscribe(e=>{this.loading=!1,200===e.status?(this.toastServicer.showToaster({title:"Revet Success:",message:"The order reverted successfully!",type:"success"}),this.router.navigateByUrl("/orders")):this.toastServicer.showToaster({title:"Revet Error:",message:"The order cannot be reverted at the momnent, please try again later.",type:"error"})},e=>{this.loading=!1,1!==e.status&&401!==e.status&&this.toastServicer.showToaster({title:"Revet Error:",message:"The order cannot be reverted at the momnent, please try again later.",type:"error"})})}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(a.f),n.Jb(c.a),n.Jb(l.a),n.Jb(K.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-orderexecution-list"]],decls:48,vars:3,consts:[["id","order-revert","tabindex","-1","role","dialog","aria-labelledby","orderLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top-borderRed"],[1,"modal-header"],["id","orderLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"modal-footer","border-0"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button","id","close-revert","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],[1,"container"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],["routerLink","/orders"],[1,"row"],[1,"card"],[1,"header"],[1,"_list-total"],[1,"body"],["datatable","","class","table table-hover dt-responsive nowrap","id","example","style","width:100%",3,"dtOptions",4,"ngIf"],["class","col-12",4,"ngIf"],["datatable","","id","example",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[4,"ngFor","ngForOf"],[1,"btn","btn-default","mb-0",3,"click"],["data-target","#order-revert","data-toggle","modal",1,"btn","btn-default","red-bg","mb-0",3,"click"],[1,"btn","btn-default","mb-0",3,"routerLink"],[1,"col-12"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"h5",4),n.vc(5,"Cancel Order "),n.Kb(6,"span"),n.Ob(),n.Pb(7,"button",5),n.Pb(8,"span",6),n.vc(9,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(10,"div",7),n.Pb(11,"div",8),n.Pb(12,"p"),n.vc(13,"Are you sure you want to revert the order?"),n.Ob(),n.Ob(),n.Ob(),n.Pb(14,"div",9),n.Pb(15,"button",10),n.Wb("click",(function(){return t.revertOrder()})),n.vc(16,"Yes"),n.Ob(),n.Pb(17,"button",11),n.vc(18,"No"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(19,"div",12),n.Pb(20,"div",13),n.Pb(21,"div",14),n.Pb(22,"h2",15),n.vc(23,"Orders "),n.Pb(24,"span"),n.vc(25," Management"),n.Ob(),n.Ob(),n.Ob(),n.Pb(26,"div",14),n.Pb(27,"ol",16),n.Pb(28,"li"),n.Pb(29,"a",17),n.Pb(30,"span"),n.vc(31,"Orders"),n.Ob(),n.Ob(),n.Ob(),n.Pb(32,"li"),n.Pb(33,"span"),n.vc(34,"List"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(35,"div",18),n.Pb(36,"div",8),n.Pb(37,"div",19),n.Pb(38,"div",20),n.Pb(39,"h2"),n.vc(40,"Execute "),n.Pb(41,"span"),n.vc(42," Orders"),n.Ob(),n.Pb(43,"div",21),n.vc(44),n.Ob(),n.Ob(),n.Ob(),n.Pb(45,"div",22),n.tc(46,Q,17,2,"table",23),n.tc(47,W,2,0,"div",24),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.yb(44),n.wc(t.ordersList.length),n.yb(2),n.ec("ngIf",!t.loading),n.yb(1),n.ec("ngIf",t.loading))},directives:[a.h,r.k,u.a,r.j,a.g,p.a],pipes:[r.d],styles:[".active[_ngcontent-%COMP%]{display:block;overflow-y:auto}"]}),e})(),$=(()=>{class e{constructor(){}setOrderPayloadItems(e,t){return e.items.map(i=>{var r,o,a,n,d;return{quantity_returned:i.dispatch_qty-i.stockQty>-1?i.dispatch_qty-i.stockQty:0,executed_qty:+i.stockQty,id:i.id||0,employee_id:e.employee_id,pref_id:i.pref_id,item_quantity_booker:i.item_quantity_booker,item_quantity_updated:i.item_quantity_updated||0,original_price:i.item_trade_price,scheme_discount:i.scheme_discount,unit_price_after_scheme_discount:i.unit_price_after_scheme_discount,merchant_discount:i.trade_discount,merchant_discount_pkr:i.trade_discount_pkr,unit_price_after_merchant_discount:i.unit_price_after_merchant_discount,special_discount:i.special_discount,unit_price_after_special_discount:i.unit_price_after_special_discount,booker_discount:i.extra_discount||0,unit_price_after_individual_discount:i.unit_price_after_individual_discount||i.price,unit_id:i.unit_id,unit_name:i.unit_name,brand_id:i.brand_id,item_id:i.item_id,item_name:i.item_name,scheme_id:(null===(r=i.selectedScheme)||void 0===r?void 0:r.id)||0,scheme_min_quantity:(null===(o=i.selectedScheme)||void 0===o?void 0:o.min_qty)||0,scheme_quantity_free:(null===(a=i.selectedScheme)||void 0===a?void 0:a.quantity_free)||0,scheme_rule:(null===(n=i.selectedScheme)||void 0===n?void 0:n.rule_name)||"",gift_value:i.gift_value||0,parent_pref_id:i.child||i.parent_pref_id,parent_unit_id:i.parent_unit_id,parent_brand_id:i.brand_id,parent_tp:i.parent_trade_price||i.parent_tp,parent_qty_sold:i.parent_qty_sold,parent_value_sold:i.net_amount,final_price:i.net_amount,campaign_id:(null===(d=i.selectedScheme)||void 0===d?void 0:d.id)||0,item_status:i.is_active||i.item_status,dispatch_status:0,dispatch_qty:+i.dispatch_qty,dispatch_amount:i.net_amount,reasoning:"",distributor_id:e.distributor_id,division_id:t.division_id||0,region_id:e.region_id,area_id:e.area_id,assigned_route_id:e.assigned_route_id,territory_id:e.territory_id,booked_order_value:i.booked_order_value||0,booked_total_qty:i.booked_total_qty||0,is_deleted:i.isDeleted,quantity:+i.stockQty,gross_sale_amount:i.original_amount,total_retail_price:i.item_retail_price*i.stockQty,tax_class_id:i.tax_class_id,tax_in_percentage:i.tax_class_amount,tax_in_value:i.tax_amount_value||0,total_tax_amount:i.tax_amount_pkr||0,total_amount_after_tax:i.net_amount,total_discount:i.scheme_discount*+i.stockQty+i.trade_discount_pkr*+i.stockQty+ +i.stockQty*i.special_discount+i.extra_discount_pkr,order_id:e.id}})}setOrderPayloadReturnedItems(e,t){return e.returned_items.map(i=>({quantity_returned:+i.stockQty,executed_qty:-i.stockQty,id:i.id||0,employee_id:e.employee_id,pref_id:i.pref_id,item_quantity_booker:0,item_quantity_updated:0,original_price:i.item_trade_price,scheme_discount:0,unit_price_after_scheme_discount:i.unit_price_after_scheme_discount,merchant_discount:0,merchant_discount_pkr:0,unit_price_after_merchant_discount:i.unit_price_after_merchant_discount,special_discount:0,unit_price_after_special_discount:i.unit_price_after_special_discount,booker_discount:i.extra_discount||0,unit_price_after_individual_discount:i.unit_price_after_individual_discount||i.unit_price_after_special_discount,unit_id:i.unit_id,unit_name:i.unit_name,brand_id:i.brand_id,item_id:i.item_id,item_name:i.item_name,scheme_id:0,scheme_min_quantity:0,scheme_quantity_free:0,return_type:i.returnType||i.return_type,scheme_rule:"",gift_value:0,parent_pref_id:i.child||i.parent_pref_id,parent_unit_id:i.parent_unit_id,parent_brand_id:i.brand_id,parent_tp:i.parent_trade_price||i.parent_tp,parent_qty_sold:0,parent_value_sold:i.net_amount,final_price:i.net_amount,campaign_id:0,item_status:i.is_active||i.item_status,dispatch_status:0,dispatch_qty:0,dispatch_amount:i.net_amount,reasoning:"",distributor_id:e.distributor_id,division_id:t.division_id||0,region_id:e.region_id,area_id:e.area_id,assigned_route_id:e.assigned_route_id,territory_id:e.territory_id,booked_order_value:0,booked_total_qty:0,is_deleted:i.isDeleted,quantity:0,gross_sale_amount:i.original_amount,total_retail_price:i.total_retail_price,tax_class_id:i.tax_class_id,tax_in_percentage:i.tax_class_amount,tax_in_value:0,total_tax_amount:0,total_amount_after_tax:i.net_amount,total_discount:i.extra_discount?i.extra_discount*+i.stockQty:0,order_id:e.id}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Fb({token:e,factory:e.\u0275fac}),e})(),V=(()=>{class e{constructor(){}setSpotSaleOrderContent(e,t,i){return{employee_id:t.employee_id,retailer_id:e.retailer_id,within_radius:0,status:"",status_code:0,order_total:0,ttl_qty_sold:0,ttl_products_sold:0,remarks:"",booking_region:t.region_id,booking_area:t.area_id,booking_territory:t.territory_id,invoice_number:"",freight_charges:0,booking_zone:0,booking_locality_id:e.locality_id,booking_neighbourhood_id:e.neighbourhood_id,sales_man_id:0,spot_sale:1,counter_sale:0,invoice_date:"",order_type:"spot",distributor_id:i,region_id:t.region_id,recovery:0,recovered:0,area_id:t.area_id,assigned_route_id:e.route_id,territory_id:t.territory_id,booked_order_value:0,booked_total_qty:0,booked_total_skus:0,gross_sale_amount:0,total_retail_price:0,total_tax_amount:0,total_amount_after_tax:0,total_discount:0,payment:{},items:[],returned_items:[]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Fb({token:e,factory:e.\u0275fac}),e})();var Z=i("LCr2"),U=i("Unci"),G=i("tPJg"),H=i("VzUJ");function j(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",14),n.Wb("click",(function(){return n.oc(e),n.Yb().cancelOrder()})),n.vc(1," Yes "),n.Ob()}}function X(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",14),n.Wb("click",(function(){return n.oc(e),n.Yb().cancelSpotSale()})),n.vc(1," Yes "),n.Ob()}}function ee(e,t){if(1&e&&(n.Pb(0,"option",77),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.id),n.yb(1),n.xc(" ",e.name," ")}}function te(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.Pb(6,"button",81),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(3).removeExpense(i.expense_type)})),n.vc(7," Delete "),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=n.Yb(3);n.yb(2),n.wc(i.getExpense(e.expense_type)),n.yb(2),n.wc(e.amount),n.yb(2),n.ec("id",e.type)}}function ie(e,t){if(1&e&&(n.Pb(0,"table",78),n.Pb(1,"thead"),n.Pb(2,"tr",79),n.Pb(3,"th"),n.vc(4,"Expense Type"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Amount"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(9,"tbody"),n.tc(10,te,8,3,"tr",80),n.Ob(),n.Ob()),2&e){const e=n.Yb(2);n.ec("dtOptions",e.dtOPtions),n.yb(10),n.ec("ngForOf",null==e.finalLoad?null:e.finalLoad.expense_detail)}}function re(e,t){1&e&&(n.Pb(0,"div",82),n.Pb(1,"div",83),n.Pb(2,"span",84),n.vc(3,"Loading..."),n.Ob(),n.Ob(),n.Ob())}function oe(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",7),n.Pb(1,"div",57),n.Pb(2,"div",58),n.Pb(3,"label",59),n.vc(4,"Expense Type"),n.Ob(),n.Pb(5,"div",60),n.Pb(6,"select",61,62),n.Pb(8,"option",63),n.vc(9,"Select Expense Type"),n.Ob(),n.tc(10,ee,2,2,"option",64),n.Ob(),n.Ob(),n.Ob(),n.Pb(11,"div",65),n.Pb(12,"div",66),n.Pb(13,"label",67),n.vc(14,"Amount"),n.Ob(),n.Pb(15,"input",68,69),n.Wb("keydown",(function(t){return n.oc(e),n.Yb().isNumber(t)})),n.Ob(),n.Ob(),n.Ob(),n.Pb(17,"div",70),n.Pb(18,"button",71),n.Wb("click",(function(){n.oc(e);const t=n.nc(7),i=n.nc(16);return n.Yb().addExpense(t,i)})),n.vc(19," Add "),n.Ob(),n.Ob(),n.Ob(),n.Pb(20,"div",72),n.Pb(21,"div",73),n.Pb(22,"div",34),n.Pb(23,"div",74),n.tc(24,ie,11,2,"table",75),n.tc(25,re,4,0,"div",76),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.yb(10),n.ec("ngForOf",null==e.finalLoad?null:e.finalLoad.expense_types),n.yb(14),n.ec("ngIf",!e.isExpenseAdded),n.yb(1),n.ec("ngIf",e.isExpenseAdded)}}function ae(e,t){if(1&e){const e=n.Qb();n.Pb(0,"app-products-drawer",85),n.Wb("drawerClosed",(function(){return n.oc(e),n.Yb().closeNewProducts()}))("productSelected",(function(t){return n.oc(e),n.Yb().addNewProductToOrder(t)})),n.Ob()}if(2&e){const e=n.Yb();n.ec("selectedRetailer",e.selectedRetailer)("selectedOrderCreditType",e.isEdit?e.orderDetails.credit_order_type:e.selectedOrderCreditType)("orderType","execution")("orderedProducts",null==e.orderDetails?null:e.orderDetails.items)("loadingProducts",e.loadingProduct)("allProducts",e.inventory)("executedProducts",e.executed_products)("productSchemes",e.schemes)("productMerchantDiscount",e.merchantDiscount)("specialDiscounts",e.specialDiscounts)("selectedProductType",e.isEdit?1===e.orderDetails.order_context?0:1:e.selectedProductType)}}function ne(e,t){if(1&e){const e=n.Qb();n.Pb(0,"app-returned-products",86),n.Wb("productReturned",(function(t){return n.oc(e),n.Yb().handleReturnedProduct(t)}))("closeReturned",(function(){return n.oc(e),n.Yb().closeReturnedModal()})),n.Ob()}if(2&e){const e=n.Yb();n.ec("productsList",e.allProducts)("orderReturnedItems",e.orderDetails.returned_items)}}function de(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",3),n.Pb(1,"h5",87),n.vc(2," Add "),n.Pb(3,"span"),n.vc(4," Cheque Information"),n.Ob(),n.Ob(),n.Pb(5,"button",88),n.Wb("click",(function(){return n.oc(e),n.Yb().paymentCancelled()})),n.Pb(6,"span",6),n.vc(7,"\xd7"),n.Ob(),n.Ob(),n.Ob()}}function se(e,t){1&e&&(n.Pb(0,"div",109),n.vc(1," Please select a payment method! "),n.Ob())}function ce(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Please add Cheque Number! "),n.Ob())}function le(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Please add Payment Date! "),n.Ob())}function be(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Please add Bank Name! "),n.Ob())}function ue(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Please add Total Amount! "),n.Ob())}function pe(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Negative values not allowed "),n.Ob())}function he(e,t){if(1&e&&(n.Pb(0,"span",110),n.vc(1),n.Zb(2,"number"),n.Ob()),2&e){const e=n.Yb(3);n.yb(1),n.xc(" Amount should not be greater than ",n.bc(2,1,null==e.cash?null:e.cash.amount_received,"1.2-2")," ")}}function me(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",105),n.Pb(1,"div",66),n.Pb(2,"label",99),n.vc(3,"Total Amount*"),n.Ob(),n.Pb(4,"input",111,112),n.Wb("focus",(function(t){return n.oc(e),n.Yb(2).focused(t)}))("blur",(function(t){return n.oc(e),n.Yb(2).left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).chequeAmount=t})),n.Ob(),n.Ob(),n.tc(6,ue,2,0,"span",102),n.tc(7,pe,2,0,"span",102),n.tc(8,he,3,4,"span",102),n.Ob()}if(2&e){const e=n.nc(5),t=n.Yb(2);n.yb(4),n.ec("max",null==t.cash?null:t.cash.amount_received)("ngModel",t.chequeAmount),n.yb(2),n.ec("ngIf",(null==e.errors?null:e.errors.required)&&t.isAdded),n.yb(1),n.ec("ngIf",!(null!=e.errors&&e.errors.required)&&t.chequeAmount<0&&t.isAdded),n.yb(1),n.ec("ngIf",!(null!=e.errors&&e.errors.required)&&t.chequeAmount>(null==t.cash?null:t.cash.amount_received)&&t.isAdded)}}function ge(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",74),n.Pb(1,"div",89),n.Pb(2,"div",90),n.Pb(3,"div",91),n.Pb(4,"div",92),n.Pb(5,"input",93),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().paymentTypeCheque=t}))("click",(function(){n.oc(e);const t=n.Yb();return t.chequeAmount=null,t.currentFullPayment("Cheque Payment","Credit")})),n.Ob(),n.Pb(6,"label",94),n.vc(7,"Full Amount"),n.Ob(),n.Ob(),n.Ob(),n.Pb(8,"div",91),n.Pb(9,"div",92),n.Pb(10,"input",95),n.Wb("click",(function(){return n.oc(e),n.Yb().setPartial("Cheque Payment")}))("ngModelChange",(function(t){return n.oc(e),n.Yb().paymentTypeCheque=t})),n.Ob(),n.Pb(11,"label",96),n.vc(12,"Partial Amount"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(13,se,2,0,"div",97),n.Pb(14,"div",34),n.Pb(15,"div",98),n.Pb(16,"div",66),n.Pb(17,"label",99),n.vc(18,"Cheque Number*"),n.Ob(),n.Pb(19,"input",100,101),n.Wb("focus",(function(t){return n.oc(e),n.Yb().focused(t)}))("blur",(function(t){return n.oc(e),n.Yb().left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb().chequeNumber=t})),n.Ob(),n.Ob(),n.tc(21,ce,2,0,"span",102),n.Ob(),n.Pb(22,"div",98),n.Pb(23,"div",66),n.Pb(24,"label",99),n.vc(25,"Date*"),n.Ob(),n.Pb(26,"input",103,104),n.Wb("focus",(function(t){return n.oc(e),n.Yb().focused(t)}))("blur",(function(t){return n.oc(e),n.Yb().left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb().paymentDate=t})),n.Ob(),n.Ob(),n.tc(28,le,2,0,"span",102),n.Ob(),n.Pb(29,"div",105),n.Pb(30,"div",66),n.Pb(31,"label",99),n.vc(32,"Bank Name*"),n.Ob(),n.Pb(33,"input",106,107),n.Wb("focus",(function(t){return n.oc(e),n.Yb().focused(t)}))("blur",(function(t){return n.oc(e),n.Yb().left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb().bankName=t})),n.Ob(),n.Ob(),n.tc(35,be,2,0,"span",102),n.Ob(),n.tc(36,me,9,5,"div",108),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.nc(20),t=n.nc(34),i=n.Yb();n.yb(5),n.ec("ngModel",i.paymentTypeCheque),n.yb(5),n.ec("ngModel",i.paymentTypeCheque),n.yb(3),n.ec("ngIf",""===i.paymentTypeCheque&&i.isAdded),n.yb(6),n.ec("ngModel",i.chequeNumber),n.yb(2),n.ec("ngIf",(null==e.errors?null:e.errors.required)&&i.isAdded),n.yb(5),n.ec("ngModel",i.paymentDate),n.yb(2),n.ec("ngIf","  "===i.paymentDate&&i.isAdded),n.yb(5),n.ec("ngModel",i.bankName),n.yb(2),n.ec("ngIf",(null==t.errors?null:t.errors.required)&&i.isAdded),n.yb(1),n.ec("ngIf","full"!==i.paymentTypeCheque)}}function Oe(e,t){1&e&&(n.Pb(0,"div",3),n.Pb(1,"h5",87),n.vc(2," Add "),n.Pb(3,"span"),n.vc(4,"Credit Information"),n.Ob(),n.Ob(),n.Pb(5,"button",5),n.Pb(6,"span",6),n.vc(7,"\xd7"),n.Ob(),n.Ob(),n.Ob())}function ve(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Please select a payment method! "),n.Ob())}function _e(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Please add Total Amount! "),n.Ob())}function Pe(e,t){1&e&&(n.Pb(0,"span",110),n.vc(1," Negative values not allowed "),n.Ob())}function fe(e,t){if(1&e&&(n.Pb(0,"span",110),n.vc(1),n.Zb(2,"number"),n.Ob()),2&e){const e=n.Yb(3);n.yb(1),n.xc(" Amount should not be greater than ",n.bc(2,1,e.dueAmount-((null==e.cheque?null:e.cheque.amount_received)||0),"1.2-2")," ")}}function ye(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",98),n.Pb(1,"div",66),n.Pb(2,"label",99),n.vc(3,"Amount*"),n.Ob(),n.Pb(4,"input",119,120),n.Wb("focus",(function(t){return n.oc(e),n.Yb(2).focused(t)}))("blur",(function(t){return n.oc(e),n.Yb(2).left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).creditAmount=t})),n.Ob(),n.Ob(),n.tc(6,_e,2,0,"span",102),n.tc(7,Pe,2,0,"span",102),n.tc(8,fe,3,4,"span",102),n.Ob()}if(2&e){const e=n.nc(5),t=n.Yb(2);n.yb(4),n.ec("max",t.dueAmount-((null==t.cheque?null:t.cheque.amount_received)||0))("ngModel",t.creditAmount),n.yb(2),n.ec("ngIf",(null==e.errors?null:e.errors.required)&&t.isAdded),n.yb(1),n.ec("ngIf",!(null!=e.errors&&e.errors.required)&&t.creditAmount<0&&t.isAdded),n.yb(1),n.ec("ngIf",!(null!=e.errors&&e.errors.required)&&t.creditAmount>t.dueAmount-((null==t.cheque?null:t.cheque.amount_received)||0)&&t.isAdded)}}function xe(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",89),n.Pb(1,"div",74),n.Pb(2,"div",90),n.Pb(3,"div",113),n.Pb(4,"div",92),n.Pb(5,"input",114),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().paymentTypeCredit=t}))("click",(function(){n.oc(e);const t=n.Yb();return t.creditAmount=null,t.currentFullPayment("Credit","Cheque payment")})),n.Ob(),n.Pb(6,"label",115),n.vc(7,"Full Amount"),n.Ob(),n.Ob(),n.tc(8,ve,2,0,"span",102),n.Ob(),n.Pb(9,"div",113),n.Pb(10,"div",92),n.Pb(11,"input",116),n.Wb("click",(function(){return n.oc(e),n.Yb().setPartial("Credit")}))("ngModelChange",(function(t){return n.oc(e),n.Yb().paymentTypeCredit=t})),n.Ob(),n.Pb(12,"label",117),n.vc(13,"Partial Amount"),n.Ob(),n.Ob(),n.Ob(),n.tc(14,ye,9,5,"div",118),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.yb(5),n.ec("ngModel",e.paymentTypeCredit),n.yb(3),n.ec("ngIf",""===e.paymentTypeCredit&&e.isAdded),n.yb(3),n.ec("ngModel",e.paymentTypeCredit),n.yb(3),n.ec("ngIf","full"!==e.paymentTypeCredit)}}function Ce(e,t){1&e&&(n.Pb(0,"div",121),n.Pb(1,"h5",110),n.vc(2,' You have to choose "Partial Amount" to use both Credit and Cheque Payment! '),n.Ob(),n.Ob())}function Se(e,t){if(1&e){const e=n.Qb();n.Pb(0,"app-order-items-list",144),n.Wb("deleteReturned",(function(t){return n.oc(e),n.Yb(2).deleteReturnedProduct(t)}))("openDrawer",(function(){return n.oc(e),n.Yb(2).openProductsList()}))("openReturnedModal",(function(){return n.oc(e),n.Yb(2).openReturnedModal()}))("productUpdated",(function(){return n.oc(e),n.Yb(2).calculateReceivable()})),n.Ob()}if(2&e){const e=n.Yb(2);n.ec("currentTab",e.currentTab)("orderDetail",e.orderDetails)("returnAmount",e.returnAmount)("dueAmount",e.dueAmount)("isChequeAdded",e.isChequeAdded)("isCreditAdded",e.isCreditAdded)("receivableAmount",e.receivableAmount)("totalPayment",e.totalPayment)("cheque",e.cheque)("credit",e.credit)("cash",e.cash)("orders",e.retailersList)("schemes",e.schemes)("selectedRetailer",e.selectedRetailer)("returnedProduct",e.returnedProduct)("allProducts",e.inventory)("specialDiscounts",e.specialDiscounts)("merchantDiscount",e.merchantDiscount)("newProduct",e.newProduct)("orderType","execution")("recoveryAmount",e.recoveryAmount)("credit_order_type",e.orderDetails.credit_order_type.toString())("credit_order_type_string",e.credit_order_type_string)("product_type_string",e.product_type_string)("selectedOrderCreditType",e.isEdit?e.orderDetails.credit_order_type:e.selectedOrderCreditType)}}function ke(e,t){1&e&&(n.Pb(0,"div",74),n.Kb(1,"app-loader-white"),n.Ob())}function we(e,t){1&e&&(n.Pb(0,"div",145),n.Pb(1,"div",146),n.Kb(2,"img",147),n.Pb(3,"strong"),n.vc(4,"Select order to see details"),n.Ob(),n.Ob(),n.Ob())}function De(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",156),n.Wb("click",(function(){n.oc(e);const t=n.Yb(3);return t.isCredit=!1,t.isFullyPaymentAdded("Cheque Payment")})),n.vc(1," Add Cheque "),n.Ob()}if(2&e){const e=n.Yb(3);n.ec("disabled",!e.selectedRetailer)}}function Te(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",157),n.Wb("click",(function(){return n.oc(e),n.Yb(3).removeCheque()})),n.vc(1," Remove Cheque "),n.Ob()}if(2&e){const e=n.Yb(3);n.ec("disabled",!e.selectedRetailer)}}function Re(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",158),n.Wb("click",(function(){n.oc(e);const t=n.Yb(3);return t.isCredit=!0,t.isFullyPaymentAdded("Credit")})),n.vc(1," Add Credit "),n.Ob()}if(2&e){const e=n.Yb(3);n.ec("disabled",!e.selectedRetailer)}}function Ie(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",159),n.Wb("click",(function(){return n.oc(e),n.Yb(3).removeCredit()})),n.vc(1," Remove Credit "),n.Ob()}if(2&e){const e=n.Yb(3);n.ec("disabled",!e.selectedRetailer)}}function Me(e,t){1&e&&(n.Pb(0,"button",160),n.vc(1," Show Modal "),n.Ob())}function Ae(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",148),n.tc(1,De,2,1,"button",149),n.tc(2,Te,2,1,"button",150),n.tc(3,Re,2,1,"button",151),n.tc(4,Ie,2,1,"button",152),n.tc(5,Me,2,0,"button",153),n.Pb(6,"button",154),n.Wb("click",(function(){return n.oc(e),n.Yb(2).saveExecutionQuantity()})),n.vc(7," Save Order "),n.Ob(),n.Pb(8,"button",155),n.vc(9," Cancel Order "),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(1),n.ec("ngIf",!e.savingOrder&&!e.isChequeAdded&&e.selectedOrderCreditType==e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.savingOrder&&e.isChequeAdded&&e.selectedOrderCreditType==e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.savingOrder&&!e.isCreditAdded&&e.selectedOrderCreditType==e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.savingOrder&&e.isCreditAdded&&e.selectedOrderCreditType==e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.savingOrder),n.yb(1),n.ec("disabled",e.savingOrder||!e.selectedRetailer),n.yb(2),n.ec("disabled",e.savingOrder||!e.selectedRetailer)}}function Ee(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",122),n.Pb(1,"div",123),n.Pb(2,"div",124),n.Pb(3,"div",125),n.Pb(4,"div",126),n.Pb(5,"strong"),n.vc(6,"Date:"),n.Ob(),n.Pb(7,"span",127),n.vc(8),n.Ob(),n.Ob(),n.Ob(),n.Pb(9,"div",128),n.Pb(10,"div",129),n.Pb(11,"strong"),n.vc(12,"Order Booker:"),n.Ob(),n.Pb(13,"b",130),n.vc(14),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"div",128),n.Pb(16,"div",129),n.Pb(17,"strong"),n.vc(18,"Territory:"),n.Ob(),n.Pb(19,"span",131),n.vc(20),n.Ob(),n.Ob(),n.Ob(),n.Pb(21,"div",125),n.Pb(22,"div",126),n.Pb(23,"strong"),n.vc(24,"Total Outlets:"),n.Ob(),n.Pb(25,"span",132),n.vc(26),n.Ob(),n.Ob(),n.Ob(),n.Pb(27,"div",133),n.Pb(28,"div",134),n.Pb(29,"strong"),n.vc(30,"Total Amount:"),n.Ob(),n.Pb(31,"span",135),n.vc(32),n.Zb(33,"number"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(34,"div",136),n.Pb(35,"div",137),n.Pb(36,"app-retailer-sub-list",138),n.Wb("retailerChanged",(function(t){return n.oc(e),n.Yb().getOrderDetailsByRetailer(t)})),n.Ob(),n.Ob(),n.Pb(37,"div",139),n.Pb(38,"div",140),n.tc(39,Se,1,25,"app-order-items-list",141),n.tc(40,ke,2,0,"div",28),n.tc(41,we,5,0,"div",142),n.Ob(),n.tc(42,Ae,10,7,"div",143),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.ec("ngClass",1===e.currentTab?"show active":""),n.yb(8),n.wc((null==e.dispatchSummary?null:e.dispatchSummary.date)||"--"),n.yb(6),n.wc((null==e.dispatchSummary||null==e.dispatchSummary.order_bookers?null:e.dispatchSummary.order_bookers.join(", "))||"--"),n.yb(6),n.wc((null==e.dispatchSummary?null:e.dispatchSummary.territories.join(", "))||"--"),n.yb(6),n.wc((null==e.dispatchSummary?null:e.dispatchSummary.total_outlets)||"--"),n.yb(6),n.xc("Rs. ",n.bc(33,14,(null==e.dispatchSummary?null:e.dispatchSummary.total_amount)||0,"1.2-2"),""),n.yb(4),n.ec("loading",e.loading||e.savingOrder)("currentTab",e.currentTab)("retailers",e.retailersList)("orderType","execution"),n.yb(3),n.ec("ngIf",!e.savingOrder&&e.selectedRetailer),n.yb(1),n.ec("ngIf",e.savingOrder),n.yb(1),n.ec("ngIf",!e.savingOrder&&!e.selectedRetailer),n.yb(1),n.ec("ngIf",!e.savingOrder&&e.selectedRetailer)}}function qe(e,t){if(1&e&&(n.Pb(0,"ng-option",77),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e),n.yb(1),n.xc("",e.employee_first_name+" "+e.employee_last_name," ")}}function Le(e,t){if(1&e&&(n.Pb(0,"ng-option",77),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.route_id),n.yb(1),n.wc(e.name)}}function Ne(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",171),n.Pb(1,"div",164),n.Pb(2,"div",165),n.Pb(3,"ng-select",172),n.Wb("change",(function(t){return n.oc(e),n.Yb(2).getRetaielrsByRoute(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).selectedRoute=t})),n.tc(4,Le,2,2,"ng-option",64),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(3),n.ec("ngModel",e.selectedRoute),n.yb(1),n.ec("ngForOf",e.bookerRoutes)}}function Ye(e,t){if(1&e&&(n.Pb(0,"ng-option",77),n.vc(1),n.Ob()),2&e){const e=n.Yb().$implicit;n.ec("value",e),n.yb(1),n.xc(" ",e.retailer_name,"")}}function Be(e,t){if(1&e&&(n.Nb(0),n.tc(1,Ye,2,2,"ng-option",174),n.Mb()),2&e){const e=t.$implicit;n.yb(1),n.ec("ngIf",!e.isAdded)}}function Ke(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",171),n.Pb(1,"div",164),n.Pb(2,"div",165),n.Pb(3,"ng-select",173),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).spotRetailer=t}))("change",(function(){return n.oc(e),n.Yb(2).onRetailerCahange()})),n.tc(4,Be,2,1,"ng-container",80),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(3),n.ec("ngModel",e.spotRetailer),n.yb(1),n.ec("ngForOf",e.routeRetailers)}}function Fe(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",171),n.Pb(1,"div",164),n.Pb(2,"div",165),n.Pb(3,"ng-select",175),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).selectedOrderCreditType=t})),n.Pb(4,"ng-option",77),n.vc(5," Regular Order"),n.Ob(),n.Pb(6,"ng-option",77),n.vc(7," Credit Order without Discount"),n.Ob(),n.Pb(8,"ng-option",77),n.vc(9," Credit Order with Discount"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(3),n.ec("readonly",(null==e.orderDetails||null==e.orderDetails.items?null:e.orderDetails.items.length)&&!e.isEdit)("multiple",!1)("ngModel",e.selectedOrderCreditType),n.yb(1),n.ec("value",e.ORDER_TYPE.Regular_Order),n.yb(2),n.ec("value",e.ORDER_TYPE.Credit_Order_Without_Discount),n.yb(2),n.ec("value",e.ORDER_TYPE.Credit_Order_With_Discount)}}function Je(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",171),n.Pb(1,"div",164),n.Pb(2,"div",165),n.Pb(3,"ng-select",176),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).selectedProductType=t}))("change",(function(){return n.oc(e),n.Yb(2).getDiscountSlabs()})),n.Pb(4,"ng-option",77),n.vc(5," Normal "),n.Ob(),n.Pb(6,"ng-option",77),n.vc(7," Exclusive "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(3),n.ec("readonly",(null==e.orderDetails||null==e.orderDetails.items?null:e.orderDetails.items.length)&&!e.isEdit)("multiple",!1)("ngModel",e.selectedProductType),n.yb(1),n.ec("value",e.PRODUCT_TYPE.NORMAL),n.yb(2),n.ec("value",e.PRODUCT_TYPE.EXCLUSIVE)}}function Qe(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",177),n.Wb("click",(function(){return n.oc(e),n.Yb(2).setSpotSaleRetailer()})),n.vc(1," Add Order "),n.Ob()}}function We(e,t){if(1&e){const e=n.Qb();n.Pb(0,"app-order-items-list",178),n.Wb("openDrawer",(function(){return n.oc(e),n.Yb(2).openProductsList()}))("openReturnedModal",(function(){return n.oc(e),n.Yb(2).openReturnedModal()}))("productUpdated",(function(){return n.oc(e),n.Yb(2).calculateReceivable()}))("deleteReturned",(function(t){return n.oc(e),n.Yb(2).deleteReturnedProduct(t)})),n.Ob()}if(2&e){const e=n.Yb(2);n.ec("currentTab",e.currentTab)("orderDetail",e.orderDetails)("returnAmount",e.returnAmount)("isChequeAdded",e.isChequeAdded)("isCreditAdded",e.isCreditAdded)("receivableAmount",e.receivableAmount)("totalPayment",e.totalPayment)("cheque",e.cheque)("credit",e.credit)("orders",e.spotSaleOrder.retailers)("cash",e.cash)("schemes",e.schemes)("dueAmount",e.dueAmount)("selectedRetailer",e.selectedRetailer)("orderType","execution")("isEdit",e.isEdit)("allProducts",e.inventory)("selectedOrderCreditType",e.isEdit?e.orderDetails.credit_order_type:e.selectedOrderCreditType)("specialDiscounts",e.specialDiscounts)("merchantDiscount",e.merchantDiscount)("newProduct",e.newProduct)("credit_order_type_string",e.credit_order_type_string)("product_type_string",e.product_type_string)("selectedProductType",e.isEdit?1===e.orderDetails.order_context?0:1:e.selectedProductType)}}function ze(e,t){1&e&&(n.Pb(0,"div",74),n.Kb(1,"app-loader-white"),n.Ob())}function $e(e,t){1&e&&(n.Pb(0,"div",145),n.Pb(1,"div",146),n.Kb(2,"img",147),n.Pb(3,"strong"),n.vc(4,"Select order to see details"),n.Ob(),n.Ob(),n.Ob())}function Ve(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",183),n.Wb("click",(function(){n.oc(e);const t=n.Yb(3);return t.isCredit=!1,t.isFullyPaymentAdded("Cheque Payment")})),n.vc(1," Add Cheque "),n.Ob()}}function Ze(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",184),n.Wb("click",(function(){return n.oc(e),n.Yb(3).removeCheque()})),n.vc(1," Remove Cheque "),n.Ob()}}function Ue(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",185),n.Wb("click",(function(){n.oc(e);const t=n.Yb(3);return t.isCredit=!0,t.isFullyPaymentAdded("Credit")})),n.vc(1," Add Credit "),n.Ob()}}function Ge(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",186),n.Wb("click",(function(){return n.oc(e),n.Yb(3).removeCredit()})),n.vc(1," Remove Credit "),n.Ob()}}function He(e,t){1&e&&(n.Pb(0,"button",160),n.vc(1," Show Modal "),n.Ob())}function je(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",148),n.tc(1,Ve,2,0,"button",179),n.tc(2,Ze,2,0,"button",180),n.tc(3,Ue,2,0,"button",181),n.tc(4,Ge,2,0,"button",182),n.tc(5,He,2,0,"button",153),n.Pb(6,"button",154),n.Wb("click",(function(){return n.oc(e),n.Yb(2).saveSpotSaleOrder()})),n.vc(7," Save Order "),n.Ob(),n.Pb(8,"button",155),n.vc(9," Cancel "),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(1),n.ec("ngIf",!e.savingOrder&&!e.isChequeAdded&&e.selectedOrderCreditType===e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.savingOrder&&e.isChequeAdded),n.yb(1),n.ec("ngIf",!e.savingOrder&&!e.isCreditAdded&&e.selectedOrderCreditType===e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.isEdit&&!e.savingOrder&&e.isCreditAdded),n.yb(1),n.ec("ngIf",!e.savingOrder),n.yb(1),n.ec("disabled",!(null!=e.orderDetails&&null!=e.orderDetails.items&&e.orderDetails.items.length||null!=e.orderDetails&&null!=e.orderDetails.returned_items&&e.orderDetails.returned_items.length)),n.yb(2),n.ec("disabled",!e.orderDetails)}}function Xe(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",161),n.Pb(1,"div",123),n.Pb(2,"div",124),n.Pb(3,"div",125),n.Pb(4,"div",126),n.Pb(5,"strong"),n.vc(6,"Date:"),n.Ob(),n.Pb(7,"span",127),n.vc(8),n.Ob(),n.Ob(),n.Ob(),n.Pb(9,"div",128),n.Pb(10,"div",129),n.Pb(11,"strong"),n.vc(12,"Order Booker:"),n.Ob(),n.Pb(13,"b",130),n.vc(14),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"div",128),n.Pb(16,"div",129),n.Pb(17,"strong"),n.vc(18,"Territory:"),n.Ob(),n.Pb(19,"span",131),n.vc(20),n.Ob(),n.Ob(),n.Ob(),n.Pb(21,"div",125),n.Pb(22,"div",126),n.Pb(23,"strong"),n.vc(24,"Total Outlets:"),n.Ob(),n.Pb(25,"span",132),n.vc(26),n.Ob(),n.Ob(),n.Ob(),n.Pb(27,"div",133),n.Pb(28,"div",134),n.Pb(29,"strong"),n.vc(30,"Total Amount:"),n.Ob(),n.Pb(31,"span",135),n.vc(32),n.Zb(33,"number"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(34,"div",74),n.Pb(35,"div",162),n.Pb(36,"div",34),n.Pb(37,"div",163),n.Pb(38,"div",164),n.Pb(39,"div",165),n.Pb(40,"ng-select",166),n.Wb("change",(function(){return n.oc(e),n.Yb().getOrderBookerRoutes()}))("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedOrderBooker=t})),n.tc(41,qe,2,2,"ng-option",64),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(42,Ne,5,2,"div",167),n.tc(43,Ke,5,2,"div",167),n.tc(44,Fe,10,6,"div",167),n.tc(45,Je,8,5,"div",167),n.tc(46,Qe,2,0,"button",168),n.Ob(),n.Ob(),n.Ob(),n.Pb(47,"div",136),n.Pb(48,"div",137),n.Pb(49,"app-retailer-sub-list",169),n.Wb("retailerChanged",(function(t){return n.oc(e),n.Yb().setCurrentSpotSaleOrder(t)})),n.Ob(),n.Ob(),n.Pb(50,"div",139),n.Pb(51,"div",140),n.tc(52,We,1,24,"app-order-items-list",170),n.tc(53,ze,2,0,"div",28),n.tc(54,$e,5,0,"div",142),n.Ob(),n.tc(55,je,10,7,"div",143),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.ec("ngClass",2===e.currentTab?"show active":""),n.yb(8),n.wc(e.spotSaleOrder.date),n.yb(6),n.wc(e.spotSaleOrder.orderBookerName),n.yb(6),n.wc(e.spotSaleOrder.territory),n.yb(6),n.wc(e.spotSaleOrder.retailers.length),n.yb(6),n.xc("Rs. ",n.bc(33,21,e.spotSaleOrder.order_total||0,"1.2-2"),""),n.yb(8),n.ec("ngModel",e.selectedOrderBooker),n.yb(1),n.ec("ngForOf",e.orderBookers),n.yb(1),n.ec("ngIf",e.selectedOrderBooker),n.yb(1),n.ec("ngIf",e.selectedRoute),n.yb(1),n.ec("ngIf",e.spotRetailer),n.yb(1),n.ec("ngIf",e.selectedOrderCreditType&&e.selectedOrderBooker),n.yb(1),n.ec("ngIf",e.spotRetailer&&e.showAddRetailer&&e.selectedOrderCreditType&&e.selectedProductType>-1),n.yb(3),n.ec("retailers",e.spotSaleOrder.retailers)("currentTab",e.currentTab)("orderType","execution")("isSpotSaleActive",e.isSpotSaleActive),n.yb(3),n.ec("ngIf",!e.savingOrder&&e.selectedRetailer),n.yb(1),n.ec("ngIf",e.savingOrder),n.yb(1),n.ec("ngIf",!e.savingOrder&&!e.selectedRetailer),n.yb(1),n.ec("ngIf",!e.savingOrder&&e.selectedRetailer&&(e.selectedOrderCreditType||e.orderDetails.credit_order_type))}}function et(e,t){if(1&e&&(n.Pb(0,"ng-option",77),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e),n.yb(1),n.yc("",e.employee_first_name," ",e.employee_last_name," ")}}function tt(e,t){if(1&e&&(n.Pb(0,"ng-option",77),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.route_id),n.yb(1),n.wc(e.name)}}function it(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",171),n.Pb(1,"div",164),n.Pb(2,"div",165),n.Pb(3,"ng-select",172),n.Wb("change",(function(t){return n.oc(e),n.Yb(2).getRetaielrsByRoute(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).selectedRoute=t})),n.tc(4,tt,2,2,"ng-option",64),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(3),n.ec("ngModel",e.selectedRoute),n.yb(1),n.ec("ngForOf",e.bookerRoutes)}}function rt(e,t){if(1&e&&(n.Pb(0,"ng-option",77),n.vc(1),n.Ob()),2&e){const e=n.Yb().$implicit;n.ec("value",e),n.yb(1),n.xc(" ",e.retailer_name,"")}}function ot(e,t){if(1&e&&(n.Nb(0),n.tc(1,rt,2,2,"ng-option",174),n.Mb()),2&e){const e=t.$implicit;n.yb(1),n.ec("ngIf",!e.isAdded)}}function at(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",171),n.Pb(1,"div",164),n.Pb(2,"div",165),n.Pb(3,"ng-select",173),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).recoveryRetailer=t}))("change",(function(){return n.oc(e),n.Yb(2).setRecoveryRetailer()})),n.tc(4,ot,2,1,"ng-container",80),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(3),n.ec("ngModel",e.recoveryRetailer),n.yb(1),n.ec("ngForOf",e.routeRetailers)}}function nt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",194),n.Wb("click",(function(){n.oc(e);const t=n.Yb().$implicit;return n.Yb(3).addRevoery(t)})),n.vc(1," Add Recovery "),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.ec("disabled",+e.recovery<1)}}function dt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",195),n.Wb("click",(function(){n.oc(e);const t=n.Yb().$implicit;return n.Yb(3).removeRecovery(t)})),n.vc(1," Remove Recovery "),n.Ob()}}function st(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Zb(7,"number"),n.Ob(),n.Pb(8,"td"),n.Pb(9,"input",191),n.Wb("ngModelChange",(function(i){return n.oc(e),t.$implicit.recovery=i}))("keydown",(function(t){return n.oc(e),n.Yb(3).isNumber(t)}))("keyup",(function(){n.oc(e);const i=t.$implicit;return n.Yb(3).checkRecovery(i)})),n.Ob(),n.Ob(),n.Pb(10,"td"),n.tc(11,nt,2,1,"button",192),n.tc(12,dt,2,0,"button",193),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit;n.yb(2),n.wc(e.id),n.yb(2),n.wc(e.retailer_name),n.yb(2),n.xc("Rs. ",n.bc(7,9,e.balance,"1.2-2"),""),n.yb(3),n.fc("name",e.retailer_name),n.fc("id",e.retailer_name),n.ec("readonly",e.recoveryAdded)("ngModel",e.recovery),n.yb(2),n.ec("ngIf",!e.recoveryAdded),n.yb(1),n.ec("ngIf",e.recoveryAdded)}}function ct(e,t){if(1&e&&(n.Pb(0,"table",190),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th"),n.vc(4,"Id"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Retailer Name"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Recovery Amount"),n.Ob(),n.Pb(9,"th"),n.vc(10,"Received Amount"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(13,"tbody"),n.tc(14,st,13,12,"tr",80),n.Ob(),n.Ob()),2&e){const e=n.Yb(2);n.ec("dtOptions",e.dtOPtions),n.yb(14),n.ec("ngForOf",e.recoveryListing)}}function lt(e,t){1&e&&(n.Pb(0,"div",74),n.Kb(1,"app-loader-white"),n.Ob())}function bt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",187),n.Pb(1,"div",74),n.Pb(2,"div",162),n.Pb(3,"div",34),n.Pb(4,"div",171),n.Pb(5,"div",164),n.Pb(6,"div",165),n.Pb(7,"ng-select",166),n.Wb("change",(function(){return n.oc(e),n.Yb().getOrderBookerRoutes()}))("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedOrderBooker=t})),n.tc(8,et,2,3,"ng-option",64),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(9,it,5,2,"div",167),n.tc(10,at,5,2,"div",167),n.Ob(),n.Ob(),n.Ob(),n.Pb(11,"div",188),n.tc(12,ct,15,2,"table",189),n.tc(13,lt,2,0,"div",28),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.ec("ngClass",3===e.currentTab?"show active":""),n.yb(7),n.ec("ngModel",e.selectedOrderBooker),n.yb(1),n.ec("ngForOf",e.orderBookers),n.yb(1),n.ec("ngIf",e.selectedOrderBooker),n.yb(1),n.ec("ngIf",e.selectedRoute),n.yb(2),n.ec("ngIf",!e.isAdded),n.yb(1),n.ec("ngIf",e.isAdded)}}function ut(e,t){if(1&e&&(n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Ob(),n.Pb(7,"td"),n.vc(8),n.Ob(),n.Pb(9,"td"),n.vc(10),n.Ob(),n.Pb(11,"td"),n.vc(12),n.Ob(),n.Pb(13,"td"),n.vc(14),n.Ob(),n.Ob()),2&e){const e=t.$implicit;n.yb(2),n.wc(e.item_id),n.yb(2),n.wc(e.item_name),n.yb(2),n.wc(e.unit_name),n.yb(2),n.wc(e.total_dispatch_qty),n.yb(2),n.wc(e.total_return_qty),n.yb(2),n.wc(e.total_sold_qty),n.yb(2),n.wc(e.total_cancel_qty)}}function pt(e,t){if(1&e&&(n.Pb(0,"table",212),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th"),n.vc(4,"SN"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Product Name"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Unit"),n.Ob(),n.Pb(9,"th"),n.vc(10,"Issue QTY."),n.Ob(),n.Pb(11,"th"),n.vc(12,"Return QTY."),n.Ob(),n.Pb(13,"th"),n.vc(14,"Sold QTY."),n.Ob(),n.Pb(15,"th"),n.vc(16,"Inventory Return"),n.Ob(),n.Ob(),n.Ob(),n.Pb(17,"tbody"),n.tc(18,ut,15,7,"tr",80),n.Ob(),n.Ob()),2&e){const e=n.Yb(3);n.ec("dtOptions",e.dtOPtions),n.yb(18),n.ec("ngForOf",null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.contents)}}function ht(e,t){1&e&&(n.Pb(0,"button",213),n.vc(1," Add Expense "),n.Ob())}function mt(e,t){1&e&&(n.Pb(0,"button",214),n.Pb(1,"div",215),n.Pb(2,"span",84),n.vc(3,"Loading..."),n.Ob(),n.Ob(),n.Ob())}function gt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",216),n.Pb(1,"a",217),n.Wb("click",(function(){return n.oc(e),n.Yb(3).generateDSR()})),n.vc(2,"Generate DSR"),n.Ob(),n.Ob()}}function Ot(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",74),n.Pb(1,"button",218),n.Wb("click",(function(){return n.oc(e),n.Yb(3).checkRecieveable()})),n.vc(2," Mark Complete "),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(3);n.yb(1),n.ec("disabled",0==+e.amountReceived)}}function vt(e,t){1&e&&(n.Pb(0,"div",74),n.Pb(1,"button",219),n.Pb(2,"div",215),n.Pb(3,"span",84),n.vc(4,"Loading..."),n.Ob(),n.Ob(),n.Ob(),n.Ob())}function _t(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",34),n.Pb(1,"div",198),n.Pb(2,"div",199),n.Pb(3,"h2",200),n.vc(4,"Delivery "),n.Pb(5,"span"),n.vc(6," Challan"),n.Ob(),n.Ob(),n.Ob(),n.tc(7,pt,19,2,"table",201),n.Ob(),n.Pb(8,"div",91),n.Pb(9,"div",202),n.Pb(10,"div",203),n.Pb(11,"h2",204),n.vc(12," Cash "),n.Pb(13,"span"),n.vc(14,"Report"),n.Ob(),n.tc(15,ht,2,0,"button",205),n.tc(16,mt,4,0,"button",206),n.Ob(),n.Pb(17,"div",207),n.Pb(18,"strong"),n.vc(19,"Gross Amount:"),n.Ob(),n.Pb(20,"span"),n.vc(21),n.Zb(22,"number"),n.Ob(),n.Ob(),n.Pb(23,"div",207),n.Pb(24,"strong"),n.vc(25,"Trade Offer:"),n.Ob(),n.Pb(26,"span"),n.vc(27),n.Zb(28,"number"),n.Ob(),n.Ob(),n.Pb(29,"div",207),n.Pb(30,"strong"),n.vc(31,"Trade Discount:"),n.Ob(),n.Pb(32,"span"),n.vc(33),n.Zb(34,"number"),n.Ob(),n.Ob(),n.Pb(35,"div",207),n.Pb(36,"strong"),n.vc(37,"Special Discount:"),n.Ob(),n.Pb(38,"span"),n.vc(39),n.Zb(40,"number"),n.Ob(),n.Ob(),n.Pb(41,"div",207),n.Pb(42,"strong"),n.vc(43,"Extra Discount:"),n.Ob(),n.Pb(44,"span"),n.vc(45),n.Zb(46,"number"),n.Ob(),n.Ob(),n.Pb(47,"div",207),n.Pb(48,"strong"),n.vc(49,"Total Tax:"),n.Ob(),n.Pb(50,"span"),n.vc(51),n.Zb(52,"number"),n.Ob(),n.Ob(),n.Pb(53,"div",208),n.Pb(54,"strong"),n.vc(55,"Total Net Sale:"),n.Ob(),n.Pb(56,"span"),n.vc(57),n.Zb(58,"number"),n.Ob(),n.Ob(),n.Pb(59,"div",207),n.Pb(60,"strong"),n.vc(61,"Cash Collected:"),n.Ob(),n.Pb(62,"span"),n.vc(63),n.Zb(64,"number"),n.Ob(),n.Ob(),n.Pb(65,"div",207),n.Pb(66,"strong"),n.vc(67,"Cheque:"),n.Ob(),n.Pb(68,"span"),n.vc(69),n.Zb(70,"number"),n.Ob(),n.Ob(),n.Pb(71,"div",207),n.Pb(72,"strong"),n.vc(73,"Credit:"),n.Ob(),n.Pb(74,"span"),n.vc(75),n.Zb(76,"number"),n.Ob(),n.Ob(),n.Pb(77,"div",207),n.Pb(78,"strong"),n.vc(79,"Recovery:"),n.Ob(),n.Pb(80,"span"),n.vc(81),n.Zb(82,"number"),n.Ob(),n.Ob(),n.Pb(83,"div",207),n.Pb(84,"strong"),n.vc(85,"Expense:"),n.Ob(),n.Pb(86,"span"),n.vc(87),n.Zb(88,"number"),n.Ob(),n.Ob(),n.Pb(89,"div",207),n.Pb(90,"strong"),n.vc(91,"Return Amount:"),n.Ob(),n.Pb(92,"span"),n.vc(93),n.Zb(94,"number"),n.Ob(),n.Ob(),n.Pb(95,"div",208),n.Pb(96,"strong"),n.vc(97,"Net Cash Receivable:"),n.Ob(),n.Pb(98,"span"),n.vc(99),n.Zb(100,"number"),n.Ob(),n.Ob(),n.Pb(101,"div",209),n.Pb(102,"strong"),n.vc(103,"AMT. Received:"),n.Ob(),n.Pb(104,"input",210),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).amountReceived=t}))("keydown",(function(t){return n.oc(e),n.Yb(2).isNumber(t)}))("keyup",(function(){return n.oc(e),n.Yb(2).amountReceivedMax()})),n.Ob(),n.Ob(),n.Pb(105,"div",208),n.Pb(106,"strong"),n.vc(107,"Balance AMT:"),n.Ob(),n.Pb(108,"span"),n.vc(109),n.Zb(110,"number"),n.Ob(),n.Ob(),n.Pb(111,"div",207),n.Pb(112,"div",34),n.tc(113,gt,3,0,"div",211),n.tc(114,Ot,3,1,"div",28),n.tc(115,vt,5,0,"div",28),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(7),n.ec("ngIf",null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.contents),n.yb(8),n.ec("ngIf",!e.isAdded),n.yb(1),n.ec("ngIf",e.isAdded),n.yb(5),n.wc(n.bc(22,22,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_gross_amount,"1.2-2")),n.yb(6),n.wc(n.bc(28,25,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_trade_offer,"1.2-2")),n.yb(6),n.wc(n.bc(34,28,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_trade_discount,"1.2-2")),n.yb(6),n.wc(n.bc(40,31,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_special_discount,"1.2-2")),n.yb(6),n.wc(n.bc(46,34,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_booker_discount,"1.2-2")),n.yb(6),n.wc(n.bc(52,37,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_tax_amount,"1.2-2")),n.yb(6),n.wc(n.bc(58,40,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_net_amount,"1.2-2")),n.yb(6),n.wc(n.bc(64,43,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_cash_amount,"1.2-2")),n.yb(6),n.wc(n.bc(70,46,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_cheque_amount,"1.2-2")),n.yb(6),n.wc(n.bc(76,49,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_credit_amount,"1.2-2")),n.yb(6),n.wc(n.bc(82,52,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_recovered_amount,"1.2-2")),n.yb(6),n.xc("- ",n.bc(88,55,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_expense,"1.2-2"),""),n.yb(6),n.wc(n.bc(94,58,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_return_amount,"1.2-2")),n.yb(6),n.wc(n.bc(100,61,null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_amount_recieveable,"1.2-2")),n.yb(5),n.ec("ngModel",e.amountReceived),n.yb(5),n.wc(n.bc(110,64,(null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_amount_recieveable)-e.amountReceived||0,"1.2-2")),n.yb(4),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",e.loading)}}function Pt(e,t){1&e&&(n.Pb(0,"div",74),n.Kb(1,"app-loader-white"),n.Ob())}function ft(e,t){if(1&e&&(n.Pb(0,"div",196),n.Pb(1,"div",123),n.Pb(2,"div",124),n.Pb(3,"div",125),n.Pb(4,"div",126),n.Pb(5,"strong"),n.vc(6,"Date:"),n.Ob(),n.Pb(7,"span",127),n.vc(8),n.Ob(),n.Ob(),n.Ob(),n.Pb(9,"div",128),n.Pb(10,"div",129),n.Pb(11,"strong"),n.vc(12,"Order Booker:"),n.Ob(),n.Pb(13,"b",130),n.vc(14),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"div",128),n.Pb(16,"div",129),n.Pb(17,"strong"),n.vc(18,"Territory:"),n.Ob(),n.Pb(19,"span",131),n.vc(20),n.Ob(),n.Ob(),n.Ob(),n.Pb(21,"div",125),n.Pb(22,"div",126),n.Pb(23,"strong"),n.vc(24,"Total Outlets:"),n.Ob(),n.Pb(25,"span",132),n.vc(26),n.Ob(),n.Ob(),n.Ob(),n.Pb(27,"div",133),n.Pb(28,"div",134),n.Pb(29,"strong"),n.vc(30,"Total Amount:"),n.Ob(),n.Pb(31,"span",135),n.vc(32),n.Zb(33,"number"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(34,"div",188),n.tc(35,_t,116,67,"div",197),n.tc(36,Pt,2,0,"div",28),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.ec("ngClass",4===e.currentTab?"show active":""),n.yb(8),n.wc((null==e.finalLoad||null==e.finalLoad.dsr||null==e.finalLoad.dsr.executed_date?null:e.finalLoad.dsr.executed_date.split(" ")[0])||"--"),n.yb(6),n.wc("--"),n.yb(6),n.wc((null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.territory)||"--"),n.yb(6),n.wc((null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_orders)||"--"),n.yb(6),n.xc("Rs. ",n.bc(33,8,(null==e.finalLoad||null==e.finalLoad.dsr?null:e.finalLoad.dsr.total_net_amount)||0,"1.2-2"),""),n.yb(3),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",e.loading)}}let yt=(()=>{class e{constructor(e,t,i,r,o,a,n,d,s,c){this.change=e,this.route=t,this.router=i,this.orderService=r,this.executionService=o,this.toastService=a,this.generalDataService=n,this.dataService=d,this.spotSaleService=s,this.storageService=c,this.dtOPtions={},this.credit_order_type_string="",this.product_type_string="",this.ORDER_TYPE=E.a.ORDER_TYPE,this.PRODUCT_TYPE=E.a.PRODCUT_TYPE,this.isEdit=!1,this.isCancel=!1,this.orderDetails={},this.spotSaleOrder={},this.currentSpotSale={},this.recoveryListing=[],this.outOfRouteRecovery=[],this.orderBookers=[],this.bookerRoutes=[],this.routeRetailers=[],this.retailersList=[],this.schemes=[],this.inventory=[],this.allProducts=[],this.executed_products=[],this.specialDiscounts=[],this.discountSlabs=[],this.billsData=null,this.spotSaleOrderId=null}ngOnInit(){this.currentTab=1,this.dtOPtions={pagingType:"simple_numbers"},this.showAddRetailer=!0,this.getSchemesData(),this.setPaymentInitalValues(),this.setSpotSaleOrder(),this.salemanId=+this.route.snapshot.paramMap.get("saleManId"),this.orderDate=this.route.snapshot.paramMap.get("date"),this.selectedLoadId=+this.route.snapshot.paramMap.get("loadId"),this.salemanId&&this.orderDate&&this.selectedLoadId?(this.getOrdersBySalemanAndDate(),this.getOrderBookers()):this.router.navigateByUrl("/orders/execution-list")}setSpotSaleOrder(){this.spotSaleOrder={retailers:[],orders:[],order_total:0,date:(new Date).toISOString().split("T")[0],territory:"--",total_outlets:"--",orderBookerName:"--"}}setPaymentInitalValues(){this.netAmount=0,this.creditAmount=0,this.amountReceived=0,this.chequeAmount=0,this.returnAmount=0,this.dueAmount=0,this.receivableAmount=0,this.recoveryAmount=0,this.totalPayment=0,this.isChequeAdded=!1,this.isCreditAdded=!1,this.paymentDate=(new Date).toISOString().split("T")[0],this.distributorId=this.storageService.getItem("distributor").id}addNewProductToOrder(e){this.newProduct=Object.assign({},e),console.log("product => ",this.newProduct)}getSchemesData(){this.orderService.getSchemes().subscribe(e=>{200===e.status&&(this.schemes=e.data)},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",title:"Error:",message:"Order details not fetched, please try again later!"})})}getOrdersBySalemanAndDate(){this.loading=!0,this.orderService.getExectedOrdersListing(this.salemanId,this.orderDate,this.selectedLoadId).subscribe(e=>{this.loading=!1,200===e.status?(this.retailersList=e.data.retailers,this.retailersList.forEach(e=>e.total=e.order_total),this.allProducts=e.data.all_products,this.loadId=e.data.load_id,this.spotSaleOrder.retailers=e.data.spot_sale_orders,this.spotSaleOrder.retailers.forEach(e=>e.total=e.order_total),this.inventory=e.data.executed_products,this.executed_products=e.data.executed_products,this.specialDiscounts=e.data.special_discount,this.dispatchSummary=e.data.summary,this.recoveryListing=e.data.out_of_route_recovery.map(e=>(e.recovery=e.amount_received,e.retailer_id=e.id,e.recoveryAdded=!0,e)),this.outOfRouteRecovery=e.data.out_of_route_recovery.map(e=>({retailer_id:e.id,amount:e.amount_received,booker_id:e.booker_id})),e.data.is_dsr&&this.changeTab(4)):this.toastService.showToaster({type:"error",title:"Error:",message:"Order details not fetched, please try again later!"})},e=>{this.loading=!1,1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",title:"Error:",message:"Order details not fetched, please try again later!"})})}getOrderBookers(){this.generalDataService.getOrderBookers(this.distributorId).subscribe(e=>{200===e.status&&(this.orderBookers=e.data)},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",title:"Error:",message:"Bookers not fetched, please try again later!"})})}getOrderBookerRoutes(){this.spotSaleOrder.orderBookerName=`${this.selectedOrderBooker.employee_first_name} ${this.selectedOrderBooker.employee_last_name}`,this.selectedRoute=null,this.bookerRoutes=[],this.spotRetailer=null,this.routeRetailers=[],this.generalDataService.getOrderBookerRoutes(this.selectedOrderBooker.employee_id).subscribe(e=>{200===e.status&&(this.bookerRoutes=e.data)},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",title:"Error:",message:"Routes not fetched, please try again later!"})})}getRetaielrsByRoute(e){console.log("routeId =>>>>>>>>> ",e),console.log("selectedOrderBooker =>>>>>>>>> ",this.selectedOrderBooker),this.spotRetailer=null,this.routeRetailers=[],this.generalDataService.getRetailersByRoute(e).subscribe(e=>{200===e.status&&(this.routeRetailers=e.data,this.spotSaleOrder.retailers.length&&(this.routeRetailers=this.routeRetailers.map(e=>(this.spotSaleOrder.retailers.findIndex(t=>t.retailer_id===e.retailer_id)>-1&&(e.isAdded=!0),e))),this.retailersList.length&&(this.routeRetailers=this.routeRetailers.map(e=>(this.retailersList.findIndex(t=>t.retailer_id===e.retailer_id)>-1&&(e.isAdded=!0),e))),console.log(this.routeRetailers))},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",title:"Error:",message:"Retailers not fetched, please try again later!"})})}setSpotSaleRetailer(){var e;if(this.spotSaleOrder.territory=this.spotRetailer.territory,!this.spotSaleOrder.retailers.find(e=>e.retailer_id===this.spotRetailer.retailer_id)){(null===(e=this.spotSaleOrder.retailers)||void 0===e?void 0:e.length)||(this.spotSaleOrder.retailers=[]),this.spotRetailer.isAdded=!0,delete this.spotRetailer.id,this.spotRetailer.region_id=this.selectedOrderBooker.region_id;const t=this.spotSaleService.setSpotSaleOrderContent(this.spotRetailer,this.selectedOrderBooker,this.distributorId);this.spotSaleOrder.orders.push(t);const i=JSON.parse(JSON.stringify(this.spotSaleOrder.retailers));i.push(this.spotRetailer),this.spotSaleOrder.retailers=JSON.parse(JSON.stringify(i)),this.showAddRetailer=!1,this.change.detectChanges()}}getOrderDetailsByRetailer(e){var t;(null===(t=this.selectedRetailer)||void 0===t?void 0:t.id)!==e.id&&(this.savingOrder=!0,this.newProduct=null,this.returnedProduct=null,this.paymentTypeCredit="",this.paymentTypeCheque="",this.resetPaymentValues(),this.setPaymentInitalValues(),this.selectedRetailer=Object.assign({},e),this.orderService.getOrderDetails(e.id).subscribe(e=>{if(this.savingOrder=!1,200===e.status){this.orderDetails=e.data;const t=this.orderDetails.credit_order_type;t==E.a.CREDIT_ORDER_TYPE.Regular_Order&&(this.credit_order_type_string="Regular"),t==E.a.CREDIT_ORDER_TYPE.Credit_Order_Without_Discount&&(this.credit_order_type_string="Credit Without Discount"),t==E.a.CREDIT_ORDER_TYPE.Credit_Order_With_Discount&&(this.credit_order_type_string="Credit With Discount");const i=this.orderDetails.order_context;1===i&&(this.product_type_string="Normal"),2===i&&(this.product_type_string="Exclusive"),this.isEdit=!0,this.setMerchantDiscount(),this.selectedOrderCreditType=this.orderDetails.credit_order_type.toString(),this.orderDetails.credit_order_type=this.orderDetails.credit_order_type.toString(),this.orderDetails.order_context=this.orderDetails.order_context,this.orderDetails.returned_items=this.orderDetails.returned_items,this.recoveryAmount=this.orderDetails.recovery,this.orderDetails.recovered=+this.orderDetails.recovered.toFixed(2),this.orderDetails.payment&&this.orderDetails.payment.length&&this.orderDetails.payment.forEach(e=>{"Cheque"===e.payment_mode?this.setCheque(e):"Credit"===e.payment_mode?this.setCredit(e):"Cash"===e.payment_mode&&this.setCash(e)}),this.orderDetails.returned_items.length?this.setOrderDetailReturnedItems():this.receivableAmount=this.orderDetails.total_amount_after_tax+this.orderDetails.recovered,this.setOrderDetailItems(),this.calculateReceivable()}},e=>{this.savingOrder=!1,1!==e.status&&401!==e.status&&(console.log("Error while getting order detail data :>> ",e.message),this.toastService.showToaster({type:"error",message:"Cannot fetch Order Detail. Please try again",title:"Error:"}))}),this.getDiscountSlabs())}setCash(e){this.selectedRetailer&&(this.cash={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:1===this.currentTab?"Execution":"Spot",payment_mode:"Cash",payment_detail:"",dispatched_bill_amount:0,return_amount:this.returnAmount||0,recovery:0,amount_received:e.amount_received})}setCredit(e){this.paymentTypeCredit=e.amount_received<this.orderDetails.order_total?"partial":"full",this.credit={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:1===this.currentTab?"Execution":"Spot",payment_mode:"Credit",payment_detail:"",dispatched_bill_amount:0,recovery:0,amount_received:e.amount_received},this.isCreditAdded=!0}setCheque(e){this.paymentTypeCheque=e.amount_received<this.orderDetails.order_total?"partial":"full";const t=JSON.parse(e.payment_detail);this.cheque={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:1===this.currentTab?"Execution":"Spot",payment_mode:"Cheque",payment_detail:{cheque_amount:e.amount_received,bank_name:t.bank_name,cheque_number:t.cheque_number,cheque_date:t.cheque_date},dispatched_bill_amount:0,recovery:0,amount_received:e.amount_received},this.isChequeAdded=!0}setOrderDetailReturnedItems(){this.orderDetails.returned_items=this.orderDetails.returned_items.map(e=>(e.item_trade_price=e.original_price,e.stockQty=e.quantity_returned,e.extra_discount=e.booker_discount,e.extra_discount_pkr=e.booker_discount*e.quantity_returned,e.productType="returned",e.special_discount_pkr=0,e.trade_discount=0,e.trade_discount_pkr=0,e.net_amount=e.final_price,e.gross_amount=e.gross_sale_amount,e.original_amount=e.gross_sale_amount,e))}setOrderDetailItems(){this.orderDetails.items=this.orderDetails.items.map(e=>{const t=this.inventory.find(t=>t.item_id===e.item_id);return e.parent_trade_price=(null==t?void 0:t.parent_trade_price)||0,e.parent_unit_id=JSON.parse(JSON.stringify(t.parent_unit_id)),e.parent_quantity=JSON.parse(JSON.stringify(t.quantity)),e.child=JSON.parse(JSON.stringify(t.child)),e.item_retail_price=JSON.parse(JSON.stringify(t.item_retail_price)),e.extra_discount=JSON.parse(JSON.stringify(e.booker_discount)),e.tax_class_amount=JSON.parse(JSON.stringify(t.tax_class_amount)),e.tax_class_id=JSON.parse(JSON.stringify(t.tax_class_id)),e.tax_class_type=JSON.parse(JSON.stringify(t.tax_class_type)),e.pref_id=JSON.parse(JSON.stringify(t.pref_id)),e.unit_id=JSON.parse(JSON.stringify(t.unit_id)),e.unit_name=JSON.parse(JSON.stringify(t.unit_name)),e.brand_id=JSON.parse(JSON.stringify(t.brand_id)),e.is_active=JSON.parse(JSON.stringify(t.is_active)),e.item_trade_price=JSON.parse(JSON.stringify(t.item_trade_price)),e.stockQty=JSON.parse(JSON.stringify(e.executed_qty)),e.net_amount=JSON.parse(JSON.stringify(e.final_price)),e.gross_amount=e.item_trade_price*e.stockQty,e.extra_discount_pkr=e.stockQty*e.extra_discount,e.original_amount=e.item_trade_price*e.stockQty,e.special_discount_pkr=e.special_discount,e.trade_discount=JSON.parse(JSON.stringify(e.merchant_discount)),e.trade_discount_pkr=JSON.parse(JSON.stringify(e.merchant_discount_pkr)),e.tax_amount_pkr=JSON.parse(JSON.stringify(e.total_tax_amount||0)),e.selectedScheme=this.schemes.find(t=>t.id===e.scheme_id),e}),this.orderDetails.items=this.orderDetails.items.filter(e=>e)}setCurrentSpotSaleOrder(e){this.isSpotSaleActive?(this.isEdit=!1,this.toastService.showToaster({type:"error",message:"Please complete the current order to move forward!",title:"Spot Sale Error:"})):e.id?(this.isSpotSaleActive=!0,this.getOrderDetailsByRetailer(e)):(this.resetPaymentValues(),this.setPaymentInitalValues(),this.selectedRetailer=Object.assign({},e),this.isSpotSaleActive=!0,this.orderDetails=this.spotSaleOrder.orders.find(t=>t.retailer_id===e.retailer_id),this.getDiscountSlabs(),this.newProduct=null)}getDiscountSlabs(){this.discountSlabs.length?this.setMerchantDiscount():this.orderService.getDiscountSlabs().subscribe(e=>{200===e.status&&(this.discountSlabs=e.data,console.log("setMerchantDiscount this.selectedProductType =>>>",this.selectedProductType),this.setMerchantDiscount())},e=>{1!==e.status&&401!==e.status&&(console.log("Error while getting order detail data :>> ",e.message),this.toastService.showToaster({type:"error",message:"Cannot fetch Merchant Discounts. Please try again",title:"Error:"}))})}onRetailerCahange(){console.log("this.selectedRetailer => ",this.selectedRetailer)}setMerchantDiscount(){const e=this.dataService.getSlabNormalOrExclusive(this.isEdit?this.orderDetails.order_context:this.selectedProductType);let t={region_id:0,segment_id:0,channel_id:0};this.selectedRetailer&&(t.region_id=this.selectedRetailer.region_id,t.segment_id=this.selectedRetailer.segment_id,t.channel_id=this.selectedRetailer.retailer_type_id||this.selectedRetailer.type_id),this.spotRetailer&&(t.region_id=this.spotRetailer.region_id,t.segment_id=this.spotRetailer.segment_id,t.channel_id=this.spotRetailer.retailer_type_id||this.spotRetailer.type_id),this.merchantDiscount=this.discountSlabs.find(i=>i.region_id===t.region_id&&t.segment_id===i.segment_id&&i.channel_id===t.channel_id&&i.slab_type===e),this.merchantDiscount&&!this.dataService.isSlabApplyAble(this.isEdit?this.orderDetails.order_context:this.selectedProductType,this.merchantDiscount.slab_type)&&(this.merchantDiscount=null),console.log("this.merchantDiscount =>>> ",this.merchantDiscount)}handleReturnedProduct(e){this.orderDetails.returned_items.push(e),this.calculateReceivable(),console.log("handleReturnedProduct => ",this.orderDetails.returned_items),console.log("returnedProduct => ",e)}deleteReturnedProduct(e){var t;e.id?(null===(t=this.inventory.find(t=>t.item_id===e.item_id))||void 0===t?void 0:t.available_qty)>=e.quantity_returned||"damage"===e.return_type?(e.stockQty=0,e.isDeleted=!0):this.toastService.showToaster({title:"Returned Product:",message:"The selected product is part of other order please remove from other orders and delete!",type:"error"}):this.orderDetails.returned_items=this.orderDetails.returned_items.filter(t=>t.item_id!==e.item_id),document.getElementById("close-prod-del").click(),this.calculateReceivable()}calculateReceivable(){const e=this.orderDetails.returned_items.filter(e=>!e.isDeleted).map(e=>e.net_amount),t=this.orderDetails.returned_items.filter(e=>!e.isDeleted).map(e=>e.stockQty*((e.item_retail_price|e.total_retail_price/e.quantity_returned)*(e.tax_class_amount|e.tax_in_percentage))/100).reduce((e,t)=>e+t,0);this.returnAmount=t>0?this.dataService.calculateItemsBill(e)-(t||0):this.dataService.calculateItemsBill(e)+(t||0);const i=this.orderDetails.items.map(e=>e.net_amount);this.netAmount=this.dataService.calculateItemsBill(i),this.dueAmount=this.netAmount+this.returnAmount,this.receivableAmount=this.netAmount+this.orderDetails.recovered+this.returnAmount,this.selectedRetailer.order_total=this.dueAmount,2===this.currentTab&&(this.spotSaleOrder.retailers.find(e=>e.retailer_id===this.selectedRetailer.retailer_id).order_total=this.dueAmount),this.calculatePayments()}openProductsList(){this.isPaymentAdded()||(this.showProducts=!0,document.body.classList.add("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.add("d-block"),document.getElementById("order-container").classList.add("blur-div"))}isPaymentAdded(){return!(!this.isChequeAdded&&!this.isCreditAdded||(this.toastService.showToaster({title:"Payment Added:",message:"Please remove the payment to proceed!",type:"error"}),0))}closeNewProducts(){this.showProducts=!1,document.body.classList.remove("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.remove("d-block"),document.getElementById("order-container").classList.remove("blur-div")}openReturnedModal(){this.isPaymentAdded()||(this.showReturned=!0)}closeReturnedModal(){this.showReturned=!1}changeTab(e){this.currentTab=e,1===this.currentTab&&(this.retailersList=this.retailersList.map(e=>(e.isActive=!1,e)),this.selectedRetailer=null,this.orderDetails=null),2===this.currentTab?(this.orderDetails=null,this.selectedRetailer=null,this.spotRetailer=null,this.orderDetails=null,this.isEdit=!1,this.selectedOrderCreditType=null,this.selectedProductType=void 0,this.resetPaymentValues(),this.setPaymentInitalValues()):3===this.currentTab?(this.selectedOrderBooker=null,this.selectedRoute=null,this.recoveryRetailer=null):4===this.currentTab&&(this.isAdded=!1,this.getExecutionFinalLoad(),this.getOrderBookers()),console.log("tab => ",this.currentTab)}focused(e){e.target.parentElement.classList.add("focused")}left(e){e.target.value||e.target.parentElement.classList.remove("focused")}isNumber(e){return this.dataService.isNumber(e)}isFullyPaymentAdded(e){if(this.receivableAmount<=0){const e={type:"error",message:`Your receivable amount (${this.receivableAmount.toFixed(2)}) is not enough to add payment!`,title:"Payment cannot be added"};this.toastService.showToaster(e)}else"Credit"===e?this.paymentTypeCredit="":this.paymentTypeCheque="",this.selectedRetailer?"full"!==this.paymentTypeCheque&&"full"!==this.paymentTypeCredit||this.addedPayment===e?document.getElementById("open-modal-payment").click():this.toastService.showToaster({type:"error",message:`You already selected Full payment for ${this.addedPayment} please remove it if you want to add ${this.currentPayment}!`,title:"Full Payment selected for "+this.addedPayment}):this.toastService.showToaster({type:"error",message:"Please select order to add payment details!",title:"Payment cannot be added"})}currentFullPayment(e,t){"full"!==this.paymentTypeCheque&&"full"!==this.paymentTypeCredit||this.addedPayment===e?(this.addedPayment=e,this.currentPayment=t):this.toastService.showToaster({type:"error",message:`You already selected Full payment for ${this.addedPayment} please remove it if you want to add ${this.currentPayment}!`,title:"Full Payment selected for "+this.addedPayment})}setPartial(e){e===this.addedPayment&&(this.credit&&"Credit"===e&&(this.cash.amount_received=this.cash.amount_received+this.credit.amount_received,this.credit.amount_received=0),this.cheque&&"Cheque Payment"===e&&(this.cash.amount_received=this.cash.amount_received+this.cheque.amount_received,this.cheque.amount_received=0),this.addedPayment="",this.currentPayment="",this.alreadyFullPayment=!1)}checkPaymentHasValues(){return this.isCredit?"full"===this.paymentTypeCredit?this.paymentTypeCredit.length>0:this.paymentTypeCredit.length>0&&this.creditAmount>-1&&this.creditAmount<=this.dueAmount-(this.cheque?this.cheque.amount_received:0):"full"===this.paymentTypeCheque?this.paymentTypeCheque.length>0&&this.bankName.length>0&&this.chequeNumber.length>0&&this.paymentDate.length>0:this.paymentTypeCheque.length>0&&this.chequeAmount>-1&&this.chequeAmount<=this.cash.amount_received&&this.bankName.length>0&&this.chequeNumber.length>0&&this.paymentDate.length>0}removeCheque(){this.cheque=null,this.isChequeAdded=!1,this.paymentTypeCheque="",this.calculatePayments()}removeCredit(){this.credit=null,this.isCreditAdded=!1,this.paymentTypeCredit="",this.calculatePayments()}makePayment(){this.isCredit&&(this.credit={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:1===this.currentTab?"Execution":"Spot",payment_mode:"Credit",payment_detail:"",dispatched_bill_amount:0,recovery:0,amount_received:"full"===this.paymentTypeCredit?JSON.parse(JSON.stringify(this.dueAmount-(this.cheque?this.cheque.amount_received:0))):JSON.parse(JSON.stringify(this.creditAmount))},this.isCreditAdded=!0),this.isCredit||(this.cheque={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:1===this.currentTab?"Execution":"Spot",payment_mode:"Cheque",payment_detail:{cheque_amount:"full"===this.paymentTypeCheque?JSON.parse(JSON.stringify(this.receivableAmount)):JSON.parse(JSON.stringify(this.chequeAmount)),bank_name:JSON.parse(JSON.stringify(this.bankName)),cheque_number:JSON.parse(JSON.stringify(this.chequeNumber)),cheque_date:JSON.parse(JSON.stringify(this.paymentDate))},dispatched_bill_amount:0,recovery:0,amount_received:"full"===this.paymentTypeCheque?JSON.parse(JSON.stringify(this.receivableAmount)):JSON.parse(JSON.stringify(this.chequeAmount))},this.isChequeAdded=!0),this.calculatePayments()}addPaymentMethod(){this.isAdded=!0,this.checkPaymentHasValues()&&(this.isAdded=!1,this.makePayment(),document.getElementById("open-modal-payment").click())}paymentCancelled(){this.isAdded=!1,this.paymentTypeCredit="",this.paymentTypeCheque=""}resetPaymentValues(){this.chequeAmount=null,this.paymentDate=(new Date).toISOString().split("T")[0],this.bankName="",this.chequeNumber=null,this.creditAmount=null,this.cash=null,this.cheque=null,this.credit=null}calculatePayments(){this.cash={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:1===this.currentTab?"Execution":"Spot",payment_mode:"Cash",payment_detail:"",dispatched_bill_amount:0,return_amount:this.returnAmount||0,recovery:0,amount_received:Math.round(100*(this.receivableAmount+Number.EPSILON))/100},this.cheque&&(this.cheque.return_amount=this.returnAmount||0,this.cash.amount_received=this.cash.amount_received-this.cheque.amount_received),this.credit&&(this.credit.return_amount=this.returnAmount||0,this.cash.amount_received=this.cash.amount_received-this.credit.amount_received),this.totalPayment=this.cheque?this.cash.amount_received+this.cheque.amount_received:this.cash.amount_received,2===this.currentTab&&(this.spotSaleOrder.retailers.find(e=>e.retailer_id===this.selectedRetailer.retailer_id).order_total=this.dueAmount),this.selectedRetailer.order_total=this.dueAmount,1===this.currentTab&&(this.retailersList.find(e=>e.id===this.selectedRetailer.id).order_total=this.dueAmount),2===this.currentTab&&(this.spotSaleOrder.retailers.find(e=>e.retailer_id===this.selectedRetailer.retailer_id).order_total=this.dueAmount),this.orderDetails.order_total=this.dueAmount,this.orderDetails.total_amount_after_tax=this.dueAmount}saveExecutionQuantity(){this.orderDetails.items=this.executionService.setOrderPayloadItems(this.orderDetails,this.selectedRetailer),this.orderDetails.returned_items=this.executionService.setOrderPayloadReturnedItems(this.orderDetails,this.selectedRetailer),this.cash.amount_received=this.cash.amount_received>-1?this.cash.amount_received:this.netAmount,this.orderDetails.payment={total_payment:this.totalPayment>-1?this.totalPayment:this.netAmount,detail:[this.cash]},this.credit&&this.orderDetails.payment.detail.push(this.credit),this.cheque&&this.orderDetails.payment.detail.push(this.cheque),this.savingOrder=!0,this.orderDetails.order_context=this.selectedProductType,this.orderService.saveExecutionQuantityOrder(this.orderDetails).subscribe(e=>{if(this.savingOrder=!1,200===e.status){this.executed_products=e.data.executed_products,this.toastService.showToaster({message:`Order for ${this.selectedRetailer.retailer_name.toUpperCase()} execution updated successfully!`,title:"Order execution:",type:"success"});const t=this.retailersList.findIndex(t=>t.retailer_id===e.data.order.retailer_id);this.retailersList[t].total=e.data.order.total_amount_after_tax,this.newProduct=null,this.orderDetails.items=[],this.orderDetails.returned_items=[],this.isEdit=!1,this.selectedOrderBooker=null,this.selectedRetailer.isActive=!1,1===this.currentTab&&(this.retailersList.find(e=>e.id===this.selectedRetailer.id).isActive=!1),2===this.currentTab&&(this.spotSaleOrder.retailers.find(e=>e.id===this.selectedRetailer.id).isActive=!1),this.selectedRetailer=null,this.resetPaymentValues(),this.setPaymentInitalValues()}},e=>{this.savingOrder=!1,1!==e.status&&401!==e.status&&(console.log("Error in Save Order for execution ::>> ",e),this.toastService.showToaster({message:"Something went wrong execution cannot be save at the moment!",title:"Error:",type:"error"}))})}openBillsModal(){document.getElementById("billsPrintPaperModalTrigger").click()}getBills(e="A4"){document.getElementById("close-bills").click(),window.open(`${E.a.apiDomain}${A.a.BILLS}?type=bill&emp=${this.billsData.salesman_id}&date=${this.billsData.order_date}&dist_id=${this.billsData.distributorId}&size=${e}&status=processed&orderID=${this.spotSaleOrderId}`,"_blank")}saveSpotSaleOrder(){if(this.orderDetails.items.map(e=>e.stockQty).filter(e=>!e).length)return this.toastService.showToaster({message:"Please provide quantities for all the items",title:"Error:",type:"error"});this.savingOrder=!0,this.orderDetails.load_id=this.loadId,this.orderDetails.processed_at=this.orderDate,this.orderDetails.processed_by=this.distributorId,this.orderDetails.sales_man_id=this.salemanId,this.orderDetails.dispatched_by=this.distributorId,this.orderDetails.dispatched_at=this.orderDate,this.orderDetails.status=this.selectedOrderCreditType===this.ORDER_TYPE.Regular_Order?"Processed":E.a.Creditsale_Satatus,this.orderDetails.status_code=this.selectedOrderCreditType===this.ORDER_TYPE.Regular_Order?0:5,this.billsData={load_id:this.loadId,distributorId:this.distributorId,salesman_id:this.salemanId,order_date:this.orderDate},this.orderDetails.items=this.executionService.setOrderPayloadItems(this.orderDetails,this.selectedRetailer),this.orderDetails.returned_items=this.executionService.setOrderPayloadReturnedItems(this.orderDetails,this.selectedRetailer),this.orderDetails.payment={total_payment:this.totalPayment,detail:[this.cash]},this.credit&&this.orderDetails.payment.detail.push(this.credit),this.cheque&&this.orderDetails.payment.detail.push(this.cheque),this.orderDetails.credit_order_type=Number(this.isEdit?this.orderDetails.credit_order_type:this.selectedOrderCreditType),this.selectedOrderCreditType!==this.ORDER_TYPE.Regular_Order&&(this.creditEntry={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:1===this.currentTab?"Execution":"Spot",payment_mode:"Credit",payment_detail:"",dispatched_bill_amount:0,recovery:0,amount_received:this.totalPayment},this.orderDetails.payment.detail.push(this.creditEntry)),this.orderDetails.order_context=this.isEdit?this.orderDetails.order_context:1===this.selectedProductType?0:1,this.orderService.saveSpotSaleOrder(this.orderDetails).subscribe(e=>{if(this.savingOrder=!1,this.isSpotSaleActive=!1,200===e.status){this.openBillsModal();const t={type:"success",message:`Spot Sale for ${this.selectedRetailer.retailer_name.toUpperCase()} saved successfully!`,title:"Spot Sale Saved:"};this.newProduct=null,this.toastService.showToaster(t),this.inventory=e.data.executed_products,this.selectedRetailer.id=e.data.order.retailer_id;const i=this.spotSaleOrder.orders.findIndex(e=>e.retailer_id===this.orderDetails.retailer_id),r=this.spotSaleOrder.retailers.findIndex(e=>e.retailer_id===this.selectedRetailer.retailer_id);this.spotSaleOrder.retailers[r].id=e.data.order.id,this.spotSaleOrder.retailers[r].total=e.data.order.order_total,this.spotSaleOrder.orders[i]=JSON.parse(JSON.stringify(e.data.order)),this.orderDetails=JSON.parse(JSON.stringify(e.data.order));const o=this.spotSaleOrder.orders.find(e=>0===e.order_total);this.showAddRetailer=!o,this.selectedOrderBooker=null,this.setOrderDetailItems(),this.setOrderDetailReturnedItems(),this.selectedRetailer=null,this.orderDetails=null,this.selectedOrderCreditType="",this.selectedProductType=void 0,this.spotRetailer=null,this.selectedOrderBooker=null,this.selectedRoute=null,this.isEdit=!1,this.isSpotSaleActive=!1}},e=>{this.savingOrder=!1,this.isSpotSaleActive=!1})}validateCancel(){var e;if(null===(e=this.orderDetails.returned_items)||void 0===e?void 0:e.length){let e=!0;const t=this.orderDetails.returned_items.find(t=>{var i;if((null===(i=this.inventory.find(e=>e.item_id===t.item_id))||void 0===i?void 0:i.available_qty)<t.quantity_returned&&"damage"!==t.return_type)return e=!1,t});return!e&&t&&this.toastService.showToaster({title:"Returned Product:",message:"The selected order has returned products which or part of other orders, cannot cancel the order!",type:"error"}),e}return!0}cancelOrder(){document.getElementById("close-del").click(),this.validateCancel()&&(this.savingOrder=!0,this.orderService.canceleExecutionOrder(this.orderDetails.id).subscribe(e=>{this.savingOrder=!1,200===e.status&&(this.toastService.showToaster({message:`Order for ${this.selectedRetailer.retailer_name.toUpperCase()} canceled!`,title:"Order Execution:",type:"success"}),this.newProduct=null,this.selectedRetailer=null,this.orderDetails.items=[],this.setPaymentInitalValues(),this.getOrdersBySalemanAndDate())},e=>{this.savingOrder=!1,1!==e.status&&401!==e.status&&(console.log("Error in Save Order for dispatch ::>> ",e),this.toastService.showToaster({message:"Something went wrong order cannot be canceled at the moment!",title:"Error:",type:"error"}))}))}cancelSpotSale(){this.orderDetails.id?this.cancelSpotSaleOrder():(this.removeSpotOrder(),document.getElementById("close-del").click())}cancelSpotSaleOrder(){document.getElementById("close-del").click(),this.validateCancel()&&(this.savingOrder=!0,this.orderService.cancelSpotSaleOrder(this.orderDetails.id).subscribe(e=>{this.savingOrder=!1,this.isSpotSaleActive=!1,200===e.status&&(this.toastService.showToaster({message:`Order for ${this.selectedRetailer.retailer_name.toUpperCase()} canceled!`,title:"Spot Order:",type:"success"}),this.newProduct=null,this.inventory=e.data.executed_products,this.removeSpotOrder())},e=>{this.savingOrder=!1,this.isSpotSaleActive=!1,1!==e.status&&401!==e.status&&(console.log("Error in cancel spot sale Order ::>> ",e),this.toastService.showToaster({message:"Something went wrong order cannot be canceled at the moment!",title:"Error:",type:"error"}))}))}removeSpotOrder(){this.selectedRetailer.isAdded=!1,this.spotSaleOrder.retailers=this.spotSaleOrder.retailers.filter(e=>e.retailer_id!==this.selectedRetailer.retailer_id),this.spotSaleOrder.orders=this.spotSaleOrder.orders.filter(e=>e.retailer_id!==this.selectedRetailer.retailer_id),this.orderDetails.items=[],this.orderDetails.returned_items=[],this.isSpotSaleActive=!1,this.selectedRetailer=null;const e=this.spotSaleOrder.orders.find(e=>0===e.order_total);this.showAddRetailer=!e,this.resetPaymentValues(),this.setPaymentInitalValues()}getExecutionFinalLoad(){this.loading=!0,this.orderService.getExecutionFinalLoad(this.loadId,this.outOfRouteRecovery).subscribe(e=>{this.loading=!1,200===e.status&&(this.finalLoad=e.data,this.recoveryListing=e.data.out_of_route_recovery.map(e=>(e.recovery=e.amount_received,e.retailer_id=e.id,e.recoveryAdded=!0,e)),this.outOfRouteRecovery=e.data.out_of_route_recovery.map(e=>({retailer_id:e.id,amount:e.amount_received,booker_id:e.booker_id})))},e=>{this.loading=!1,1!==e.status&&401!==e.status&&(console.log("Error while fetching execution delivery challan :>> ",e),this.toastService.showToaster({message:"Delivery challan not fetched, please try again later!",title:"Delivery Challan Error:",type:"error"}))})}getExpense(e){return this.finalLoad.expense_types.find(t=>t.id===e).name}addExpense(e,t){if(e.value&&t.value){const i=JSON.parse(JSON.stringify(this.finalLoad.expense_detail)),r=i.findIndex(t=>t.expense_type===+e.value);r>-1?i[r].amount=t.value:i.push({expense_type:+e.value,amount:+t.value}),e.value="",t.value="",this.finalLoad.expense_detail=JSON.parse(JSON.stringify(i)),this.setIsExpenseAdded()}else this.toastService.showToaster({type:"error",title:"Expense Error:",message:"Please select expense type and add amount!"})}removeExpense(e){this.finalLoad.expense_detail=this.finalLoad.expense_detail.filter(t=>t.expense_type!==e),this.setIsExpenseAdded()}setIsExpenseAdded(){this.isExpenseAdded=!0,setTimeout(()=>{this.isExpenseAdded=!1},500)}saveExpense(){document.getElementById("close-expense").click(),this.isAdded=!0,this.finalLoad.expense_detail=this.finalLoad.expense_detail.map(e=>({expense_type:+e.expense_type,amount:+e.amount})),this.orderService.saveExecutionExpense(this.loadId,this.salemanId,this.orderDate,this.finalLoad.expense_detail).subscribe(e=>{this.isAdded=!1,200===e.status&&(this.toastService.showToaster({title:"Expense Saved:",message:"Expense saved successfully!",type:"success"}),this.finalLoad=e.data)},e=>{this.isAdded=!1,1!==e.status&&401!==e.status&&(console.log("Error while saving expenses :>> ",e),this.toastService.showToaster({title:"Expense Error:",message:"Expense not saved, please try again before marking complete!",type:"error"}))})}checkRecovery(e){+e.recovery>e.balance&&(this.toastService.showToaster({title:"Recovery Error:",message:"Recovered amount cannot be greater than credit!",type:"error"}),e.recovery=0)}setRecoveryRetailer(){this.isAdded=!0,this.orderService.checkBalance(this.recoveryRetailer.retailer_id).subscribe(e=>{this.isAdded=!1,e.status&&(e.data[0].balance>0?(this.recoveryRetailer.isAdded=!0,this.recoveryRetailer.balance=e.data[0].balance,this.recoveryRetailer.recovery=0,this.recoveryRetailer.recoveryAdded=!1,this.recoveryListing.push(this.recoveryRetailer),this.isAdded=!1):this.toastService.showToaster({title:"Recovery:",message:this.recoveryRetailer.retailer_name.toUpperCase()+" has no credit to add recovery!",type:"error"}))})}addRevoery(e){e.recoveryAdded=!0,this.outOfRouteRecovery.push({retailer_id:e.retailer_id,amount:+e.recovery,booker_id:e.booker_id||this.selectedOrderBooker.employee_id})}removeRecovery(e){e.order_payment_id?this.orderService.removeOutOfRuoteRecovery(e.order_payment_id).subscribe(t=>{200===t.status&&this.resetRecoveryValues(e)}):this.resetRecoveryValues(e)}resetRecoveryValues(e){this.isAdded=!0,e.recoveryAdded=!1,e.recovery=0,this.outOfRouteRecovery=this.outOfRouteRecovery.filter(t=>t.retailer_id!==e.retailer_id),this.recoveryListing=this.recoveryListing.filter(t=>t.retailer_id!==e.retailer_id),setTimeout(()=>{this.isAdded=!1},500)}checkRecieveable(){0==+this.amountReceived?this.toastService.showToaster({title:"Execution Error:",message:"Please add received amount!",type:"error"}):document.getElementById("show-complete").click()}amountReceivedMax(){const e=this.finalLoad.dsr.total_amount_recieveable.toFixed(2);+this.amountReceived>+e&&(this.toastService.showToaster({title:"Execution Error:",message:`Received amount cannot be greater than ${this.finalLoad.dsr.total_amount_recieveable}!`,type:"error"}),this.amountReceived=0)}markCompelet(){var e,t,i,r;document.getElementById("close-complete").click(),this.loading=!0,console.log(" this.finalLoad => ",this.finalLoad),this.orderService.markCompeleteExecution(this.loadId,+this.amountReceived,this.finalLoad.dsr.id,this.finalLoad.dsr.salesman_id,null===(t=null===(e=this.finalLoad)||void 0===e?void 0:e.dsr)||void 0===t?void 0:t.total_net_after_recovery,(null===(r=null===(i=this.finalLoad)||void 0===i?void 0:i.dsr)||void 0===r?void 0:r.total_amount_recieveable)-this.amountReceived).subscribe(e=>{this.loading=!1,200===e.status&&(this.toastService.showToaster({title:"Execution Completed:",message:"Execution completed successfully!",type:"success"}),this.router.navigateByUrl("/orders/execution-list"))},e=>{this.loading=!1,console.log("Execution complete Error :>> ",e),1!==e.status&&401!==e.status&&this.toastService.showToaster({title:"Execution Error:",message:"Execution not completed, please try again later!",type:"error"})})}generateDSR(){window.open(`${E.a.baseUrl}${A.a.DSR_PDF}/${this.finalLoad.dsr.id}`)}ngOnDestroy(){this.change.detach()}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(n.h),n.Jb(a.a),n.Jb(a.f),n.Jb(c.a),n.Jb($),n.Jb(l.a),n.Jb(s.b),n.Jb(s.a),n.Jb(V),n.Jb(K.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-execute-order"]],decls:114,vars:21,consts:[["id","order-del","tabindex","-1","role","dialog","aria-labelledby","orderLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top-borderRed"],[1,"modal-header"],["id","orderLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"modal-footer","border-0"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","submit","id","close-del","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],["id","order-complete","tabindex","-1","role","dialog","aria-labelledby","orderCompleteLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-content"],["type","button",1,"btn","btn-primary",3,"click"],["type","submit","id","close-complete","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],["hidden","","data-target","#order-complete","data-toggle","modal","id","show-complete"],["id","expenseModal","tabindex","-1","role","dialog","aria-labelledby","expenseLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered",2,"max-width","850px"],[1,"modal-content","top-borderBlue"],["id","expnseLabel",1,"modal-title"],["class","modal-body",4,"ngIf"],["type","button","id","close-expense","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],[3,"selectedRetailer","selectedOrderCreditType","orderType","orderedProducts","loadingProducts","allProducts","executedProducts","productSchemes","productMerchantDiscount","specialDiscounts","selectedProductType","drawerClosed","productSelected",4,"ngIf"],[3,"productsList","orderReturnedItems","productReturned","closeReturned",4,"ngIf"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-content","top_border"],["class","modal-header",4,"ngIf"],["class","col-12",4,"ngIf"],["id","floating-label","class","form-wrap p-0",4,"ngIf"],["class","form-wrap p-10",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","close-payment-modal","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel",3,"click"],["id","order-container",1,"container","mw-1280"],[1,"row"],[1,"card","daily-operations"],["id","pills-tab","role","tablist",1,"nav","nav-pills","nav_M","mb-3"],[1,"nav-item"],["id","pills-home-tab",1,"nav-link",3,"ngClass"],[1,"wz-icon"],[1,"fa","fa-list-ul"],["id","pills-sale-tab",1,"nav-link",3,"ngClass"],[1,"fa","fa-dollar-sign"],["id","pills-load-tab",1,"nav-link",3,"ngClass"],[1,"fa","fa-redo"],["id","pills-final-tab",1,"nav-link",3,"ngClass"],[1,"fa","fa-check"],["id","pills-tabContent",1,"tab-content"],["class","tab-pane tab_M p-0 PT-10 fade","id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",3,"ngClass",4,"ngIf"],["class","tab-pane tab_M p-0 PT-10 fade","id","pills-sale","role","tabpanel","aria-labelledby","pills-sale-tab",3,"ngClass",4,"ngIf"],["class","tab-pane tab_M p-0 PT-20 fade","id","pills-load","role","tabpanel","aria-labelledby","pills-load-tab",3,"ngClass",4,"ngIf"],["class","tab-pane tab_M p-0 PT-10 fade","id","pills-final","role","tabpanel","aria-labelledby","pills-final-tab",3,"ngClass",4,"ngIf"],[1,"col-md-12","text-center"],[1,"execFooter"],["type","submit",1,"btn","btn-primary","m-0","mr-2",3,"disabled","click"],["type","submit",1,"btn","btn-primary","m-0",3,"disabled","click"],["data-toggle","modal","data-target","#billsModalCounterSale","id","billsPrintPaperModalTrigger","hidden","",1,"btn","btn-default","mb-0"],[1,"row","mb-20"],[1,"col-md-4","pr-0"],[1,"font12","mb-5"],["data-select2-id","39",1,"form-s2","focused"],["id","expense_type","placeholder","Expense Type","tabindex","-1","aria-hidden","true","value","",1,"form-control","formselect","expense_id","select2-hidden-accessible",2,"width","100%","font-size","12px"],["expenseType",""],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3","pr-0"],[1,"form-group","focused"],[1,"control-label"],["type","number","id","expense-amount","placeholder","",1,"form-control","expense_amount",3,"keydown"],["expenseAmount",""],[1,"col-2",2,"padding-top","29px"],["type","button",1,"btn","btn-primary","add_expense_btn",3,"click"],[1,"expense_table"],["id","expenseAddedTable_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"col-12"],["class","table","datatable","","id","expenseAddedTable","style","width: 100%","role","grid","aria-describedby","expenseAddedTable_info",3,"dtOptions",4,"ngIf"],["class","col-md-12","style","text-align: center; padding: 30px",4,"ngIf"],[3,"value"],["datatable","","id","expenseAddedTable","role","grid","aria-describedby","expenseAddedTable_info",1,"table",2,"width","100%",3,"dtOptions"],["role","row"],[4,"ngFor","ngForOf"],[1,"btn","btn-default","red-bg","mb-0","remove_expense",3,"id","click"],[1,"col-md-12",2,"text-align","center","padding","30px"],["role","status",1,"spinner-border",2,"width","5rem","height","5rem","color","#0038ba"],[1,"sr-only"],[3,"selectedRetailer","selectedOrderCreditType","orderType","orderedProducts","loadingProducts","allProducts","executedProducts","productSchemes","productMerchantDiscount","specialDiscounts","selectedProductType","drawerClosed","productSelected"],[3,"productsList","orderReturnedItems","productReturned","closeReturned"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["id","floating-label",1,"form-wrap","p-0"],[1,"row","pt-10"],[1,"col-4"],[1,"custom-control","custom-radio"],["type","radio","name","payment","id","payment1","value","full",1,"custom-control-input",3,"ngModel","ngModelChange","click"],["for","payment1",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["type","radio","name","payment","id","payment2","value","partial",1,"custom-control-input",3,"ngModel","click","ngModelChange"],["for","payment2",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["class","col-12 input-error",4,"ngIf"],[1,"col-md-6","PT-10"],[1,"control-label","mb-10"],["type","text","id","chequeNum","name","cheque_num","required","","autocomplete","off",1,"form-control","cheque_num",3,"ngModel","focus","blur","ngModelChange"],["chequNo","ngModel"],["class","input-error",4,"ngIf"],["type","date","id","datepicker","required","","placeholder","","autocomplete","off","name","payment_date",1,"form-control","cheque_date",3,"ngModel","focus","blur","ngModelChange"],["payDate","ngModel"],[1,"col-md-6","PT-5"],["type","text","name","cheque_bank_name","id","chequeBankName","required","","autocomplete","off",1,"form-control","cheque_bank_name",3,"ngModel","focus","blur","ngModelChange"],["bank_Name","ngModel"],["class","col-md-6 PT-5",4,"ngIf"],[1,"col-12","input-error"],[1,"input-error"],["type","number","min","0","name","cheque_amount","required","","id","Amount1","autocomplete","off",1,"form-control","cheque_amount",3,"max","ngModel","focus","blur","ngModelChange"],["cheqAmount","ngModel"],[1,"col-6"],["type","radio","name","payment","id","Amount1","value","full",1,"custom-control-input",3,"ngModel","ngModelChange","click"],["for","Amount1",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["type","radio","name","payment","id","Amount2","value","partial",1,"custom-control-input",3,"ngModel","click","ngModelChange"],["for","Amount2",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["class","col-md-6 PT-10",4,"ngIf"],["type","number","min","0","name","cheque_amount","required","","autocomplete","off",1,"form-control","cheque_amount",3,"max","ngModel","focus","blur","ngModelChange"],["credAmount","ngModel"],[1,"form-wrap","p-10"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","tab_M","p-0","PT-10","fade",3,"ngClass"],[1,"topstats"],[1,"row","m-0"],[1,"col","pr-0"],[1,"gary-box"],[1,"execution_date"],[1,"col-auto","pr-0"],[1,"gary-box","min-w"],[1,"execution_bookers","float-right"],[1,"execution_territories"],[1,"execution_order"],[1,"col"],[1,"gary-box",2,"min-width","200px"],[1,"execution_amount"],[1,"row","m-0","grayTopborder"],["id","orderList-id",1,"col-4","p-0"],[3,"loading","currentTab","retailers","orderType","retailerChanged"],[1,"col","p-0"],[1,"rightHeight"],[3,"currentTab","orderDetail","returnAmount","dueAmount","isChequeAdded","isCreditAdded","receivableAmount","totalPayment","cheque","credit","cash","orders","schemes","selectedRetailer","returnedProduct","allProducts","specialDiscounts","merchantDiscount","newProduct","orderType","recoveryAmount","credit_order_type","credit_order_type_string","product_type_string","selectedOrderCreditType","deleteReturned","openDrawer","openReturnedModal","productUpdated",4,"ngIf"],["class","no-content",4,"ngIf"],["class","col-md-12 bottom-act-btn",4,"ngIf"],[3,"currentTab","orderDetail","returnAmount","dueAmount","isChequeAdded","isCreditAdded","receivableAmount","totalPayment","cheque","credit","cash","orders","schemes","selectedRetailer","returnedProduct","allProducts","specialDiscounts","merchantDiscount","newProduct","orderType","recoveryAmount","credit_order_type","credit_order_type_string","product_type_string","selectedOrderCreditType","deleteReturned","openDrawer","openReturnedModal","productUpdated"],[1,"no-content"],[1,"no-content-container",2,"margin","auto","display","table","text-align","center","color","#b7b7b7"],["src","assets/images/select order-icon.svg","alt",""],[1,"col-md-12","bottom-act-btn"],["class","btn btn-primary float-left mr-2 font13",3,"disabled","click",4,"ngIf"],["class","btn btn-primary float-left font13 mr-2 red-bg",3,"disabled","click",4,"ngIf"],["class","btn btn-primary float-left font13",3,"disabled","click",4,"ngIf"],["class","btn btn-primary float-left font13 red-bg",3,"disabled","click",4,"ngIf"],["id","open-modal-payment","style","display: none","data-toggle","modal","data-target","#exampleModal2",4,"ngIf"],[1,"btn","btn-primary","mr-2","save_order_execution","font13",3,"disabled","click"],["data-toggle","modal","data-target","#order-del",1,"btn","btn-cancel","cancel_order_btn","font13",3,"disabled"],[1,"btn","btn-primary","float-left","mr-2","font13",3,"disabled","click"],[1,"btn","btn-primary","float-left","font13","mr-2","red-bg",3,"disabled","click"],[1,"btn","btn-primary","float-left","font13",3,"disabled","click"],[1,"btn","btn-primary","float-left","font13","red-bg",3,"disabled","click"],["id","open-modal-payment","data-toggle","modal","data-target","#exampleModal2",2,"display","none"],["id","pills-sale","role","tabpanel","aria-labelledby","pills-sale-tab",1,"tab-pane","tab_M","p-0","PT-10","fade",3,"ngClass"],[1,"Product-Filter","border-0"],[1,"col-2","pr-0"],[1,"_cust_filter","p-0","m-0","w-100"],[1,"form-s2"],["name","order-booker","placeholder","Select Order Booker",1,"formselect",2,"width","100% !important",3,"ngModel","change","ngModelChange"],["class","col-3 pr-0",4,"ngIf"],["class","btn add_button addpr addReturn add-ordr",3,"click",4,"ngIf"],[3,"retailers","currentTab","orderType","isSpotSaleActive","retailerChanged"],[3,"currentTab","orderDetail","returnAmount","isChequeAdded","isCreditAdded","receivableAmount","totalPayment","cheque","credit","orders","cash","schemes","dueAmount","selectedRetailer","orderType","isEdit","allProducts","selectedOrderCreditType","specialDiscounts","merchantDiscount","newProduct","credit_order_type_string","product_type_string","selectedProductType","openDrawer","openReturnedModal","productUpdated","deleteReturned",4,"ngIf"],[1,"col-3","pr-0"],["name","booker-route","placeholder","Select Route",1,"formselect",2,"width","100% !important",3,"ngModel","change","ngModelChange"],["name","spot-retailer","placeholder","Select Retailer",1,"formselect",2,"width","100% !important",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngIf"],["name","selectedOrderCreditType","placeholder","Select Order Type",1,"formselect",2,"width","100% !important",3,"readonly","multiple","ngModel","ngModelChange"],["name","selectedProductType","placeholder","Select Product Type",1,"formselect",2,"width","100% !important",3,"readonly","multiple","ngModel","ngModelChange","change"],[1,"btn","add_button","addpr","addReturn","add-ordr",3,"click"],[3,"currentTab","orderDetail","returnAmount","isChequeAdded","isCreditAdded","receivableAmount","totalPayment","cheque","credit","orders","cash","schemes","dueAmount","selectedRetailer","orderType","isEdit","allProducts","selectedOrderCreditType","specialDiscounts","merchantDiscount","newProduct","credit_order_type_string","product_type_string","selectedProductType","openDrawer","openReturnedModal","productUpdated","deleteReturned"],["class","btn btn-primary float-left mr-2 font13",3,"click",4,"ngIf"],["class","btn btn-primary float-left font13 mr-2 red-bg",3,"click",4,"ngIf"],["class","btn btn-primary float-left font13",3,"click",4,"ngIf"],["class","btn btn-primary float-left font13 red-bg",3,"click",4,"ngIf"],[1,"btn","btn-primary","float-left","mr-2","font13",3,"click"],[1,"btn","btn-primary","float-left","font13","mr-2","red-bg",3,"click"],[1,"btn","btn-primary","float-left","font13",3,"click"],[1,"btn","btn-primary","float-left","font13","red-bg",3,"click"],["id","pills-load","role","tabpanel","aria-labelledby","pills-load-tab",1,"tab-pane","tab_M","p-0","PT-20","fade",3,"ngClass"],[1,"col-12","PT-10"],["datatable","","class","table table-hover dt-responsive nowrap","id","example2","style","width: 100%",3,"dtOptions",4,"ngIf"],["datatable","","id","example2",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],["type","text","placeholder","0",1,"form-control","value_input",2,"width","90px",3,"readonly","ngModel","name","id","ngModelChange","keydown","keyup"],["class","btn btn-default btn-line",3,"disabled","click",4,"ngIf"],["class","btn btn-default red-bg","style","color: white",3,"click",4,"ngIf"],[1,"btn","btn-default","btn-line",3,"disabled","click"],[1,"btn","btn-default","red-bg",2,"color","white",3,"click"],["id","pills-final","role","tabpanel","aria-labelledby","pills-final-tab",1,"tab-pane","tab_M","p-0","PT-10","fade",3,"ngClass"],["class","row",4,"ngIf"],[1,"col-8","PB-30","pr-0"],[1,"header","PT-10","PB-10","mb-15"],[1,"w-100"],["datatable","","class","table table-hover dt-responsive nowrap","id","example3","style","width: 100%",3,"dtOptions",4,"ngIf"],[1,"cash-report"],[1,"header"],[1,"cash-title","w-100","mb-15"],["class","btn btn-primary add-expense","data-toggle","modal","data-target","#expenseModal",4,"ngIf"],["class","btn btn-primary add-expense","disabled","",4,"ngIf"],[1,"report_value"],[1,"report_value",2,"color","#0038ba"],[1,"report_value",2,"height","40px","line-height","22px"],["type","number","placeholder","0",1,"form-control","value_input","amount_recieved_cashReport",3,"ngModel","ngModelChange","keydown","keyup"],["class","col-12 PB-10",4,"ngIf"],["datatable","","id","example3",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],["data-toggle","modal","data-target","#expenseModal",1,"btn","btn-primary","add-expense"],["disabled","",1,"btn","btn-primary","add-expense"],["role","status",1,"spinner-border","text-light"],[1,"col-12","PB-10"],[1,"btn","btn-primary","w-100",3,"click"],[1,"btn","btn-primary","w-100",3,"disabled","click"],["type","submit","disabled","",1,"btn","btn-primary","w-100","mr-2"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"h5",4),n.vc(5,"Cancel Order "),n.Kb(6,"span"),n.Ob(),n.Pb(7,"button",5),n.Pb(8,"span",6),n.vc(9,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(10,"div",7),n.Pb(11,"div",8),n.Pb(12,"p"),n.vc(13,"Are you sure you want to cancel the order?"),n.Ob(),n.Ob(),n.Ob(),n.Pb(14,"div",9),n.tc(15,j,2,0,"button",10),n.tc(16,X,2,0,"button",10),n.Pb(17,"button",11),n.vc(18," No "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(19,"div",12),n.Pb(20,"div",1),n.Pb(21,"div",13),n.Pb(22,"div",3),n.Pb(23,"h5",4),n.vc(24," Complete Execution "),n.Kb(25,"span"),n.Ob(),n.Pb(26,"button",5),n.Pb(27,"span",6),n.vc(28,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(29,"div",7),n.Pb(30,"div",8),n.Pb(31,"p"),n.vc(32,"Are you sure you want to Mark the order as Completed?"),n.Ob(),n.Ob(),n.Ob(),n.Pb(33,"div",9),n.Pb(34,"button",14),n.Wb("click",(function(){return t.markCompelet()})),n.vc(35," Yes "),n.Ob(),n.Pb(36,"button",15),n.vc(37," No "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(38,"button",16),n.vc(39," show complete\n"),n.Ob(),n.Pb(40,"div",17),n.Pb(41,"div",18),n.Pb(42,"div",19),n.Pb(43,"div",3),n.Pb(44,"h5",20),n.vc(45,"Add "),n.Pb(46,"span"),n.vc(47,"Expense"),n.Ob(),n.Ob(),n.Pb(48,"button",5),n.Pb(49,"span",6),n.vc(50,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.tc(51,oe,26,3,"div",21),n.Pb(52,"div",9),n.Pb(53,"button",14),n.Wb("click",(function(){return t.saveExpense()})),n.vc(54," Save "),n.Ob(),n.Pb(55,"button",22),n.vc(56," Cancel "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(57,ae,1,11,"app-products-drawer",23),n.tc(58,ne,1,2,"app-returned-products",24),n.Pb(59,"div",25),n.Pb(60,"div",1),n.Pb(61,"div",26),n.tc(62,de,8,0,"div",27),n.tc(63,ge,37,10,"div",28),n.tc(64,Oe,8,0,"div",27),n.tc(65,xe,15,4,"div",29),n.tc(66,Ce,3,0,"div",30),n.Pb(67,"div",9),n.Pb(68,"button",31),n.Wb("click",(function(){return t.addPaymentMethod()})),n.vc(69," Add "),n.Ob(),n.Pb(70,"button",32),n.Wb("click",(function(){return t.paymentCancelled()})),n.vc(71," Cancel "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(72,"div",33),n.Pb(73,"div",34),n.Pb(74,"div",8),n.Pb(75,"div",35),n.Pb(76,"ul",36),n.Pb(77,"li",37),n.Pb(78,"a",38),n.Pb(79,"span"),n.vc(80,"Orders"),n.Ob(),n.Pb(81,"span",39),n.Kb(82,"i",40),n.Ob(),n.Ob(),n.Ob(),n.Pb(83,"li",37),n.Pb(84,"a",41),n.Pb(85,"span"),n.vc(86,"Spot Sale"),n.Ob(),n.Pb(87,"span",39),n.Kb(88,"i",42),n.Ob(),n.Ob(),n.Ob(),n.Pb(89,"li",37),n.Pb(90,"a",43),n.Pb(91,"span"),n.vc(92,"Recovery"),n.Ob(),n.Pb(93,"span",39),n.Kb(94,"i",44),n.Ob(),n.Ob(),n.Ob(),n.Pb(95,"li",37),n.Pb(96,"a",45),n.Pb(97,"span"),n.vc(98,"Final"),n.Ob(),n.Pb(99,"span",39),n.Kb(100,"i",46),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(101,"div",47),n.tc(102,Ee,43,17,"div",48),n.tc(103,Xe,56,24,"div",49),n.tc(104,bt,14,7,"div",50),n.tc(105,ft,37,11,"div",51),n.Pb(106,"div",52),n.Pb(107,"div",53),n.Pb(108,"button",54),n.Wb("click",(function(){return t.changeTab(t.currentTab-1)})),n.vc(109," Previous "),n.Ob(),n.Pb(110,"button",55),n.Wb("click",(function(){return t.changeTab(t.currentTab+1)})),n.vc(111," Next "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(112,"button",56),n.vc(113," Bill\n"),n.Ob()),2&e&&(n.yb(15),n.ec("ngIf",1===t.currentTab),n.yb(1),n.ec("ngIf",2===t.currentTab),n.yb(35),n.ec("ngIf",t.finalLoad),n.yb(6),n.ec("ngIf",t.showProducts),n.yb(1),n.ec("ngIf",t.showReturned),n.yb(4),n.ec("ngIf",!t.isCredit),n.yb(1),n.ec("ngIf",!t.isCredit),n.yb(1),n.ec("ngIf",t.isCredit),n.yb(1),n.ec("ngIf",t.isCredit),n.yb(1),n.ec("ngIf","partial"===t.paymentTypeCheque&&"full"===t.paymentTypeCredit||"full"===t.paymentTypeCheque&&"partial"===t.paymentTypeCredit),n.yb(2),n.ec("disabled","partial"===t.paymentTypeCheque&&"full"===t.paymentTypeCredit||"full"===t.paymentTypeCheque&&"partial"===t.paymentTypeCredit),n.yb(10),n.ec("ngClass",1===t.currentTab?"active":""),n.yb(6),n.ec("ngClass",2===t.currentTab?"active":""),n.yb(6),n.ec("ngClass",3===t.currentTab?"active":""),n.yb(6),n.ec("ngClass",4===t.currentTab?"active":""),n.yb(6),n.ec("ngIf",1===t.currentTab),n.yb(1),n.ec("ngIf",2===t.currentTab),n.yb(1),n.ec("ngIf",3===t.currentTab),n.yb(1),n.ec("ngIf",4===t.currentTab),n.yb(3),n.ec("disabled",1===t.currentTab||t.isSpotSaleActive||t.loading),n.yb(2),n.ec("disabled",t.isSpotSaleActive||t.loading||4===t.currentTab))},directives:[r.k,r.i,o.l,o.t,r.j,u.a,Z.a,U.a,o.o,o.b,o.h,o.k,o.q,o.m,G.a,H.a,p.a,b.a,b.c],pipes:[r.d],styles:[".mw-1280{max-width:1280px}.retailerTable .table thead th{font-size:12px;padding:5px 8px!important}.retailerTable .table td{font-size:12px!important;padding:5px 4px!important;vertical-align:middle;line-height:1}.ProList-div{max-height:57vh;flex:1;overflow-y:auto;overflow-x:hidden;padding:10px;font-size:14px}.ProList-div .table img{margin-top:-2px;margin-bottom:-2px;margin-left:4px}.APS-list input{height:32px;border:1px solid #eae9e9;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}.APS-list .fa{position:absolute;top:8px;left:8px;color:#b5b5b5}._selectProList .header .add_button{padding:4px 8px 3px;right:15px}._selectProList .APS-list{padding:0;width:100%;margin-top:10px;position:relative;float:right}.topstats{margin-top:10px;font-size:13px;margin-bottom:5px}.topstats .gary-box{line-height:1;background-color:#f9f9f9;border-bottom:1px solid #d1d1d1;padding:10px}.topstats .gary-box span{font-family:Rationale,sans-serif;color:#0038ba;font-size:18px;float:right;margin-top:-4px}.min-w{min-width:240px}.order-list{font-size:12px;background:#fff;padding:6px 10px;border:1px solid #eaeaea;position:relative;transition:all .2s;transform:translateZ(0);transform:scale(.97);cursor:pointer}.order-list.active{border-color:#0038ba}.order-list.active,.order-list:hover{box-shadow:0 0 22px 0 rgba(0,0,0,.18);transform:scale(1);z-index:3}.order-list span{display:block}.order-list span .fa{color:#b5b5b5}.order-list span.or-val{font-family:Rationale,sans-serif;font-size:16.5px;line-height:1;color:#0038ba}.order-list .ord-no{font-family:Poppins,sans-serif;line-height:1;font-size:35px;font-weight:800;padding-top:0;color:#ececec;position:absolute;right:80px;top:7px}.addPR-head{padding:15px 15px 0 20px!important;background:none!important}#orderList-id{flex:0 0 300px;max-width:300px;width:300px}.value_input{padding:2px;margin:0!important;font-size:12px;box-shadow:none;height:22px;width:52px}.total-valu-div{width:280px;min-height:173px;font-size:13px;padding-left:20px;padding-right:20px;margin-left:auto;margin-right:0;padding-top:5px;background-color:#f7f7f7;border:1px solid #ececec}.total-valu-div .row{border-bottom:1px solid #e8e6e6}.total-valu-div .row .col-6{padding:2px;line-height:1.5;font-family:proximanova-semibold,sans-serif!important}.total-valu-div span{font-family:Rationale,sans-serif;line-height:1.1;font-size:18px;text-align:right;display:block}.ProListHeight{height:calc(100vh - 200px)}.rightHeight{height:calc(100vh - 249px);overflow-y:auto}.productSearch{position:relative}.productSearch input{height:32px;border:1px solid #eae9e9;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}.productSearch .fa{position:absolute;top:8px;left:8px;color:#b5b5b5}.AddProductTable{padding:0;margin:0}.AddProductTable tr{border-bottom:1px solid #eee}.AddProductTable td{padding-bottom:7px;padding-top:7px}.ProListDiv{padding:0;display:table}.ProListDiv .PR_Name{display:table-cell;vertical-align:middle;font-size:14px;letter-spacing:1px;line-height:16px}.ProListDiv .PrList_img{width:35px;height:35px;margin-right:8px;border:1px solid #e0e0e0}.AddProductTable .btn-default{padding:5px 8px;font-size:13px;border-radius:0;-khtml-border-radius:0;background:linear-gradient(90deg,#1e54d3,#0038ba);color:#fff;text-align:center;margin:0;line-height:1;min-width:74px;letter-spacing:1px;float:right;border:none!important}.se_cus-type .form-control{border:1px solid #eee;background-color:#fff}.ng-option,.ng-select .ng-select-container,.ng-select span{text-transform:capitalize}.ng-select .ng-clear-wrapper{display:none}.daily-operations .nav_M .nav-link.active,.daily-operations .nav_M a{padding-top:15px}.cash-report{background-color:#f8f8f8;min-height:calc(100vh - 210px)}.cash-report .header{background:linear-gradient(0deg,#f8f8f8,#f8f8f8 50%);padding:15px 20px}.cash-report .report_value{background-color:#fff;font-size:13px;position:relative;padding:10px;letter-spacing:.5px;margin-bottom:5px;margin-top:5px;box-shadow:0 2px 8px 0 rgba(79,79,79,.1);line-height:1}.cash-report .report_value span{font-family:Rationale,sans-serif;line-height:1;font-size:18px;float:right;margin-top:-2px}.totalcash span{font-size:20px!important;color:#0038ba}.add-ordr{float:left;position:static;margin-left:10px}.Product-Filter{background-color:#f3f2f2;padding:10px 15px!important;box-shadow:0 0 20px 0 rgb(0 0 0/20%);margin:15px 0!important;border-bottom:2px solid #0038ba}._cust_filter{padding-left:0!important;padding-top:0!important;float:left}._cust_filter .form-s2 .ng-select{padding:0!important;height:30px!important}._cust_filter .form-s2 .ng-select .ng-select-container{width:100%;font-size:14px;border:none;border-radius:0;min-height:30px!important;height:30px!important}.cash-report .value_input{width:85px}.addsalesman{font-size:11px;width:100%;line-height:1;margin-top:5px}.add-expense{font-size:13px;padding:2px 10px;position:absolute;right:0}.red-bg{border:1px solid #f12300}.wz-icon .fa{color:#fff}.addpr{padding:4px 8px;font-size:12px;top:11px;right:15px;cursor:pointer}.daily-operations .tab-content{padding-bottom:10px}.bottom-act-btn{text-align:right;padding-top:15px;padding-bottom:15px}.bottom-act-btn .btn{letter-spacing:1px;font-size:12px;padding:4px 12px;box-shadow:none}.execFooter{background:#f6f6f6;padding-top:10px;padding-bottom:10px;margin-top:5px}.cash-report .value_input{float:right;width:95px}.input-error{color:red;font-size:13px;float:left}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}.red-bg{background:red!important;color:#fff!important}.no-content{width:100%;height:65vh;display:flex}.no-content .no-content-container{margin:auto;display:table;text-align:center;color:#b7b7b7}.no-content .no-content-container img{width:70px;height:70px;margin:auto auto 10px;display:block}"],encapsulation:2}),e})();var xt=i("XSw2"),Ct=i("8/39"),St=i("qew9");function kt(e,t){1&e&&(n.Pb(0,"div",19),n.Kb(1,"app-loader-white"),n.Ob())}function wt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Please add Quantity! "),n.Ob())}function Dt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Quantity should be greater than 0! "),n.Ob())}function Tt(e,t){1&e&&(n.Pb(0,"div",112),n.vc(1," Trade Offer: "),n.Ob())}function Rt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div"),n.Pb(1,"div",115),n.Pb(2,"input",116),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(4).selectedProduct.selectedScheme=t}))("click",(function(){n.oc(e);const i=t.$implicit,r=n.Yb(4);return r.selectedProduct.pref_id&&r.selectedProduct.stockQty&&r.calculateProductDiscounts(r.selectedProduct,i)})),n.Ob(),n.Pb(3,"label",117),n.vc(4),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=t.index,r=n.Yb(4);n.yb(2),n.gc("id","byTerritory-",i,""),n.ec("ngModel",r.selectedProduct.selectedScheme)("value",e),n.yb(1),n.gc("for","byTerritory-",i,""),n.yb(1),n.wc(e.title)}}function It(e,t){if(1&e&&(n.Pb(0,"div",113),n.tc(1,Rt,5,5,"div",114),n.Ob()),2&e){const e=n.Yb(3);n.yb(1),n.ec("ngForOf",e.selectedProduct.schemes)}}function Mt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",103),n.Pb(1,"div",8),n.Pb(2,"div",104),n.vc(3,"Add Quantity:"),n.Ob(),n.Pb(4,"div",105),n.Pb(5,"input",106,107),n.Wb("keyup",(function(){n.oc(e);const t=n.Yb(2);return t.setQuantity(t.selectedProduct)}))("keydown",(function(t){return n.oc(e),n.Yb(2).isNumber(t,"quantity")}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).selectedProduct.stockQty=t})),n.Ob(),n.tc(7,wt,2,0,"span",108),n.tc(8,Dt,2,0,"span",108),n.Ob(),n.Pb(9,"div",104),n.vc(10,"Unit:"),n.Ob(),n.Pb(11,"div",105),n.vc(12),n.Ob(),n.tc(13,Tt,2,0,"div",109),n.tc(14,It,2,1,"div",110),n.Ob(),n.Ob()}if(2&e){const e=n.nc(6),t=n.Yb(2);n.yb(5),n.ec("ngModel",t.selectedProduct.stockQty),n.yb(2),n.ec("ngIf",(null==e.errors?null:e.errors.required)&&t.isAdded),n.yb(1),n.ec("ngIf",0==+t.selectedProduct.stockQty&&t.isAdded&&!(null!=e.errors&&e.errors.required)),n.yb(4),n.xc(" ",t.selectedProduct.unit_name," "),n.yb(1),n.ec("ngIf",(null==t.selectedProduct||null==t.selectedProduct.schemes?null:t.selectedProduct.schemes.length)&&t.selectedOrderCreditType!==t.ORDER_TYPE.Credit_Order_Without_Discount),n.yb(1),n.ec("ngIf",(null==t.selectedProduct||null==t.selectedProduct.schemes?null:t.selectedProduct.schemes.length)&&t.selectedOrderCreditType!==t.ORDER_TYPE.Credit_Order_Without_Discount)}}function At(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",3),n.Pb(1,"h5",21),n.vc(2," Add "),n.Pb(3,"span"),n.vc(4," Cheque Information"),n.Ob(),n.Ob(),n.Pb(5,"button",118),n.Wb("click",(function(){return n.oc(e),n.Yb(2).paymentCancelled()})),n.Pb(6,"span",6),n.vc(7,"\xd7"),n.Ob(),n.Ob(),n.Ob()}}function Et(e,t){1&e&&(n.Pb(0,"div",139),n.vc(1," Please select a payment method! "),n.Ob())}function qt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Please add Cheque Number! "),n.Ob())}function Lt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Please add Payment Date! "),n.Ob())}function Nt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Please add Bank Name! "),n.Ob())}function Yt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Please add Total Amount! "),n.Ob())}function Bt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Zero value not allowed "),n.Ob())}function Kt(e,t){if(1&e&&(n.Pb(0,"span",111),n.vc(1),n.Zb(2,"number"),n.Ob()),2&e){const e=n.Yb(4);n.yb(1),n.xc(" Amount should not be greater than ",n.bc(2,1,null==e.cash?null:e.cash.amount_received,"1.2-2")," ")}}function Ft(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",135),n.Pb(1,"div",128),n.Pb(2,"label",129),n.vc(3,"Total Amount*"),n.Ob(),n.Pb(4,"input",140,141),n.Wb("focus",(function(t){return n.oc(e),n.Yb(3).focused(t)}))("blur",(function(t){return n.oc(e),n.Yb(3).left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(3).chequeAmount=t})),n.Ob(),n.Ob(),n.tc(6,Yt,2,0,"span",108),n.tc(7,Bt,2,0,"span",108),n.tc(8,Kt,3,4,"span",108),n.Ob()}if(2&e){const e=n.nc(5),t=n.Yb(3);n.yb(4),n.ec("max",null==t.cash?null:t.cash.amount_received)("ngModel",t.chequeAmount),n.yb(2),n.ec("ngIf",(null==e.errors?null:e.errors.required)&&t.isAdded),n.yb(1),n.ec("ngIf",0==+t.chequeAmount&&t.isAdded),n.yb(1),n.ec("ngIf",!(null!=e.errors&&e.errors.required)&&t.chequeAmount>(null==t.cash?null:t.cash.amount_received)&&t.isAdded)}}function Jt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",9),n.Pb(1,"div",119),n.Pb(2,"div",120),n.Pb(3,"div",121),n.Pb(4,"div",115),n.Pb(5,"input",122),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).paymentTypeCheque=t}))("click",(function(){n.oc(e);const t=n.Yb(2);return t.chequeAmount=null,t.currentFullPayment("Cheque Payment","Credit")})),n.Ob(),n.Pb(6,"label",123),n.vc(7,"Full Amount"),n.Ob(),n.Ob(),n.Ob(),n.Pb(8,"div",121),n.Pb(9,"div",115),n.Pb(10,"input",124),n.Wb("click",(function(){return n.oc(e),n.Yb(2).setPartial("Cheque Payment")}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).paymentTypeCheque=t})),n.Ob(),n.Pb(11,"label",125),n.vc(12,"Partial Amount"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(13,Et,2,0,"div",126),n.Pb(14,"div",8),n.Pb(15,"div",127),n.Pb(16,"div",128),n.Pb(17,"label",129),n.vc(18,"Cheque Number*"),n.Ob(),n.Pb(19,"input",130,131),n.Wb("focus",(function(t){return n.oc(e),n.Yb(2).focused(t)}))("blur",(function(t){return n.oc(e),n.Yb(2).left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).chequeNumber=t})),n.Ob(),n.Ob(),n.tc(21,qt,2,0,"span",108),n.Ob(),n.Pb(22,"div",127),n.Pb(23,"div",132),n.Pb(24,"label",129),n.vc(25,"Date*"),n.Ob(),n.Pb(26,"input",133,134),n.Wb("focus",(function(t){return n.oc(e),n.Yb(2).focused(t)}))("blur",(function(t){return n.oc(e),n.Yb(2).left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).paymentDate=t})),n.Ob(),n.Ob(),n.tc(28,Lt,2,0,"span",108),n.Ob(),n.Pb(29,"div",135),n.Pb(30,"div",128),n.Pb(31,"label",129),n.vc(32,"Bank Name*"),n.Ob(),n.Pb(33,"input",136,137),n.Wb("focus",(function(t){return n.oc(e),n.Yb(2).focused(t)}))("blur",(function(t){return n.oc(e),n.Yb(2).left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).bankName=t})),n.Ob(),n.Ob(),n.tc(35,Nt,2,0,"span",108),n.Ob(),n.tc(36,Ft,9,5,"div",138),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.nc(20),t=n.nc(34),i=n.Yb(2);n.yb(5),n.ec("ngModel",i.paymentTypeCheque),n.yb(5),n.ec("ngModel",i.paymentTypeCheque),n.yb(3),n.ec("ngIf",""===i.paymentTypeCheque&&i.isAdded),n.yb(6),n.ec("ngModel",i.chequeNumber),n.yb(2),n.ec("ngIf",(null==e.errors?null:e.errors.required)&&i.isAdded),n.yb(5),n.ec("ngModel",i.paymentDate),n.yb(2),n.ec("ngIf","  "===i.paymentDate&&i.isAdded),n.yb(5),n.ec("ngModel",i.bankName),n.yb(2),n.ec("ngIf",(null==t.errors?null:t.errors.required)&&i.isAdded),n.yb(1),n.ec("ngIf","full"!==i.paymentTypeCheque)}}function Qt(e,t){1&e&&(n.Pb(0,"div",3),n.Pb(1,"h5",21),n.vc(2," Add "),n.Pb(3,"span"),n.vc(4,"Credit Information"),n.Ob(),n.Ob(),n.Pb(5,"button",142),n.Pb(6,"span",6),n.vc(7,"\xd7"),n.Ob(),n.Ob(),n.Ob())}function Wt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Please select a payment method! "),n.Ob())}function zt(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Please add Total Amount! "),n.Ob())}function $t(e,t){1&e&&(n.Pb(0,"span",111),n.vc(1," Zero value not allowed "),n.Ob())}function Vt(e,t){if(1&e&&(n.Pb(0,"span",111),n.vc(1),n.Ob()),2&e){const e=n.Yb(4);n.yb(1),n.xc(" Amount should not be greater than ",null==e.cash?null:e.cash.amount_received," ")}}function Zt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",127),n.Pb(1,"div",128),n.Pb(2,"label",129),n.vc(3,"Amount*"),n.Ob(),n.Pb(4,"input",149,150),n.Wb("focus",(function(t){return n.oc(e),n.Yb(3).focused(t)}))("blur",(function(t){return n.oc(e),n.Yb(3).left(t)}))("ngModelChange",(function(t){return n.oc(e),n.Yb(3).creditAmount=t})),n.Ob(),n.Ob(),n.tc(6,zt,2,0,"span",108),n.tc(7,$t,2,0,"span",108),n.tc(8,Vt,2,1,"span",108),n.Ob()}if(2&e){const e=n.nc(5),t=n.Yb(3);n.yb(4),n.ec("max",null==t.cash?null:t.cash.amount_received)("ngModel",t.creditAmount),n.yb(2),n.ec("ngIf",(null==e.errors?null:e.errors.required)&&t.isAdded),n.yb(1),n.ec("ngIf",0==+t.creditAmount&&t.isAdded),n.yb(1),n.ec("ngIf",!(null!=e.errors&&e.errors.required)&&+t.creditAmount>(null==t.cash?null:t.cash.amount_received)&&t.isAdded)}}function Ut(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",119),n.Pb(1,"div",9),n.Pb(2,"div",120),n.Pb(3,"div",143),n.Pb(4,"div",115),n.Pb(5,"input",144),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).paymentTypeCredit=t}))("click",(function(){n.oc(e);const t=n.Yb(2);return t.creditAmount=null,t.currentFullPayment("Credit","Cheque payment")})),n.Ob(),n.Pb(6,"label",145),n.vc(7,"Full Amount"),n.Ob(),n.Ob(),n.tc(8,Wt,2,0,"span",108),n.Ob(),n.Pb(9,"div",143),n.Pb(10,"div",115),n.Pb(11,"input",146),n.Wb("click",(function(){return n.oc(e),n.Yb(2).setPartial("Credit")}))("ngModelChange",(function(t){return n.oc(e),n.Yb(2).paymentTypeCredit=t})),n.Ob(),n.Pb(12,"label",147),n.vc(13,"Partial Amount"),n.Ob(),n.Ob(),n.Ob(),n.tc(14,Zt,9,5,"div",148),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(5),n.ec("ngModel",e.paymentTypeCredit),n.yb(3),n.ec("ngIf",""===e.paymentTypeCredit&&e.isAdded),n.yb(3),n.ec("ngModel",e.paymentTypeCredit),n.yb(3),n.ec("ngIf","full"!==e.paymentTypeCredit)}}function Gt(e,t){1&e&&(n.Pb(0,"div",151),n.Pb(1,"h5",111),n.vc(2,' You have to choose "Partial Amount" to use both Credit and Cheque Payment! '),n.Ob(),n.Ob())}function Ht(e,t){1&e&&(n.Pb(0,"div",160),n.vc(1," Scheme "),n.Ob())}function jt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",161),n.Wb("click",(function(){n.oc(e);const t=n.Yb().$implicit;return n.Yb(3).openQuantityModal(t)})),n.vc(1," Add "),n.Ob()}}function Xt(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",162),n.Wb("click",(function(){n.oc(e);const t=n.Yb().$implicit;return n.Yb(3).removeProductFromOrder(t)})),n.vc(1," Remove "),n.Ob()}}function ei(e,t){if(1&e&&(n.Pb(0,"tr"),n.Pb(1,"td"),n.Pb(2,"div",153),n.tc(3,Ht,2,0,"div",154),n.Kb(4,"img",155),n.Pb(5,"div",156),n.vc(6),n.Pb(7,"span",157),n.vc(8),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(9,"td"),n.tc(10,jt,2,0,"button",158),n.tc(11,Xt,2,0,"button",159),n.Ob(),n.Ob()),2&e){const e=t.$implicit,i=n.Yb(3);n.yb(3),n.ec("ngIf",(null==e||null==e.schemes?null:e.schemes.length)&&i.selectedOrderCreditType!==i.ORDER_TYPE.Credit_Order_Without_Discount),n.yb(1),n.fc("src",e.thumbnail,n.pc),n.yb(2),n.xc(" ",e.item_name," "),n.yb(2),n.xc(" SKU: ",e.item_sku," "),n.yb(2),n.ec("ngIf",!e.isAdded),n.yb(1),n.ec("ngIf",e.isAdded)}}function ti(e,t){if(1&e&&(n.Pb(0,"table",152),n.Pb(1,"tbody"),n.tc(2,ei,12,6,"tr",114),n.Ob(),n.Ob()),2&e){const e=n.Yb(2);n.yb(2),n.ec("ngForOf",e.dispProducts)}}function ii(e,t){1&e&&(n.Pb(0,"div",163),n.Pb(1,"h2",164),n.vc(2,"Loading Products..."),n.Ob(),n.Ob())}function ri(e,t){if(1&e&&(n.Pb(0,"ng-option",70),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.employee_id),n.yb(1),n.wc(e.employee_first_name+" "+e.employee_last_name)}}function oi(e,t){1&e&&(n.Pb(0,"ng-option",64),n.vc(1,"Select Employee First"),n.Ob())}function ai(e,t){1&e&&(n.Pb(0,"ng-option",64),n.vc(1,"Select Route"),n.Ob())}function ni(e,t){if(1&e&&(n.Pb(0,"ng-option",70),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.route_id),n.yb(1),n.xc("",e.name," ")}}function di(e,t){1&e&&(n.Pb(0,"ng-option",64),n.vc(1,"Select Route First"),n.Ob())}function si(e,t){1&e&&(n.Pb(0,"ng-option",64),n.vc(1,"Select Retailer"),n.Ob())}function ci(e,t){if(1&e&&(n.Pb(0,"ng-option",70),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e),n.yb(1),n.xc(" ",e.retailer_name,"")}}function li(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",61),n.Pb(1,"div",62),n.Pb(2,"ng-select",165),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).selectedProductType=t}))("change",(function(){return n.oc(e),n.Yb(2).getDiscountSlabs()})),n.Pb(3,"ng-option",70),n.vc(4," Normal "),n.Ob(),n.Pb(5,"ng-option",70),n.vc(6," Exclusive "),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(2),n.ec("readonly",e.isEdit)("multiple",!1)("disabled",e.selectedProducts.length)("ngModel",e.selectedProductType),n.yb(1),n.ec("value",e.PRODUCT_TYPE.NORMAL),n.yb(2),n.ec("value",e.PRODUCT_TYPE.EXCLUSIVE)}}function bi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",166),n.Wb("click",(function(t){return n.oc(e),n.Yb(2).showProductsList(t)})),n.vc(1," Add Product "),n.Ob()}}function ui(e,t){if(1&e){const e=n.Qb();n.Pb(0,"a",174),n.Wb("click",(function(){n.oc(e);const t=n.Yb(),i=t.$implicit,r=t.index;return n.Yb(2).removeProductFromOrder(i,r)})),n.Kb(1,"i",175),n.Ob()}if(2&e){const e=n.Yb(3);n.ec("disabled",e.isChequeAdded||e.isCreditAdded)}}function pi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",167),n.Kb(1,"a",168),n.Pb(2,"div",169),n.Pb(3,"div",77),n.Pb(4,"div",170),n.vc(5),n.Ob(),n.Ob(),n.Pb(6,"div",78),n.Pb(7,"div",86),n.vc(8),n.Ob(),n.Ob(),n.Pb(9,"div",86),n.Pb(10,"input",171),n.Wb("keyup",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).setQuantity(i)}))("keydown",(function(t){return n.oc(e),n.Yb(2).isNumber(t,"quantity")}))("ngModelChange",(function(i){return n.oc(e),t.$implicit.stockQty=i})),n.Ob(),n.Ob(),n.Pb(11,"div",86),n.vc(12),n.Ob(),n.Pb(13,"div",86),n.vc(14),n.Zb(15,"number"),n.Ob(),n.Pb(16,"div",86),n.vc(17),n.Zb(18,"number"),n.Ob(),n.Pb(19,"div",86),n.vc(20),n.Zb(21,"number"),n.Ob(),n.Pb(22,"div",86),n.Pb(23,"input",172),n.Wb("ngModelChange",(function(i){return n.oc(e),t.$implicit.extra_discount=i}))("keyup",(function(){n.oc(e);const i=t.$implicit;return n.Yb(2).calculateExtraDiscount(i)}))("keydown",(function(t){return n.oc(e),n.Yb(2).isNumber(t)})),n.Ob(),n.Ob(),n.Pb(24,"div",86),n.vc(25),n.Zb(26,"number"),n.Ob(),n.Pb(27,"div",88),n.vc(28),n.Zb(29,"number"),n.Ob(),n.tc(30,ui,2,1,"a",173),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=n.Yb(2);n.yb(5),n.xc(" ",e.item_name," "),n.yb(3),n.xc(" ",e.unit_name," "),n.yb(2),n.ec("disabled",i.isChequeAdded||i.isCreditAdded)("ngModel",e.stockQty),n.yb(2),n.xc(" ",e.item_trade_price," "),n.yb(2),n.xc(" ",n.bc(15,14,+e.stockQty*e.scheme_discount||0,"1.2-2")," "),n.yb(3),n.yc(" ",e.trade_discount||0,"% (",n.bc(18,17,+e.stockQty*e.trade_discount_pkr||0,"1.2-2"),") "),n.yb(3),n.xc(" ",n.bc(21,20,+e.stockQty*e.special_discount||0,"1.2-2")," "),n.yb(3),n.ec("readonly",i.isCreditAdded||i.isChequeAdded||+e.stockQty<1)("ngModel",e.extra_discount),n.yb(2),n.xc(" ",n.bc(26,23,e.tax_amount_pkr||0,"1.2-2")," "),n.yb(3),n.xc(" ",n.bc(29,26,e.net_amount||0,"1.2-2")," "),n.yb(2),n.ec("ngIf",!i.isEdit)}}function hi(e,t){1&e&&(n.Pb(0,"div",167),n.Pb(1,"h6",176),n.vc(2,"Add products to counter sale..."),n.Ob(),n.Ob())}function mi(e,t){1&e&&(n.Pb(0,"button",177),n.Pb(1,"div",178),n.Pb(2,"span",179),n.vc(3,"Loading..."),n.Ob(),n.Ob(),n.Ob())}const gi=function(){return["/home"]};function Oi(e,t){1&e&&(n.Pb(0,"button",180),n.vc(1," Cancel "),n.Ob()),2&e&&n.ec("routerLink",n.hc(1,gi))}function vi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",181),n.Wb("click",(function(){return n.oc(e),n.Yb(2).onCancelOrder()})),n.vc(1," Cancel Order "),n.Ob()}}function _i(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",182),n.Wb("click",(function(){return n.oc(e),n.Yb(2).setOrderFields()})),n.vc(1),n.Ob()}if(2&e){const e=n.Yb(2);n.ec("disabled",0===e.selectedProducts.length),n.yb(1),n.xc(" ",e.isEdit?"Complete Order":"Save Order"," ")}}function Pi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",183),n.Wb("click",(function(){n.oc(e);const t=n.Yb(2);return t.isCredit=!1,t.isFullyPaymentAdded("Cheque Payment")})),n.vc(1," Add Cheque "),n.Ob()}}function fi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",184),n.Wb("click",(function(){return n.oc(e),n.Yb(2).removeCheque()})),n.vc(1," Remove Cheque "),n.Ob()}}function yi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",185),n.Wb("click",(function(){n.oc(e);const t=n.Yb(2);return t.isCredit=!0,t.isFullyPaymentAdded("Credit")})),n.vc(1," Add Credit "),n.Ob()}}function xi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",186),n.Wb("click",(function(){return n.oc(e),n.Yb(2).removeCredit()})),n.vc(1," Remove Credit "),n.Ob()}}function Ci(e,t){1&e&&(n.Pb(0,"button",187),n.vc(1," Show Modal "),n.Ob())}function Si(e,t){if(1&e){const e=n.Qb();n.Pb(0,"span"),n.Pb(1,"div",20),n.Pb(2,"div",1),n.Pb(3,"div",2),n.Pb(4,"div",3),n.Pb(5,"h5",21),n.vc(6," Product "),n.Pb(7,"span"),n.vc(8," Detail"),n.Ob(),n.Ob(),n.Pb(9,"button",22),n.Wb("click",(function(t){return n.oc(e),n.Yb().closeQuantityModal(t)})),n.Pb(10,"span",23),n.vc(11,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.tc(12,Mt,15,6,"div",24),n.Pb(13,"div",25),n.Pb(14,"button",26),n.Wb("click",(function(){return n.oc(e),n.Yb().addProductToOrder()})),n.vc(15," Confirm "),n.Ob(),n.Pb(16,"button",27),n.Wb("click",(function(t){return n.oc(e),n.Yb().closeQuantityModal(t)})),n.vc(17," Cancel "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(18,"div",28),n.Pb(19,"div",1),n.Pb(20,"div",2),n.tc(21,At,8,0,"div",29),n.tc(22,Jt,37,10,"div",30),n.tc(23,Qt,8,0,"div",29),n.tc(24,Ut,15,4,"div",31),n.tc(25,Gt,3,0,"div",32),n.Pb(26,"div",33),n.Pb(27,"button",34),n.Wb("click",(function(){return n.oc(e),n.Yb().addPaymentMethod()})),n.vc(28," Add "),n.Ob(),n.Pb(29,"button",35),n.Wb("click",(function(){return n.oc(e),n.Yb().paymentCancelled()})),n.vc(30," Cancel "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(31,"div",36),n.Wb("clickOutside",(function(t){return n.oc(e),n.Yb().clickedOutSide(t)})),n.Pb(32,"a",37),n.Wb("click",(function(){return n.oc(e),n.Yb().closeProductsList()})),n.Ob(),n.Pb(33,"div",38),n.vc(34,"Add "),n.Pb(35,"span"),n.vc(36,"Product"),n.Ob(),n.Ob(),n.Pb(37,"div",39),n.Pb(38,"div",8),n.Pb(39,"div",9),n.Pb(40,"div",40),n.Kb(41,"i",41),n.Pb(42,"input",42),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().productSearchText=t}))("keyup",(function(){return n.oc(e),n.Yb().searchProduct()})),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(43,"div",43),n.Pb(44,"div",44),n.Pb(45,"div",45),n.Pb(46,"div",46),n.Pb(47,"div",47),n.Pb(48,"div",8),n.Pb(49,"div",9),n.Pb(50,"div",48),n.tc(51,ti,3,1,"table",49),n.tc(52,ii,3,0,"div",50),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(53,"div",51),n.Pb(54,"button",52),n.Wb("click",(function(){return n.oc(e),n.Yb().closeProductsList()})),n.vc(55," Cancel "),n.Ob(),n.Ob(),n.Ob(),n.Pb(56,"div",53),n.Pb(57,"button",54),n.vc(58," Bill "),n.Ob(),n.Pb(59,"div",55),n.Pb(60,"div",56),n.Pb(61,"h2",57),n.vc(62),n.Pb(63,"span"),n.vc(64,"Order"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(65,"div",58),n.Pb(66,"div",56),n.Pb(67,"div",59),n.Pb(68,"div",60),n.Pb(69,"div",9),n.Pb(70,"div",8),n.Pb(71,"div",61),n.Pb(72,"div",62),n.Pb(73,"ng-select",63),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedEmployee=t}))("change",(function(){return n.oc(e),n.Yb().getRoutes()})),n.Pb(74,"ng-option",64),n.vc(75,"Select Employee"),n.Ob(),n.tc(76,ri,2,2,"ng-option",65),n.Ob(),n.Ob(),n.Ob(),n.Pb(77,"div",61),n.Pb(78,"div",62),n.Pb(79,"ng-select",66),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedRoute=t}))("change",(function(){return n.oc(e),n.Yb().getRetailerByRoute()})),n.tc(80,oi,2,0,"ng-option",67),n.tc(81,ai,2,0,"ng-option",67),n.tc(82,ni,2,2,"ng-option",65),n.Ob(),n.Ob(),n.Ob(),n.Pb(83,"div",61),n.Pb(84,"div",62),n.Pb(85,"ng-select",68),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedRetailer=t}))("change",(function(){return n.oc(e),n.Yb().onRetailerCahange()})),n.tc(86,di,2,0,"ng-option",67),n.tc(87,si,2,0,"ng-option",67),n.tc(88,ci,2,2,"ng-option",65),n.Ob(),n.Ob(),n.Ob(),n.Pb(89,"div",61),n.Pb(90,"div",62),n.Pb(91,"ng-select",69),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedOrderCreditType=t}))("change",(function(){return n.oc(e),n.Yb().onSelectedOrderCreditType()})),n.Pb(92,"ng-option",70),n.vc(93," Regular Order"),n.Ob(),n.Pb(94,"ng-option",70),n.vc(95," Credit Order without Discount"),n.Ob(),n.Pb(96,"ng-option",70),n.vc(97," Credit Order with Discount"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(98,li,7,6,"div",71),n.tc(99,bi,2,0,"button",72),n.Ob(),n.Pb(100,"div",73),n.Pb(101,"div",8),n.Pb(102,"div",74),n.Pb(103,"strong"),n.vc(104,"Retailer Name: \xa0 "),n.Ob(),n.vc(105),n.Ob(),n.Pb(106,"div",74),n.Pb(107,"strong"),n.vc(108,"Channel Type: \xa0 "),n.Ob(),n.vc(109),n.Ob(),n.Pb(110,"div",74),n.Pb(111,"strong"),n.vc(112,"Location: \xa0 "),n.Ob(),n.vc(113),n.Ob(),n.Pb(114,"div",74),n.Pb(115,"strong"),n.vc(116,"Territory: \xa0 "),n.Ob(),n.vc(117),n.Ob(),n.Ob(),n.Ob(),n.Pb(118,"div",75),n.Pb(119,"div",76),n.Pb(120,"div",77),n.vc(121,"Product Name"),n.Ob(),n.Pb(122,"div",78),n.vc(123,"Unit"),n.Ob(),n.Pb(124,"div",79),n.vc(125,"QTY."),n.Ob(),n.Pb(126,"div",79),n.vc(127,"T.P"),n.Ob(),n.Pb(128,"div",79),n.vc(129,"T.O"),n.Ob(),n.Pb(130,"div",79),n.vc(131,"T. Dis. (%)"),n.Ob(),n.Pb(132,"div",79),n.vc(133,"S. Disc."),n.Ob(),n.Pb(134,"div",79),n.vc(135,"E. Disc."),n.Ob(),n.Pb(136,"div",79),n.vc(137,"Tax"),n.Ob(),n.Pb(138,"div",80),n.vc(139,"Net Amount"),n.Ob(),n.Ob(),n.tc(140,pi,31,29,"div",81),n.tc(141,hi,3,0,"div",82),n.Pb(142,"div",83),n.Pb(143,"div",84),n.vc(144,"Total Items"),n.Ob(),n.Pb(145,"div",85),n.vc(146),n.Ob(),n.Kb(147,"div",86),n.Kb(148,"div",86),n.Kb(149,"div",86),n.Kb(150,"div",86),n.Kb(151,"div",86),n.Pb(152,"div",87),n.vc(153,"Gross Amount:"),n.Ob(),n.Pb(154,"div",88),n.vc(155),n.Zb(156,"number"),n.Ob(),n.Ob(),n.Pb(157,"div",89),n.Kb(158,"div",84),n.Kb(159,"div",85),n.Kb(160,"div",86),n.Kb(161,"div",86),n.Kb(162,"div",86),n.Kb(163,"div",86),n.Kb(164,"div",86),n.Pb(165,"div",87),n.vc(166,"Trade Offer:"),n.Ob(),n.Pb(167,"div",88),n.vc(168),n.Zb(169,"number"),n.Ob(),n.Ob(),n.Pb(170,"div",89),n.Kb(171,"div",84),n.Kb(172,"div",85),n.Kb(173,"div",86),n.Kb(174,"div",86),n.Kb(175,"div",86),n.Kb(176,"div",86),n.Kb(177,"div",86),n.Pb(178,"div",87),n.vc(179,"Trade Discount:"),n.Ob(),n.Pb(180,"div",88),n.vc(181),n.Zb(182,"number"),n.Ob(),n.Ob(),n.Pb(183,"div",89),n.Kb(184,"div",84),n.Kb(185,"div",85),n.Kb(186,"div",86),n.Kb(187,"div",86),n.Kb(188,"div",86),n.Kb(189,"div",86),n.Kb(190,"div",86),n.Pb(191,"div",87),n.vc(192,"Special Discount:"),n.Ob(),n.Pb(193,"div",88),n.vc(194),n.Zb(195,"number"),n.Ob(),n.Ob(),n.Pb(196,"div",89),n.Kb(197,"div",84),n.Kb(198,"div",85),n.Kb(199,"div",86),n.Kb(200,"div",86),n.Kb(201,"div",86),n.Kb(202,"div",86),n.Kb(203,"div",86),n.Pb(204,"div",87),n.vc(205,"Extra Discount:"),n.Ob(),n.Pb(206,"div",88),n.vc(207),n.Zb(208,"number"),n.Ob(),n.Ob(),n.Pb(209,"div",89),n.Kb(210,"div",84),n.Kb(211,"div",85),n.Kb(212,"div",86),n.Kb(213,"div",86),n.Kb(214,"div",86),n.Kb(215,"div",86),n.Kb(216,"div",86),n.Pb(217,"div",87),n.vc(218,"Tax:"),n.Ob(),n.Pb(219,"div",88),n.vc(220),n.Zb(221,"number"),n.Ob(),n.Ob(),n.Pb(222,"div",89),n.Kb(223,"div",84),n.Kb(224,"div",85),n.Kb(225,"div",86),n.Kb(226,"div",86),n.Kb(227,"div",86),n.Kb(228,"div",86),n.Kb(229,"div",86),n.Pb(230,"div",87),n.Pb(231,"strong"),n.vc(232,"Total Amount Due:"),n.Ob(),n.Ob(),n.Pb(233,"div",90),n.vc(234),n.Zb(235,"number"),n.Ob(),n.Ob(),n.Pb(236,"div",89),n.Kb(237,"div",84),n.Kb(238,"div",85),n.Kb(239,"div",86),n.Kb(240,"div",86),n.Kb(241,"div",86),n.Kb(242,"div",86),n.Kb(243,"div",86),n.Pb(244,"div",87),n.Pb(245,"strong"),n.vc(246,"Cash:"),n.Ob(),n.Ob(),n.Pb(247,"div",90),n.vc(248),n.Zb(249,"number"),n.Ob(),n.Ob(),n.Pb(250,"div",89),n.Kb(251,"div",84),n.Kb(252,"div",85),n.Kb(253,"div",86),n.Kb(254,"div",86),n.Kb(255,"div",86),n.Kb(256,"div",86),n.Kb(257,"div",86),n.Pb(258,"div",87),n.Pb(259,"strong"),n.vc(260,"Cheque Payment:"),n.Ob(),n.Ob(),n.Pb(261,"div",90),n.vc(262),n.Zb(263,"number"),n.Ob(),n.Ob(),n.Pb(264,"div",89),n.Kb(265,"div",84),n.Kb(266,"div",85),n.Kb(267,"div",86),n.Kb(268,"div",86),n.Kb(269,"div",86),n.Kb(270,"div",86),n.Kb(271,"div",86),n.Pb(272,"div",87),n.Pb(273,"strong"),n.vc(274,"Credited Amount:"),n.Ob(),n.Ob(),n.Pb(275,"div",90),n.vc(276),n.Zb(277,"number"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(278,"div",91),n.Pb(279,"div",92),n.Pb(280,"div",93),n.tc(281,mi,4,0,"button",94),n.tc(282,Oi,2,2,"button",95),n.tc(283,vi,2,0,"button",96),n.tc(284,_i,2,2,"button",97),n.tc(285,Pi,2,0,"button",98),n.tc(286,fi,2,0,"button",99),n.tc(287,yi,2,0,"button",100),n.tc(288,xi,2,0,"button",101),n.tc(289,Ci,2,0,"button",102),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.yb(12),n.ec("ngIf",e.selectedProduct.hasOwnProperty("quantity")),n.yb(9),n.ec("ngIf",!e.isCredit),n.yb(1),n.ec("ngIf",!e.isCredit),n.yb(1),n.ec("ngIf",e.isCredit),n.yb(1),n.ec("ngIf",e.isCredit),n.yb(1),n.ec("ngIf","partial"===e.paymentTypeCheque&&"full"===e.paymentTypeCredit||"full"===e.paymentTypeCheque&&"partial"===e.paymentTypeCredit),n.yb(2),n.ec("disabled","partial"===e.paymentTypeCheque&&"full"===e.paymentTypeCredit||"full"===e.paymentTypeCheque&&"partial"===e.paymentTypeCredit),n.yb(4),n.ec("ngClass",e.showProducts?"active":""),n.yb(11),n.ec("ngModel",e.productSearchText),n.yb(9),n.ec("ngIf",!e.loadingProducts),n.yb(1),n.ec("ngIf",e.loadingProducts),n.yb(10),n.xc("",e.title," "),n.yb(11),n.ec("multiple",!1)("readonly",e.isEdit)("ngModel",e.selectedEmployee),n.yb(3),n.ec("ngForOf",e.orderBookers),n.yb(3),n.ec("multiple",!1)("readonly",e.isEdit)("ngModel",e.selectedRoute),n.yb(1),n.ec("ngIf",!e.selectedEmployee),n.yb(1),n.ec("ngIf",e.selectedEmployee),n.yb(1),n.ec("ngForOf",e.routes),n.yb(3),n.ec("multiple",!1)("readonly",e.isEdit)("ngModel",e.selectedRetailer),n.yb(1),n.ec("ngIf",!e.selectedRoute),n.yb(1),n.ec("ngIf",e.selectedRoute),n.yb(1),n.ec("ngForOf",e.retailers),n.yb(3),n.ec("readonly",e.isEdit)("multiple",!1)("disabled",e.selectedProducts.length)("ngModel",e.selectedOrderCreditType),n.yb(1),n.ec("value",e.ORDER_TYPE.Regular_Order),n.yb(2),n.ec("value",e.ORDER_TYPE.Credit_Order_Without_Discount),n.yb(2),n.ec("value",e.ORDER_TYPE.Credit_Order_With_Discount),n.yb(2),n.ec("ngIf",e.selectedOrderCreditType),n.yb(1),n.ec("ngIf",!e.isEdit),n.yb(6),n.xc(" ",(null==e.selectedRetailer?null:e.selectedRetailer.retailer_name)||"--"," "),n.yb(4),n.yc(" ",(null==e.selectedRetailer?null:e.selectedRetailer.type)||"--"," ",e.selectedRetailer&&" ("+(null==e.selectedRetailer?null:e.selectedRetailer.segment_name)+")"," "),n.yb(4),n.xc(" ",(null==e.selectedRetailer?null:e.selectedRetailer.loc)||"--"," "),n.yb(4),n.xc(" ",(null==e.selectedRetailer?null:e.selectedRetailer.territory)||"--"," "),n.yb(23),n.ec("ngForOf",e.selectedProducts),n.yb(1),n.ec("ngIf",!e.selectedProducts.length),n.yb(5),n.xc(" ",e.selectedProducts.length," "),n.yb(9),n.xc(" ",n.bc(156,64,e.grossAmount,"1.2-2")," "),n.yb(13),n.xc(" ",n.bc(169,67,e.tradeOffer,"1.2-2")," "),n.yb(13),n.xc(" ",n.bc(182,70,e.tradeDiscount,"1.2-2")," "),n.yb(13),n.xc(" ",n.bc(195,73,e.specialDiscount||0,"1.2-2")," "),n.yb(13),n.xc(" ",n.bc(208,76,e.extraDiscount,"1.2-2")," "),n.yb(13),n.xc(" ",n.bc(221,79,e.tax,"1.2-2")," "),n.yb(14),n.xc(" ",n.bc(235,82,e.dueAmount,"1.2-2")," "),n.yb(14),n.xc(" ",n.bc(249,85,(null==e.cash?null:e.cash.amount_received)||0,"1.2-2")," "),n.yb(14),n.xc(" ",n.bc(263,88,(null==e.cheque?null:e.cheque.amount_received)||0,"1.2-2")," "),n.yb(14),n.xc(" ",n.bc(277,91,(e.selectedOrderCreditType===e.ORDER_TYPE.Credit_Order_With_Discount||e.selectedOrderCreditType===e.ORDER_TYPE.Credit_Order_Without_Discount?e.dueAmount:null==e.credit?null:e.credit.amount_received)||0,"1.2-2")," "),n.yb(5),n.ec("ngIf",e.isOrdering),n.yb(1),n.ec("ngIf",!e.isOrdering&&!e.isEdit),n.yb(1),n.ec("ngIf",!e.isOrdering&&e.isEdit),n.yb(1),n.ec("ngIf",!e.isOrdering),n.yb(1),n.ec("ngIf",!e.isOrdering&&!e.isChequeAdded&&e.selectedOrderCreditType===e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.isOrdering&&e.isChequeAdded&&(e.selectedOrderCreditType!==e.ORDER_TYPE.Credit_Order_Without_Discount||e.selectedOrderCreditType!==e.ORDER_TYPE.Credit_Order_Without_Discount)),n.yb(1),n.ec("ngIf",!e.isOrdering&&!e.isCreditAdded&&e.selectedOrderCreditType===e.ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",!e.isOrdering&&e.isCreditAdded),n.yb(1),n.ec("ngIf",!e.isOrdering)}}let ki=(()=>{class e{constructor(e,t,i,r,o,a,n){this.router=e,this.route=t,this.generalDataService=i,this.storageService=r,this.ordersService=o,this.toastService=a,this.dataService=n,this.newlySavedOrderId="",this.ORDER_TYPE=E.a.ORDER_TYPE,this.PRODUCT_TYPE=E.a.PRODCUT_TYPE,this.isEdit=!1,this.isCancel=!1,this.selectedProduct={},this.schemeItemIds=[],this.allProducts=[],this.dispProducts=[],this.specialDiscounts=[],this.prefrences=[],this.orderBookers=[],this.routes=[],this.retailers=[],this.selectedProducts=[],this.selectedProductsIds=[],this.schemes=[],this.subInventory=[],this.discountSlabs=[],this.loading=!1}ngOnInit(){this.orderId=this.route.snapshot.queryParams.orderId,this.orderId&&(this.isEdit=!0,this.loading=!0),this.title=this.isEdit?"Edit":"New",this.grossAmount=0,this.tradeOffer=0,this.tradeDiscount=0,this.specialDiscount=0,this.extraDiscount=0,this.tax=0,this.dueAmount=0,this.totalAmountAfterScheme=0,this.notes="",this.paymentDate=(new Date).toISOString().split("T")[0],this.paymentTypeCheque="",this.paymentTypeCredit="",this.addedPayment="",this.currentPayment="",this.getSchemesData(),this.getOrderBookers(),this.getCounterSaleData()}getOrderDetail(){this.loading=!0,this.ordersService.getOrderDetails(this.orderId).subscribe(e=>{200===e.status&&(this.orderDetail=e.data,this.selectedEmployee=this.orderDetail.employee_id,this.selectedOrderCreditType=this.orderDetail.credit_order_type.toString(),this.selectedProductType=this.orderDetail.order_context,this.getRoutes())},e=>{this.loading=!1,401!==e.status&&1!==e.status&&this.toastService.showToaster({title:"Error:",message:"Credit Orders not fetched, try again later.",type:"error"}),scrollTo(0,0)})}getOrderBookers(){this.distributorId=this.storageService.getItem("distributor").id,this.generalDataService.getOrderBookers(this.distributorId).subscribe(e=>{200===e.status?(this.orderBookers=e.data,this.isEdit&&this.getOrderDetail()):this.toastService.showToaster({type:"error",message:e.message,title:"Error:"})},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch order bookers. Please try again",title:"Error:"})})}getCounterSaleData(){this.loadingProducts=!0,this.ordersService.getCounterSaleData().subscribe(e=>{this.loadingProducts=!1,200===e.status?(this.allProducts=e.data.inventory.map(e=>(e.net_amount=0,e.isAdded=!1,e)),this.specialDiscounts=e.data.special_discount,this.dispProducts=JSON.parse(JSON.stringify(this.allProducts)),this.subInventory=e.data.sub_inventory):this.toastService.showToaster({type:"error",message:e.message,title:"Error:"})},e=>{this.loadingProducts=!1,1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch counter sale data. Please try again",title:"Error:"})})}resetValues(){this.selectedProducts=[],this.selectedProductsIds=[],this.grossAmount=0,this.tradeOffer=0,this.tradeDiscount=0,this.specialDiscount=0,this.extraDiscount=0,this.credit=null,this.cheque=null,this.cash=null,this.tax=0,this.dueAmount=0,this.notes="",this.paymentDate=(new Date).toISOString().split("T")[0],this.paymentTypeCheque="",this.paymentTypeCredit="",this.addedPayment="",this.allProducts=this.allProducts.map(e=>(e.isAdded=!1,e)),this.dispProducts=JSON.parse(JSON.stringify(this.allProducts))}getSchemesData(){this.ordersService.getSchemes().subscribe(e=>{200===e.status?this.schemes=e.data:this.toastService.showToaster({type:"error",message:e.message,title:"Error:"})},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch Trade Offers. Please try again",title:"Error:"})})}onSelectedOrderCreditType(){}onRetailerCahange(){}getDiscountSlabs(){this.selectedSegment=this.selectedRetailer.segment_id,this.resetValues(),this.ordersService.getDiscountSlabs().subscribe(e=>{if(200===e.status){this.discountSlabs=e.data;const t=this.dataService.getSlabNormalOrExclusive(this.selectedProductType);console.log("slab_type => ",t),this.merchantDiscount=this.discountSlabs.find(e=>e.region_id===this.selectedRegion&&this.selectedSegment===e.segment_id&&e.channel_id===this.selectedRetailer.type_id&&e.slab_type===t),console.log("this.merchantDiscount => ",this.merchantDiscount)}},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch Trade Discount. Please try again",title:"Error:"})})}focused(e){e.target.parentElement.classList.add("focused")}left(e){e.target.value||e.target.parentElement.classList.remove("focused")}isFullyPaymentAdded(e){"Credit"===e?this.paymentTypeCredit="":this.paymentTypeCheque="",0===this.selectedProducts.length&&0===this.dueAmount?this.toastService.showToaster({type:"error",message:"Please select products first!",title:"Payment cannot be added"}):"full"!==this.paymentTypeCheque&&"full"!==this.paymentTypeCredit||this.addedPayment===e?(document.getElementById("open-modal-payment").click(),this.focusForPaymentValues()):this.toastService.showToaster({type:"error",message:`You already selected Full payment for ${this.addedPayment} please remove it if you want to add ${this.currentPayment}!`,title:"Full Payment selected for "+this.addedPayment})}focusForPaymentValues(){this.isCredit&&this.creditAmount?document.getElementById("Amount2").parentElement.classList.add("focused"):(this.chequeAmount&&document.getElementById("Amount1").parentElement.classList.add("focused"),this.bankName&&document.getElementById("chequeBankName").parentElement.classList.add("focused"),this.chequeNumber&&document.getElementById("chequeNum").parentElement.classList.add("focused"))}currentFullPayment(e,t){"full"!==this.paymentTypeCheque&&"full"!==this.paymentTypeCredit||this.addedPayment===e?(this.addedPayment=e,this.currentPayment=t):this.toastService.showToaster({type:"error",message:`You already selected Full payment for ${this.addedPayment} please remove it if you want to add ${this.currentPayment}!`,title:"Full Payment selected for "+this.addedPayment})}setPartial(e){e===this.addedPayment&&(this.credit&&"Credit"===e&&(this.cash.amount_received=this.cash.amount_received+this.credit.amount_received,this.credit.amount_received=0),this.cheque&&"Cheque Payment"===e&&(this.cash.amount_received=this.cash.amount_received+this.cheque.amount_received,this.cheque.amount_received=0),this.addedPayment="",this.currentPayment="",this.alreadyFullPayment=!1)}checkPaymentHasValues(){return this.isCredit?"full"===this.paymentTypeCredit?this.paymentTypeCredit.length>0:this.paymentTypeCredit.length>0&&this.creditAmount&&this.creditAmount>-1&&this.creditAmount<=this.cash.amount_received:"full"===this.paymentTypeCheque?this.paymentTypeCheque.length>0&&this.bankName.length>0&&this.chequeNumber.length>0&&this.paymentDate.length>0:this.paymentTypeCheque.length>0&&this.chequeAmount&&this.chequeAmount>-1&&this.chequeAmount<=this.cash.amount_received&&this.bankName.length>0&&this.chequeNumber.length>0&&this.paymentDate.length>0}removeCheque(){this.cheque=null,this.isChequeAdded=!1,this.paymentTypeCheque="",this.calculatePayments()}removeCredit(){this.credit=null,this.isCreditAdded=!1,this.paymentTypeCredit="",this.calculatePayments()}makePayment(){this.isCredit&&(this.credit={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:"Counter",payment_mode:"Credit",payment_detail:"",dispatched_bill_amount:0,recovery:0,amount_received:"full"===this.paymentTypeCredit?this.dueAmount:this.creditAmount},this.isCreditAdded=!0),this.isCredit||(this.cheque={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:"Counter",payment_mode:"Cheque",payment_detail:{cheque_amount:"full"===this.paymentTypeCheque?JSON.parse(JSON.stringify(this.dueAmount)):JSON.parse(JSON.stringify(this.chequeAmount)),bank_name:JSON.parse(JSON.stringify(this.bankName)),cheque_number:JSON.parse(JSON.stringify(this.chequeNumber)),cheque_date:JSON.parse(JSON.stringify(this.paymentDate))},dispatched_bill_amount:0,recovery:0,amount_received:"full"===this.paymentTypeCheque?JSON.parse(JSON.stringify(this.dueAmount)):JSON.parse(JSON.stringify(this.chequeAmount))},this.isChequeAdded=!0),this.calculatePayments()}addPaymentMethod(){this.isAdded=!0,this.checkPaymentHasValues()&&(this.isAdded=!1,this.makePayment(),document.getElementById("open-modal-payment").click())}paymentCancelled(){this.isAdded=!1,this.resetPaymentValues(),this.paymentTypeCredit="",this.paymentTypeCheque=""}resetPaymentValues(){this.chequeAmount=null,this.paymentDate=(new Date).toISOString().split("T")[0],this.bankName="",this.chequeNumber=null,this.creditAmount=null}getRoutes(){const e=this.orderBookers.find(e=>e.employee_id===this.selectedEmployee);this.selectedRegion=e.region_id,this.selectedRoute=null,this.selectedRetailer=null,this.resetValues(),this.generalDataService.getOrderBookerRoutes(this.selectedEmployee).subscribe(e=>{200===e.status?(this.routes=e.data,this.isEdit&&(this.selectedRoute=this.orderDetail.assigned_route_id,this.getRetailerByRoute())):this.toastService.showToaster({type:"error",message:e.message,title:"Error:"})},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch order booker routes. Please try again",title:"Error:"})})}getRetailerByRoute(){this.selectedRetailer=null,this.resetValues(),this.generalDataService.getRetailersByRoute(this.selectedRoute).subscribe(e=>{200===e.status?(this.retailers=e.data,this.isEdit&&(this.selectedRetailer=this.retailers.find(e=>e.id===this.orderDetail.retailer_id),this.orderDetail.items.forEach(e=>{const t=this.allProducts.find(t=>t.item_id==e.item_id);t.stockQty=e.executed_qty,this.selectedProduct=t,this.addProductToOrder(),this.setQuantity(this.selectedProduct)}),this.loading=!1)):this.toastService.showToaster({type:"error",message:e.message,title:"Error:"})},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch retailers. Please try again",title:"Error:"})})}openQuantityModal(e){var t;this.showQuantityModal=!0,(null===(t=e.schemes)||void 0===t?void 0:t.length)&&(e.schemes=e.schemes.map(e=>{switch(e.scheme_type){case"free_product":e.name=xt.d.free_products,e.rule_name=xt.c[e.scheme_rule];break;case"dotp":e.name=xt.d.dotp;break;default:e.name=xt.d.gift}return e})),this.selectedProduct=Object.assign({},e),this.selectedProduct.selectedScheme=null}showProductsList(e){e.stopPropagation(),this.selectedRetailer?this.selectedOrderCreditType?this.selectedProductType>-1?(this.allProducts=this.allProducts.map(e=>(e.schemes=this.dataService.getSchemes(e.item_id,e.unit_id,e.pref_id,this.schemes,this.selectedRetailer.type_id,this.selectedRetailer.id),e)),console.log("schemes => ",this.allProducts.filter(e=>e.schemes.length)),this.dispProducts=[...this.allProducts].filter(e=>this.selectedProductType==e.is_exclusive),console.log("this.dispProducts => ",this.dispProducts),this.showProducts=!0,document.body.classList.add("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.add("d-block"),document.getElementById("counter-sale").classList.add("blur-div")):this.toastService.showToaster({type:"error",message:"Please select Product Type first!",title:"Fill required fields:"}):this.toastService.showToaster({type:"error",message:"Please select Order Type first!",title:"Fill required fields:"}):this.toastService.showToaster({type:"error",message:"Please select Retailer first!",title:"Fill required fields:"})}isNumber(e,t="charges"){return this.dataService.isNumber(e,t)}setQuantity(e){e.item_trade_price&&(this.selectedProducts.find(t=>t.item_id===e.item_id)&&(this.grossAmount=this.grossAmount-e.original_amount||0),e.parent_qty_sold=this.dataService.getParentQty(+e.stockQty,e.quantity),this.calculateProductPrice(e),this.calculateProductDiscounts(e),this.calculateTotalBill(),this.applySlabOnAllProducts())}calculateProductPrice(e){e.original_amount=this.dataService.calculateUnitPrice(+e.stockQty,e.item_trade_price),e.gross_amount=e.unit_price_after_scheme_discount||e.item_trade_price*+e.stockQty}applySlabOnAllProducts(){this.selectedOrderCreditType!==this.ORDER_TYPE.Credit_Order_Without_Discount&&this.merchantDiscount&&"slab"===this.merchantDiscount.discount_filter&&this.grossAmount&&(console.log("slab => ",this.merchantDiscount),this.selectedProducts=this.selectedProducts.map(e=>(this.dataService.isSlabApplyAble(this.selectedProductType,this.merchantDiscount.slab_type)&&(e=this.dataService.applySlabForTotal(e,this.merchantDiscount,this.grossAmount)),(e=this.calculateProductSpecialDiscount(e)).extra_discount&&(e.price=e.unit_price_after_special_discount-+e.extra_discount),this.calculateNetAmountOfProduct(e),e)),this.calculateTotalBill())}addProductToOrder(){!this.selectedProduct.selectedScheme||this.selectedProduct.selectedScheme.applied?(this.isAdded=!0,+this.selectedProduct.stockQty>0&&this.selectedProduct.pref_id&&(this.selectedProducts.find(e=>e.item_id===this.selectedProduct.item_id&&e.pref_id===this.selectedProduct.pref_id)?this.alreadyAdded=!0:(this.alreadyAdded=!1,this.showQuantityModal=!1,this.allProducts=this.allProducts.map(e=>(e.item_id===this.selectedProduct.item_id&&(e.isAdded=!0),e)),this.dispProducts=this.dispProducts.map(e=>(e.item_id===this.selectedProduct.item_id&&(e.isAdded=!0),e)),this.selectedProduct.isAdded=!0,this.selectedProducts.push(this.selectedProduct),this.selectedProductsIds.includes(this.selectedProduct.item_id)||this.selectedProductsIds.push(this.selectedProduct.item_id),this.calculateTotalBill(),this.applySlabOnAllProducts(),console.log(this.selectedProduct),this.isEdit||document.getElementById("pl-qty-close").click(),this.isAdded=!1))):this.dataService.schemeCannotApplied()}removeProductFromOrder(e){this.isCreditAdded||this.isChequeAdded?this.toastService.showToaster({title:"Payment Error:",message:"Cannot edit or remove current products if payment method added!",type:"error"}):(this.selectedProducts=this.selectedProducts.filter(t=>t.item_id===e.item_id&&t.unit_name!==e.unit_name||t.item_id!==e.item_id?t:void 0),this.allProducts=this.allProducts.map(t=>(t.item_id===e.item_id&&(t.isAdded=!1),t)),this.dispProducts=this.dispProducts.map(t=>(t.item_id===e.item_id&&(t.isAdded=!1),t)),this.selectedProductsIds=this.selectedProductsIds.filter(t=>t!==e.item_id),this.calculateTotalBill(),this.applySlabOnAllProducts())}calculateProductDiscounts(e,t){this.selectedOrderCreditType!==this.ORDER_TYPE.Credit_Order_Without_Discount&&(t&&(e.selectedScheme=t),e.selectedScheme?e=this.applyScheme(e):(e.scheme_discount=0,e.price=JSON.parse(JSON.stringify(e.item_trade_price)),e.unit_price_after_scheme_discount=JSON.parse(JSON.stringify(e.item_trade_price))),this.merchantDiscount&&this.dataService.isSlabApplyAble(this.selectedProductType,this.merchantDiscount.slab_type)?e=this.dataService.applyMerchantDiscountForSingleProduct(this.merchantDiscount,e,this.grossAmount):(e.trade_discount=0,e.trade_discount_pkr=0,e.unit_price_after_merchant_discount=e.price),e=this.calculateProductSpecialDiscount(e),this.calculateNetAmountOfProduct(e)),this.selectedOrderCreditType===this.ORDER_TYPE.Credit_Order_Without_Discount&&(e.scheme_discount=0,e.price=e.item_trade_price,e.unit_price_after_scheme_discount=e.item_trade_price,e.trade_discount=0,e.trade_discount_pkr=0,e.unit_price_after_merchant_discount=e.price,e.trade_discount=0,e.trade_discount_pkr=0,e.unit_price_after_merchant_discount=e.price),!e.extra_discount||+e.stockQty<1?(e.extra_discount=0,e.extra_discount_pkr=0,this.calculateNetAmountOfProduct(e)):this.calculateExtraDiscount(e)}calculateProductSpecialDiscount(e){return this.dataService.getSpecialDiscounts(this.selectedSegment,this.selectedRegion,e,this.specialDiscounts)}calculateExtraDiscount(e){this.selectedOrderCreditType===this.ORDER_TYPE.Credit_Order_Without_Discount&&(e.unit_price_after_special_discount=e.unit_price_after_merchant_discount),+e.extra_discount<e.unit_price_after_special_discount?(e.price=e.unit_price_after_special_discount-+e.extra_discount,e.extra_discount_pkr=+e.stockQty*+e.extra_discount):(e.extra_discount=0,e.extra_discount_pkr=0,e.price=e.unit_price_after_special_discount,this.toastService.showToaster({type:"error",message:"Discount should not be greater than item price!",title:"Error:"})),this.calculateNetAmountOfProduct(e),this.calculateTotalBill()}calculateProductTax(e){e.tax_class_amount?(e.tax_amount_value=e.tax_class_amount/100*e.item_retail_price,e.tax_amount_pkr=e.tax_amount_value*e.stockQty,e.net_amount=e.net_amount+e.tax_amount_pkr):(e.tax_amount_value=0,e.tax_amount_pkr=0)}calculateNetAmountOfProduct(e){e.net_amount=this.dataService.calculateUnitPrice(e.price,+e.stockQty),this.calculateProductTax(e)}calculateTotalBill(){this.selectedProducts.length&&(this.selectedProductQuantities=this.selectedProducts.map(e=>+e.parent_qty_sold).reduce((e,t)=>e+t));let e=this.selectedProducts.map(e=>e.original_amount);this.grossAmount=this.dataService.calculateItemsBill(e),e=this.selectedProducts.map(e=>e.stockQty*e.item_retail_price),this.totalRetailPrice=this.dataService.calculateItemsBill(e),e=this.selectedProducts.map(e=>e.gross_amount),this.totalAmountAfterScheme=this.dataService.calculateItemsBill(e),e=this.selectedProducts.map(e=>e.net_amount),this.dueAmount=this.dataService.calculateItemsBill(e),e=this.selectedProducts.map(e=>e.original_amount),this.orderTotal=JSON.parse(JSON.stringify(this.dueAmount));let t=this.selectedProducts.map(e=>+e.stockQty*e.scheme_discount);this.tradeOffer=this.dataService.calculateItemsBill(t),t=this.selectedProducts.map(e=>+e.stockQty*e.trade_discount_pkr),this.tradeDiscount=this.dataService.calculateItemsBill(t),t=this.selectedProducts.map(e=>+e.stockQty*e.special_discount_pkr),this.specialDiscount=this.dataService.calculateItemsBill(t),t=this.selectedProducts.map(e=>+e.extra_discount_pkr),this.extraDiscount=this.dataService.calculateItemsBill(t);const i=this.selectedProducts.map(e=>e.tax_amount_pkr);this.tax=this.dataService.calculateItemsBill(i),this.calculatePayments()}calculatePayments(){this.cash={retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:"Counter",payment_mode:"Cash",payment_detail:"",dispatched_bill_amount:0,recovery:0,amount_received:this.selectedOrderCreditType!==this.ORDER_TYPE.Regular_Order?0:this.dueAmount},this.cheque&&(this.cash.amount_received=this.cash.amount_received-this.cheque.amount_received),this.credit&&(this.cash.amount_received=this.cash.amount_received-this.credit.amount_received),this.cash.amount_received=+this.cash.amount_received.toFixed(2)}applyScheme(e){switch(e.selectedScheme.scheme_type){case"free_product":e=this.applyFreeProductScheme(e);break;case"dotp":e=this.applyDOTPScheme(e);break;default:e=this.applyGiftScheme(e)}return e}applyFreeProductScheme(e){return this.dataService.applyFreeProductScheme(e)}applyDOTPScheme(e){return this.dataService.getSDForDOTP(e)}applyGiftScheme(e){return this.dataService.getSDForGift(e)}closeQuantityModal(e){this.showQuantityModal&&!e.target.classList.contains("dont-close-quantity")&&(this.showQuantityModal=!1,this.selectedProduct=JSON.parse(JSON.stringify({})))}searchProduct(){this.dispProducts=this.allProducts.filter(this.productSearchText?e=>e.item_name.toLowerCase().includes(this.productSearchText.toLowerCase())||e.item_sku.toLowerCase().includes(this.productSearchText.toLowerCase()):e=>e.item_name.toLowerCase().includes(this.productSearchText.toLowerCase()))}isAlreadyAdded(e){return this.selectedProductsIds.includes(e)}clickedOutSide(e){!this.showProducts||this.showQuantityModal||e.target.classList.contains("dont-close-products")||this.closeProductsList()}closeProductsList(){this.showProducts=!1,document.body.classList.remove("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.remove("d-block"),document.getElementById("counter-sale").classList.remove("blur-div")}isDataValid(){return!(!this.selectedProductsIds.length||!this.selectedEmployee&&!this.selectedRoute||!this.selectedRetailer)}onCancelOrder(){this.isCancel=!0,this.setOrderFields()}setOrderFields(){if(this.isDataValid()){const e=this.orderBookers.find(e=>e.employee_id===this.selectedEmployee),t={area_id:e.area_id,assigned_route_id:this.selectedRoute,booking_territory:e.territory_id,order_type:"counter",counter_sale:1,spot_sale:0,sales_man_id:0,within_radius:0,booking_region:this.selectedRegion,invoice_number:"",invoice_date:(new Date).toISOString(),remarks:this.notes,retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,gross_sale_amount:this.grossAmount,total_amount_after_tax:this.dueAmount,total_discount:this.specialDiscount+this.tradeDiscount+this.tradeOffer+this.extraDiscount,total_tax_amount:this.tax,booked_order_value:0,booked_total_qty:0,booked_total_skus:0,booking_area:e.area_id,booking_locality_id:this.selectedRetailer.locality_id,booking_neighbourhood_id:this.selectedRetailer.neighbourhood_id,booking_zone:e.area_id,employee_id:e.employee_id,freight_charges:0,order_total:this.orderTotal,region_id:this.selectedRegion,order_context:this.selectedProductType,status:this.selectedOrderCreditType===this.ORDER_TYPE.Regular_Order?"Completed":E.a.Creditsale_Satatus,status_code:this.selectedOrderCreditType===this.ORDER_TYPE.Regular_Order?0:5,territory_id:e.territory_id,total_retail_price:this.totalRetailPrice,ttl_products_sold:this.selectedProductsIds.length,ttl_qty_sold:this.selectedProductQuantities,payment:{total_payment:this.dueAmount,detail:[]},items:[],credit_order_type:this.selectedOrderCreditType,creditsales_at:this.selectedOrderCreditType===this.ORDER_TYPE.Regular_Order?null:new Date};this.isEdit&&(t.id=this.orderDetail.id,this.isCancel?(t.status="Cancelled",t.status_code=4):(t.status="Completed",t.status_code=3,t.completed_at=new Date)),this.order=t,this.cheque&&this.order.payment.detail.push(this.cheque),this.credit&&this.order.payment.detail.push(this.credit),this.order.payment.detail.push(this.cash),this.selectedOrderCreditType!==this.ORDER_TYPE.Regular_Order&&this.order.payment.detail.push({retailer_id:this.selectedRetailer.retailer_id,distributor_id:this.distributorId,type:"Counter",payment_mode:"Credit",payment_detail:"",dispatched_bill_amount:0,recovery:0,amount_received:this.dueAmount}),this.setOrderItems(e)}else this.toastService.showToaster({type:"error",message:"Please select Employee, Route, Retailer and Products to place the order!",title:"Error:"})}setOrderItems(e){this.selectedProducts.forEach((t,i)=>{var r,o,a,n,d;const s={item_id:t.item_id,pref_id:t.pref_id,unit_id:t.unit_id,item_name:t.item_name,unit_name:t.unit_name,item_quantity_booker:0,quantity_returned:0,area_id:e.area_id,division_id:e.division_id,assigned_route_id:this.selectedRoute,booked_total_qty:0,quantity:+t.stockQty,gross_sale_amount:t.original_amount,booked_order_value:0,brand_id:t.brand_id,campaign_id:(null===(r=t.selectedScheme)||void 0===r?void 0:r.id)||0,dispatch_status:0,distributor_id:this.distributorId,final_price:t.net_amount,gift_value:t.gift_value||0,item_quantity_updated:0,item_status:t.is_active,order_id:0,original_price:t.item_trade_price,scheme_id:(null===(o=t.selectedScheme)||void 0===o?void 0:o.id)||0,scheme_discount:t.scheme_discount,unit_price_after_scheme_discount:t.unit_price_after_scheme_discount,merchant_discount_pkr:t.trade_discount_pkr,merchant_discount:t.trade_discount,unit_price_after_merchant_discount:t.unit_price_after_merchant_discount,special_discount:t.special_discount||0,unit_price_after_special_discount:t.unit_price_after_special_discount||0,booker_discount:t.extra_discount||0,unit_price_after_individual_discount:t.unit_price_after_individual_discount||t.price,scheme_min_quantity:(null===(a=t.selectedScheme)||void 0===a?void 0:a.min_qty)||0,scheme_quantity_free:(null===(n=t.selectedScheme)||void 0===n?void 0:n.quantity_free)||0,scheme_rule:(null===(d=t.selectedScheme)||void 0===d?void 0:d.rule_name)||"",parent_pref_id:t.child,parent_unit_id:t.parent_unit_id,parent_brand_id:t.brand_id,parent_tp:t.parent_trade_price,reasoning:"",region_id:this.selectedRegion,territory_id:e.territory_id,parent_qty_sold:t.parent_qty_sold,parent_value_sold:t.net_amount,tax_class_id:t.tax_class_id,tax_in_percentage:t.tax_class_amount,tax_in_value:t.tax_amount_value,total_amount_after_tax:t.net_amount,total_discount:+t.stockQty*t.scheme_discount+ +t.stockQty*t.trade_discount_pkr+ +t.stockQty*t.special_discount+t.extra_discount_pkr||0,total_retail_price:t.stockQty*t.item_retail_price,total_tax_amount:t.tax_amount_pkr||0,is_exclusive:t.is_exclusive};this.order.items.push(s),i===this.selectedProducts.length-1&&this.placeOrder()})}openBillsModal(){document.getElementById("billsPrintPaperModalTrigger").click()}getBills(e="A4"){document.getElementById("close-bills").click();const t=`${E.a.baseUrl}${A.a.BILLS}?type=bill&order_booker=${this.order.employee_id}&date=${this.order.invoice_date.substring(0,10)}&size=${e}&orderID=${this.newlySavedOrderId}`;window.open(t,"_blank")}placeOrder(){this.isOrdering=!0,this.ordersService.counterSaleOrder(this.order).subscribe(e=>{if(this.isOrdering=!1,200===e.status){let t="Placed";this.isEdit&&(t=this.isCancel?"Canceled":"Completed");const i={type:"success",message:`Order ${t} successfully!`,title:"Order Placed:"};this.openBillsModal(),this.newlySavedOrderId=e.data.id,this.toastService.showToaster(i),this.isEdit&&this.router.navigate(["reports/credit-counter-sale"]),this.selectedEmployee=null,this.selectedRoute=null,this.selectedRetailer=null,this.selectedOrderCreditType=null,this.credit=null,this.cheque=null,this.cash=null,this.retailers=[],this.routes=[],this.isChequeAdded=!1,this.isCreditAdded=!1,this.resetValues(),this.paymentCancelled()}},e=>{this.isOrdering=!1,1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Order cannot be placed at the moment! Please try again",title:"Error:"})})}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(a.f),n.Jb(a.a),n.Jb(s.b),n.Jb(K.a),n.Jb(c.a),n.Jb(l.a),n.Jb(Ct.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-counter-sale"]],decls:28,vars:2,consts:[["id","billsModalCounterSale","tabindex","-1","role","dialog","aria-labelledby","billsModalCounterSaleLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top_border"],[1,"modal-header"],["id","billsModalCounterSaleLabel",1,"modal-title"],["type","button","id","close-bills","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-12"],[1,"heading3"],[1,"row","print-icon-div","pb-0"],[1,"col-6","pl-0"],[3,"click"],["src","assets/images/a4.svg","alt","",1,"print-icon"],[1,"col-6","pr-0"],["src","assets/images/a5.svg","alt","",1,"print-icon"],["lass","col-12",4,"ngIf"],[4,"ngIf"],["lass","col-12"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","dont-close-products",3,"click"],["aria-hidden","true",1,"dont-close-products"],["class","modal-body AddDetailPR",4,"ngIf"],[1,"modal-footer","border-0",2,"background-color","#f6f6f6"],["type","submit",1,"btn","btn-primary","dont-close-products",3,"click"],["type","button","id","pl-qty-close","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel","dont-close-products",3,"click"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["class","modal-header",4,"ngIf"],["class","col-12",4,"ngIf"],["id","floating-label","class","form-wrap p-0",4,"ngIf"],["class","form-wrap p-10",4,"ngIf"],[1,"modal-footer","border-0"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","close-payment-modal","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel",3,"click"],["id","product-cl-sec",3,"ngClass","clickOutside"],["id","pl-close",1,"close-btn-pl",3,"click"],[1,"pro-header-text"],[1,"se_cus-type","form-wrap","p-15"],[1,"productSearch"],[1,"fa","fa-search"],["type","text","id","","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"pc-cartlist"],[1,"overflow-plist"],[1,"plist-content"],[1,"_left-filter","pt-0"],[1,"container"],[1,"card","top_border","p-15"],["class","AddProductTable","width","100%",4,"ngIf"],["class","col-md-12 loader",4,"ngIf"],[1,"_cl-bottom"],["id","pl-prod-close","type","butotn",1,"btn","btn-cancel","mr-2",3,"click"],["id","counter-sale",1,"container","_order-container"],["data-toggle","modal","data-target","#billsModalCounterSale","id","billsPrintPaperModalTrigger","hidden","",1,"btn","btn-default","mb-0"],[1,"row","mt-2","mb-2"],[1,"col-md-12"],[1,"_head01","float-left"],[1,"row","mt-2"],[1,"card","p-20","top_border","mb-3","_INV-h"],[1,"row","_add-customer"],[1,"_sa-customer"],[1,"form-s2"],["placeholder","Select Employee",1,"formselect",3,"multiple","readonly","ngModel","ngModelChange","change"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Route",1,"formselect",3,"multiple","readonly","ngModel","ngModelChange","change"],["disabled","",4,"ngIf"],["placeholder","Select Retailer",1,"formselect",3,"multiple","readonly","ngModel","ngModelChange","change"],["placeholder","Select Order Type",1,"formselect",3,"readonly","multiple","disabled","ngModel","ngModelChange","change"],[3,"value"],["class","_sa-customer",4,"ngIf"],["id","productlist01","class","btn btn-primary ml-15",3,"click",4,"ngIf"],[1,"_cut-detail"],[1,"col-md-6"],[1,"_add-product"],[1,"row","AP_heading"],[1,"addItemCell","PL-5"],[1,"addItemCell","unit-w"],[1,"addItemCell2"],[1,"addItemCell3"],["class","row _row-product",4,"ngFor","ngForOf"],["class","row _row-product",4,"ngIf"],[1,"row","_totalBar","_totalBar2"],[1,"addItemCell","_h25","PL-5"],[1,"addItemCell","_h25","unit-w"],[1,"addItemCell2","_h25"],[1,"addItemCell2","_h25","width-t"],[1,"addItemCell3","_h25"],[1,"row","_totalBar2"],[1,"addItemCell3","_h25",2,"font-size","18px","color","#0038ba"],[1,"Action_bottom"],[1,"container-fluid","p-0"],[1,"align-right"],["type","submit","class","btn btn-primary mr-2","disabled","",4,"ngIf"],["type","submit","class","btn btn-primary btn-cancel mr-2",3,"routerLink",4,"ngIf"],["type","submit","class","btn btn-primary btn-cancel mr-2",3,"click",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","btn btn-primary float-left mr-2",3,"click",4,"ngIf"],["class","btn btn-primary float-left mr-2 red-bg",3,"click",4,"ngIf"],["class","btn btn-primary float-left",3,"click",4,"ngIf"],["class","btn btn-primary float-left red-bg",3,"click",4,"ngIf"],["id","open-modal-payment","style","display: none","data-toggle","modal","data-target","#exampleModal2",4,"ngIf"],[1,"modal-body","AddDetailPR"],[1,"col-md-4","pt-7","mb-15"],[1,"col-md-8","mb-15"],["type","text","placeholder","","required","",1,"form-control",2,"font-size","13px",3,"ngModel","keyup","keydown","ngModelChange"],["selectedQty","ngModel"],["class","input-error",4,"ngIf"],["class","col-md-4","style","padding-top: 2px",4,"ngIf"],["class","col-md-8",4,"ngIf"],[1,"input-error"],[1,"col-md-4",2,"padding-top","2px"],[1,"col-md-8"],[4,"ngFor","ngForOf"],[1,"custom-control","custom-radio"],["type","radio","name","AssignCatalogue",1,"custom-control-input",3,"ngModel","id","value","ngModelChange","click"],[1,"custom-control-label","font13",2,"line-height","25px",3,"for"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["id","floating-label",1,"form-wrap","p-0"],[1,"row","pt-10"],[1,"col-4"],["type","radio","name","payment","id","payment1","value","full",1,"custom-control-input",3,"ngModel","ngModelChange","click"],["for","payment1",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["type","radio","name","payment","id","payment2","value","partial",1,"custom-control-input",3,"ngModel","click","ngModelChange"],["for","payment2",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["class","col-12 input-error",4,"ngIf"],[1,"col-md-6","PT-10"],[1,"form-group"],[1,"control-label","mb-10"],["type","text","id","chequeNum","name","cheque_num","required","","autocomplete","off",1,"form-control","cheque_num",3,"ngModel","focus","blur","ngModelChange"],["chequNo","ngModel"],[1,"form-group","focused"],["type","date","id","datepicker","required","","placeholder","","autocomplete","off","name","payment_date",1,"form-control","cheque_date",3,"ngModel","focus","blur","ngModelChange"],["payDate","ngModel"],[1,"col-md-6","PT-5"],["type","text","name","cheque_bank_name","id","chequeBankName","required","","autocomplete","off",1,"form-control","cheque_bank_name",3,"ngModel","focus","blur","ngModelChange"],["bank_Name","ngModel"],["class","col-md-6 PT-5",4,"ngIf"],[1,"col-12","input-error"],["type","number","min","0","name","cheque_amount","required","","id","Amount1","autocomplete","off",1,"form-control","cheque_amount",3,"max","ngModel","focus","blur","ngModelChange"],["cheqAmount","ngModel"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"col-6"],["type","radio","name","payment","id","Amount1","value","full",1,"custom-control-input",3,"ngModel","ngModelChange","click"],["for","Amount1",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["type","radio","name","payment","id","Amount2","value","partial",1,"custom-control-input",3,"ngModel","click","ngModelChange"],["for","Amount2",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["class","col-md-6 PT-10",4,"ngIf"],["type","number","min","0","name","cheque_amount","required","","autocomplete","off",1,"form-control","cheque_amount",3,"max","ngModel","focus","blur","ngModelChange"],["credAmount","ngModel"],[1,"form-wrap","p-10"],["width","100%",1,"AddProductTable"],[1,"ProListDiv"],["class","lab-promotion",4,"ngIf"],["alt","",1,"PrList_img",3,"src"],[1,"PR_Name"],[2,"display","block","opacity","0.6","padding-top","5px"],["data-toggle","modal","data-target","#exampleModal","class","btn btn-default mb-0 dont-close-quantity",3,"click",4,"ngIf"],["class","btn btn-default mb-0 red-bg dont-close-product",3,"click",4,"ngIf"],[1,"lab-promotion"],["data-toggle","modal","data-target","#exampleModal",1,"btn","btn-default","mb-0","dont-close-quantity",3,"click"],[1,"btn","btn-default","mb-0","red-bg","dont-close-product",3,"click"],[1,"col-md-12","loader"],[1,"loading"],["placeholder","Select Prodcut Type",1,"formselect",3,"readonly","multiple","disabled","ngModel","ngModelChange","change"],["id","productlist01",1,"btn","btn-primary","ml-15",3,"click"],[1,"row","_row-product"],[1,"dd-handle","dd3-handle","swap-div"],[1,"col-12","p-0"],[1,"_emp-sele","_product-name"],["type","text","placeholder","0",1,"addItemCell2_input",2,"font-size","13px",3,"disabled","ngModel","keyup","keydown","ngModelChange"],["type","text","placeholder","0",1,"addItemCell2_input",2,"font-size","13px",3,"readonly","ngModel","ngModelChange","keyup","keydown"],["class","btn _order-del","title","Delete",3,"disabled","click",4,"ngIf"],["title","Delete",1,"btn","_order-del",3,"disabled","click"],[1,"fa","fa-trash-alt"],[1,"no-data"],["type","submit","disabled","",1,"btn","btn-primary","mr-2"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary","btn-cancel","mr-2",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-cancel","mr-2",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary","float-left","mr-2",3,"click"],[1,"btn","btn-primary","float-left","mr-2","red-bg",3,"click"],[1,"btn","btn-primary","float-left",3,"click"],[1,"btn","btn-primary","float-left","red-bg",3,"click"],["id","open-modal-payment","data-toggle","modal","data-target","#exampleModal2",2,"display","none"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"h5",4),n.vc(5," Print bill for this order"),n.Kb(6,"span"),n.Ob(),n.Pb(7,"button",5),n.Pb(8,"span",6),n.vc(9,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(10,"div",7),n.Pb(11,"div",8),n.Pb(12,"div",9),n.Pb(13,"h3",10),n.vc(14,"Select paper size for print"),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"div",11),n.Pb(16,"div",12),n.Pb(17,"a",13),n.Wb("click",(function(){return t.getBills("A4")})),n.Kb(18,"img",14),n.Pb(19,"strong"),n.vc(20,"A4 Portrait Paper"),n.Ob(),n.Ob(),n.Ob(),n.Pb(21,"div",15),n.Pb(22,"a",13),n.Wb("click",(function(){return t.getBills("A5")})),n.Kb(23,"img",16),n.Pb(24,"strong"),n.vc(25,"A5 Landscape Paper"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(26,kt,2,0,"div",17),n.tc(27,Si,290,94,"span",18)),2&e&&(n.yb(26),n.ec("ngIf",t.loading&&t.isEdit),n.yb(1),n.ec("ngIf",!t.loading))},directives:[r.k,p.a,r.i,St.a,o.b,o.h,o.k,b.a,b.c,r.j,o.q,o.o,o.m,a.g],pipes:[r.d],styles:['._date-order{padding-left:15px}._sa-customer{flex:0 0 265px;max-width:265px;padding-right:0}.calendar-icon{top:6px}._add-product .addItemCell{width:230px}._add-product .unit-w{width:130px}.addItemCell2{text-align:left!important;color:#282828!important}.AP_heading .addItemCell2{color:#0038ba!important}._add-product input{text-align:left!important}._add-product .addItemCell2_input{text-align:left!important;border:1px solid #fff!important;height:25px!important;margin-top:-3px}._add-product .addItemCell3{width:100px;text-align:right!important}._order-del{right:10px}._INV-h:hover ._row-product .addItemCell2_input{border:1px solid #e9e9e9!important}.ng-select .ng-select-container{border-radius:0}.addItemCell .ng-select .ng-select-container{height:25px!important;min-height:25px!important;border-radius:0;text-transform:capitalize}.addItemCell .ng-select .ng-select-container div.ng-input{top:2px!important}._cut-detail,.ng-option,.ng-select span{text-transform:capitalize}._row-product .addItemCell3{color:#282828!important}._totalBar2 ._h25{height:20px;color:#282828;font-size:14px}._totalBar2 .width-t{width:196px;text-align:right!important}._totalBar2 .addItemCell3{font-family:Rationale,sans-serif;font-size:17px;line-height:1}.itemQTY{font-size:12px;width:70px;padding:0 5px;border:1px solid #e6e6e6}.itemIMG{width:32px;height:32px;border:1px solid #e5e5e5;margin-top:-5px;margin-bottom:-5px;margin-right:5px;float:left}.productSearch{position:relative}.productSearch input{height:32px;border:1px solid #eae9e9;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}.productSearch .fa{position:absolute;top:8px;left:8px;color:#b5b5b5}.AddProductTable{padding:0;margin:0}.AddProductTable tr{border-bottom:1px solid #eee}.AddProductTable td{padding-bottom:10px;padding-top:10px}.ProListDiv{padding:0;display:table;position:relative}.ProListDiv .PR_Name{display:table-cell;vertical-align:middle;font-size:14px;letter-spacing:1px;line-height:16px}.ProListDiv .PrList_img{width:50px;height:50px;margin-right:8px;border:1px solid #e0e0e0}.AddProductTable .btn-default{padding:5px 8px;font-size:13px;border-radius:0;-khtml-border-radius:0;background:linear-gradient(90deg,#1e54d3,#0038ba);color:#fff;text-align:center;margin:0;line-height:1;min-width:74px;letter-spacing:1px;float:right;border:none!important}.AddDetailPR{padding:25px;font-size:14px}.AddDetailPR .form-control{height:32px;border:1px solid #dedede;box-shadow:none;padding:0 10px;font-size:13px;letter-spacing:1px}.AddDetailPR select{border-radius:0;padding:0 10px;height:32px;border:1px solid #dedede;font-size:14px}.Action_bottom{z-index:900}.Action_bottom .btn{letter-spacing:1px;font-size:13px}.se_cus-type{background-color:#fff}._product-name{margin-top:5px;position:relative;padding-right:0;color:#282828;font-size:12px;line-height:normal}.lab-promotion{position:absolute;top:-8px;left:-.438rem;padding:2px 6px;font-size:10.5px;z-index:3;background-color:#fed02a;color:#282828;line-height:1}.lab-promotion:before{border-top:4px solid #000;border-left:7px solid transparent;content:"";left:0;position:absolute;top:14px;z-index:-1}.lab-promotion-l{position:absolute;top:-15px;left:-13px;padding:1px 6px;font-size:10.5px;z-index:3;background-color:#fed02a;color:#282828;line-height:1;letter-spacing:1px}.lab-promotion-l:before{border-top:4px solid #000;border-left:7px solid transparent;content:"";left:0;position:absolute;top:12px;z-index:-1}._row-product{padding:12px 0 10px!important}._order-container{max-width:1270px}.loader{text-align:center;padding:30px}.loading{color:#b5b5b5;font-size:24px;margin:0 auto}.ng-select .ng-clear-wrapper{display:none}.custom-control-label{text-transform:capitalize}.no-data{width:100%;color:#a89a9a;font-size:20px;text-align:center}.input-error{color:red;font-size:13px;float:left}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}'],encapsulation:2}),e})(),wi=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Db({type:e,selectors:[["app-booking-vs-execution"]],decls:325,vars:0,consts:[[1,"container"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],[1,"row"],[1,"col-lg-12"],[1,"header-tabs"],[1,"Product-Filter"],[1,"col-12"],[1,"CL-Product"],[1,"fa","fa-calendar-alt"],["type","text","id","datepicker","placeholder","Select Date",1,"form-control"],[1,"_cust_filter"],[1,"form-s2"],["placeholder","Select Order Booker",1,"form-control","formselect"],[1,"btn","btn-primary"],[1,"fa","fa-retweet"],[1,"clearfix"],[1,"card","p-15"],[1,"topstats"],[1,"row","m-0"],[1,"col","pl-0","pr-0"],[1,"gary-box"],[1,"col","pr-0"],[1,"col-6"],[1,"col-12","header","head-div"],[1,"col-12","value-sec"],[1,"col-6","value-sh"],[1,"col-12","header","head-div","border-left-0"],[1,"col-12","value-sec","border-left-0"],[1,"col-12","p-0","PT-20","PB-15"],[1,"Product-row-title"],[1,"col","colStyle","h-auto",2,"max-width","255px"],[1,"col","colStyle","h-auto",2,"max-width","159px"],[1,"col","colStyle","h-auto",2,"max-width","172px"],[1,"col","colStyle","h-auto",2,"max-width","135px"],[1,"col","colStyle","h-auto",2,"max-width","150px"],[1,"col","colStyle","h-auto",2,"max-width","127px"],[1,"col","colStyle","h-auto",2,"max-width","115px"],[1,"Product-row"],[1,"col","_ITEMNAME",2,"max-width","255px","font-size","14px"],[1,"pt-10"],[1,"r-location"],[1,"fa","fa-map-marker-alt"],[1,"col","colStyle","font-no",2,"max-width","159px"],[1,"col","colStyle","font-no",2,"max-width","172px"],[1,"col","colStyle","font-no",2,"max-width","135px"],[1,"col","colStyle","font-no",2,"max-width","150px"],[1,"col","colStyle",2,"max-width","127px"],[1,"fa","fa-circle","executed-st"],[1,"col","colStyle",2,"max-width","115px"],[1,"btn","btn-default","btn-line","smBTN"],[1,"fa","fa-circle","pending-st"],[1,"fa","fa-circle","cancel-st"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"h2",3),n.vc(4,"Booking "),n.Pb(5,"span"),n.vc(6," vs Execution"),n.Ob(),n.Ob(),n.Ob(),n.Pb(7,"div",2),n.Pb(8,"ol",4),n.Pb(9,"li"),n.Pb(10,"a"),n.Pb(11,"span"),n.vc(12,"Orders"),n.Ob(),n.Ob(),n.Ob(),n.Pb(13,"li"),n.Pb(14,"span"),n.vc(15,"Booking vs Execution"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(16,"div",5),n.Pb(17,"div",6),n.Pb(18,"div",7),n.Pb(19,"div",8),n.Pb(20,"div",5),n.Pb(21,"div",9),n.Pb(22,"div",10),n.Kb(23,"i",11),n.Kb(24,"input",12),n.Ob(),n.Pb(25,"div",13),n.Pb(26,"div",14),n.Pb(27,"select",15),n.Pb(28,"option"),n.vc(29,"Select Order Booker"),n.Ob(),n.Pb(30,"option"),n.vc(31,"Asif Ali"),n.Ob(),n.Pb(32,"option"),n.vc(33,"Utba Aziz"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(34,"button",16),n.Kb(35,"i",17),n.vc(36," Fetch "),n.Ob(),n.Ob(),n.Ob(),n.Kb(37,"div",18),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(38,"div",19),n.Pb(39,"div",20),n.Pb(40,"div",21),n.Pb(41,"div",22),n.Pb(42,"div",23),n.Pb(43,"strong"),n.vc(44,"Order Booker:"),n.Ob(),n.Pb(45,"span"),n.vc(46,"Babar Ali"),n.Ob(),n.Ob(),n.Ob(),n.Pb(47,"div",24),n.Pb(48,"div",23),n.Pb(49,"strong"),n.vc(50,"Date:"),n.Ob(),n.Pb(51,"span"),n.vc(52,"19-09-2020"),n.Ob(),n.Ob(),n.Ob(),n.Pb(53,"div",24),n.Pb(54,"div",23),n.Pb(55,"strong"),n.vc(56,"Total Booking:"),n.Ob(),n.Pb(57,"span"),n.vc(58,"Rs. 100,000"),n.Ob(),n.Ob(),n.Ob(),n.Pb(59,"div",24),n.Pb(60,"div",23),n.Pb(61,"strong"),n.vc(62,"Total Execution:"),n.Ob(),n.Pb(63,"span"),n.vc(64,"Rs. 100,000"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(65,"div",21),n.Pb(66,"div",25),n.Pb(67,"div",5),n.Pb(68,"div",26),n.Pb(69,"h2"),n.vc(70,"Booking"),n.Ob(),n.Ob(),n.Pb(71,"div",27),n.Pb(72,"div",5),n.Pb(73,"div",28),n.Pb(74,"strong"),n.vc(75,"Total Booking:"),n.Ob(),n.Pb(76,"span"),n.vc(77,"Rs. 100,000"),n.Ob(),n.Ob(),n.Pb(78,"div",28),n.Pb(79,"strong"),n.vc(80,"Total Booked Orders:"),n.Ob(),n.Pb(81,"span"),n.vc(82,"Rs. 100,000"),n.Ob(),n.Ob(),n.Pb(83,"div",28),n.Pb(84,"strong"),n.vc(85,"Total Shop Visited:"),n.Ob(),n.Pb(86,"span"),n.vc(87,"20"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(88,"div",25),n.Pb(89,"div",5),n.Pb(90,"div",29),n.Pb(91,"h2"),n.vc(92,"Execution"),n.Ob(),n.Ob(),n.Pb(93,"div",30),n.Pb(94,"div",5),n.Pb(95,"div",28),n.Pb(96,"strong"),n.vc(97,"Total Execution:"),n.Ob(),n.Pb(98,"span"),n.vc(99,"Rs. 100,000"),n.Ob(),n.Ob(),n.Pb(100,"div",28),n.Pb(101,"strong"),n.vc(102,"Total Orders Executed:"),n.Ob(),n.Pb(103,"span"),n.vc(104,"Rs. 100,000"),n.Ob(),n.Ob(),n.Pb(105,"div",28),n.Pb(106,"strong"),n.vc(107,"Total Cancel Orders:"),n.Ob(),n.Pb(108,"span"),n.vc(109,"20"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(110,"div",31),n.Pb(111,"div",32),n.Pb(112,"div",5),n.Pb(113,"div",33),n.vc(114," Retailer Name "),n.Ob(),n.Pb(115,"div",34),n.vc(116," Booked Products "),n.Ob(),n.Pb(117,"div",35),n.vc(118," Executed Products "),n.Ob(),n.Pb(119,"div",36),n.vc(120," Booking Value "),n.Ob(),n.Pb(121,"div",37),n.vc(122," Execution Value "),n.Ob(),n.Pb(123,"div",38),n.vc(124," Order Status "),n.Ob(),n.Pb(125,"div",39),n.vc(126,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(127,"div",40),n.Pb(128,"div",5),n.Pb(129,"div",41),n.Pb(130,"div",42),n.Pb(131,"strong"),n.vc(132,"Sardar General Store"),n.Ob(),n.Pb(133,"span",43),n.Kb(134,"i",44),n.vc(135," Main Bazar Fateh Garh "),n.Ob(),n.Ob(),n.Ob(),n.Pb(136,"div",45),n.Pb(137,"div",42),n.vc(138,"22"),n.Ob(),n.Ob(),n.Pb(139,"div",46),n.Pb(140,"div",42),n.vc(141,"20"),n.Ob(),n.Ob(),n.Pb(142,"div",47),n.Pb(143,"div",42),n.Pb(144,"small"),n.vc(145,"Rs."),n.Ob(),n.vc(146," 70,000"),n.Ob(),n.Ob(),n.Pb(147,"div",48),n.Pb(148,"div",42),n.Pb(149,"small"),n.vc(150,"Rs."),n.Ob(),n.vc(151," 60,000"),n.Ob(),n.Ob(),n.Pb(152,"div",49),n.Pb(153,"div",42),n.Kb(154,"i",50),n.vc(155," Executed "),n.Ob(),n.Ob(),n.Pb(156,"div",51),n.Pb(157,"div",42),n.Pb(158,"button",52),n.vc(159," View Detail "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(160,"div",40),n.Pb(161,"div",5),n.Pb(162,"div",41),n.Pb(163,"div",42),n.Pb(164,"strong"),n.vc(165,"Sardar General Store"),n.Ob(),n.Pb(166,"span",43),n.Kb(167,"i",44),n.vc(168," Main Bazar Fateh Garh"),n.Ob(),n.Ob(),n.Ob(),n.Pb(169,"div",45),n.Pb(170,"div",42),n.vc(171,"22"),n.Ob(),n.Ob(),n.Pb(172,"div",46),n.Pb(173,"div",42),n.vc(174,"20"),n.Ob(),n.Ob(),n.Pb(175,"div",47),n.Pb(176,"div",42),n.Pb(177,"small"),n.vc(178,"Rs."),n.Ob(),n.vc(179," 70,000"),n.Ob(),n.Ob(),n.Pb(180,"div",48),n.Pb(181,"div",42),n.Pb(182,"small"),n.vc(183,"Rs."),n.Ob(),n.vc(184," 60,000"),n.Ob(),n.Ob(),n.Pb(185,"div",49),n.Pb(186,"div",42),n.Kb(187,"i",53),n.vc(188," Pending "),n.Ob(),n.Ob(),n.Pb(189,"div",51),n.Pb(190,"div",42),n.Pb(191,"button",52),n.vc(192," View Detail "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(193,"div",40),n.Pb(194,"div",5),n.Pb(195,"div",41),n.Pb(196,"div",42),n.Pb(197,"strong"),n.vc(198,"Sardar General Store"),n.Ob(),n.Pb(199,"span",43),n.Kb(200,"i",44),n.vc(201," Main Bazar Fateh Garh"),n.Ob(),n.Ob(),n.Ob(),n.Pb(202,"div",45),n.Pb(203,"div",42),n.vc(204,"22"),n.Ob(),n.Ob(),n.Pb(205,"div",46),n.Pb(206,"div",42),n.vc(207,"20"),n.Ob(),n.Ob(),n.Pb(208,"div",47),n.Pb(209,"div",42),n.Pb(210,"small"),n.vc(211,"Rs."),n.Ob(),n.vc(212," 70,000"),n.Ob(),n.Ob(),n.Pb(213,"div",48),n.Pb(214,"div",42),n.Pb(215,"small"),n.vc(216,"Rs."),n.Ob(),n.vc(217," 60,000"),n.Ob(),n.Ob(),n.Pb(218,"div",49),n.Pb(219,"div",42),n.Kb(220,"i",54),n.vc(221," Cancelled "),n.Ob(),n.Ob(),n.Pb(222,"div",51),n.Pb(223,"div",42),n.Pb(224,"button",52),n.vc(225," View Detail "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(226,"div",40),n.Pb(227,"div",5),n.Pb(228,"div",41),n.Pb(229,"div",42),n.Pb(230,"strong"),n.vc(231,"Sardar General Store"),n.Ob(),n.Pb(232,"span",43),n.Kb(233,"i",44),n.vc(234," Main Bazar Fateh Garh "),n.Ob(),n.Ob(),n.Ob(),n.Pb(235,"div",45),n.Pb(236,"div",42),n.vc(237,"22"),n.Ob(),n.Ob(),n.Pb(238,"div",46),n.Pb(239,"div",42),n.vc(240,"20"),n.Ob(),n.Ob(),n.Pb(241,"div",47),n.Pb(242,"div",42),n.Pb(243,"small"),n.vc(244,"Rs."),n.Ob(),n.vc(245," 70,000"),n.Ob(),n.Ob(),n.Pb(246,"div",48),n.Pb(247,"div",42),n.Pb(248,"small"),n.vc(249,"Rs."),n.Ob(),n.vc(250," 60,000"),n.Ob(),n.Ob(),n.Pb(251,"div",49),n.Pb(252,"div",42),n.Kb(253,"i",50),n.vc(254," Executed "),n.Ob(),n.Ob(),n.Pb(255,"div",51),n.Pb(256,"div",42),n.Pb(257,"button",52),n.vc(258," View Detail "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(259,"div",40),n.Pb(260,"div",5),n.Pb(261,"div",41),n.Pb(262,"div",42),n.Pb(263,"strong"),n.vc(264,"Sardar General Store"),n.Ob(),n.Pb(265,"span",43),n.Kb(266,"i",44),n.vc(267," Main Bazar Fateh Garh"),n.Ob(),n.Ob(),n.Ob(),n.Pb(268,"div",45),n.Pb(269,"div",42),n.vc(270,"22"),n.Ob(),n.Ob(),n.Pb(271,"div",46),n.Pb(272,"div",42),n.vc(273,"20"),n.Ob(),n.Ob(),n.Pb(274,"div",47),n.Pb(275,"div",42),n.Pb(276,"small"),n.vc(277,"Rs."),n.Ob(),n.vc(278," 70,000"),n.Ob(),n.Ob(),n.Pb(279,"div",48),n.Pb(280,"div",42),n.Pb(281,"small"),n.vc(282,"Rs."),n.Ob(),n.vc(283," 60,000"),n.Ob(),n.Ob(),n.Pb(284,"div",49),n.Pb(285,"div",42),n.Kb(286,"i",53),n.vc(287," Pending "),n.Ob(),n.Ob(),n.Pb(288,"div",51),n.Pb(289,"div",42),n.Pb(290,"button",52),n.vc(291," View Detail "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(292,"div",40),n.Pb(293,"div",5),n.Pb(294,"div",41),n.Pb(295,"div",42),n.Pb(296,"strong"),n.vc(297,"Sardar General Store"),n.Ob(),n.Pb(298,"span",43),n.Kb(299,"i",44),n.vc(300," Main Bazar Fateh Garh"),n.Ob(),n.Ob(),n.Ob(),n.Pb(301,"div",45),n.Pb(302,"div",42),n.vc(303,"22"),n.Ob(),n.Ob(),n.Pb(304,"div",46),n.Pb(305,"div",42),n.vc(306,"20"),n.Ob(),n.Ob(),n.Pb(307,"div",47),n.Pb(308,"div",42),n.Pb(309,"small"),n.vc(310,"Rs."),n.Ob(),n.vc(311," 70,000"),n.Ob(),n.Ob(),n.Pb(312,"div",48),n.Pb(313,"div",42),n.Pb(314,"small"),n.vc(315,"Rs."),n.Ob(),n.vc(316," 60,000"),n.Ob(),n.Ob(),n.Pb(317,"div",49),n.Pb(318,"div",42),n.Kb(319,"i",54),n.vc(320," Cancelled "),n.Ob(),n.Ob(),n.Pb(321,"div",51),n.Pb(322,"div",42),n.Pb(323,"button",52),n.vc(324," View Detail "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob())},directives:[o.l,o.t],styles:[".topstats[_ngcontent-%COMP%]{margin-top:0;font-size:13px;margin-bottom:15px}.topstats[_ngcontent-%COMP%]   .gary-box[_ngcontent-%COMP%]{line-height:1;background-color:#f9f9f9;border-bottom:1px solid #d1d1d1;padding:10px}.topstats[_ngcontent-%COMP%]   .gary-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .value-sh[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Rationale,sans-serif;color:#0038ba;font-size:20px;float:right;margin-top:-4px}.value-sh[_ngcontent-%COMP%]{font-size:13px}.value-sh[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px}.value-sec[_ngcontent-%COMP%]{background-color:#f9f9f9;padding-top:10px;padding-bottom:4px}.head-div[_ngcontent-%COMP%], .value-sec[_ngcontent-%COMP%]{border:1px solid #e6e6e6}.head-div[_ngcontent-%COMP%]{border-bottom:none;background:none!important;padding:10px 20px!important}._cust_filter[_ngcontent-%COMP%]{width:250px;padding-top:0;padding-right:10px;float:left;margin-bottom:15px}._cust_filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:32px}.Product-row[_ngcontent-%COMP%]{box-shadow:0 0 2px 0 rgba(0,0,0,.2)}.Product-row-title[_ngcontent-%COMP%]{background-color:#f9f9f9;color:#282828;text-transform:none!important}.Product-IMG[_ngcontent-%COMP%]{margin-bottom:-5px}.Product-IMG[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:1px solid #333}.Product-Name[_ngcontent-%COMP%]{color:grey;line-height:1}.Product-Name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#282828;padding-bottom:3px;display:block}._ITEMNAME[_ngcontent-%COMP%]{height:auto}.font-no[_ngcontent-%COMP%]{font-size:20px;line-height:1;font-family:Rationale,sans-serif!important}.r-location[_ngcontent-%COMP%]{display:block;color:#a0a0a0;font-size:13px}.executed-st[_ngcontent-%COMP%]{color:#06c420;font-size:12px}.cancel-st[_ngcontent-%COMP%]{color:#c40606;font-size:12px}.pending-st[_ngcontent-%COMP%]{color:#d9a20a;font-size:12px}.date-order[_ngcontent-%COMP%]{width:200px;position:relative;float:left;padding-right:15px}.date-order[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;border:1px solid #dedede;box-shadow:none;padding-left:15px;font-size:13px;letter-spacing:1px}.Product-Filter[_ngcontent-%COMP%]{background-color:#f3f2f2;padding:15px 15px 0;box-shadow:0 0 20px 0 rgba(0,0,0,.2);margin-bottom:15px;border-bottom:2px solid #0038ba}.Product-Filter[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff!important;cursor:pointer;float:left;margin:0;padding-top:4px;padding-bottom:4px;letter-spacing:1px}.CL-Product[_ngcontent-%COMP%]{width:230px;position:relative;float:left;padding-right:10px}.CL-Product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;border:1px solid #dedede;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}.CL-Product[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;color:#b5b5b5}.Product-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.Product-row-title[_ngcontent-%COMP%]{padding:10px 8px;text-transform:uppercase;color:#000;font-family:proximanova-semibold,sans-serif;letter-spacing:1px}.Product-row[_ngcontent-%COMP%], .Product-row-title[_ngcontent-%COMP%]{border:none;position:relative;font-size:13px;transform:scale(.97)}.Product-row[_ngcontent-%COMP%]{background-color:#fff;padding:5px 8px;border-radius:0;width:100%;margin-bottom:-1px;transition:all .2s;box-shadow:0 0 2px 0 rgba(0 0 0/20%)}.Product-row[_ngcontent-%COMP%]:HOVER{border-bottom:2px solid #0038ba;transition:all .3s ease;transform:scale(1);box-shadow:0 0 30px 0 rgba(0,0,0,.3);z-index:5}.Product-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .Product-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none;color:#282828}@media (max-width:1024px){.Product-row[_ngcontent-%COMP%]{transform:scale(1)}}"]}),e})();var Di=i("XNiG");function Ti(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Ob(),n.Pb(7,"td"),n.Pb(8,"button",21),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb().routeToPdf("ls",i)})),n.vc(9,"Load Sheet"),n.Ob(),n.Pb(10,"button",21),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb().routeToPdf("bills",i)})),n.vc(11,"Bills"),n.Ob(),n.Pb(12,"button",21),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb().routeToPdf("dsr",i)})),n.vc(13,"DSR"),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit;n.yb(2),n.wc(e.id),n.yb(2),n.wc(e.salesman),n.yb(2),n.xc("Rs. ",e.total_net_sale,"")}}let Ri=(()=>{class e{constructor(e,t,i){this.ordersService=e,this.toastService=t,this.ls=i,this.dtOptions={},this.loading=!1,this.date=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),this.loadsheets=[],this.isDtInitialized=!1,this.dtTrigger=new Di.a,this.dtOptions={pagingType:"simple_numbers"}}ngOnInit(){this.getData()}routeToPdf(e,t){"ls"==e?window.open(`${E.a.apiDomain}/LoadSheetDataPdf/${t.id}/${t.salesman_id}/${t.date}`,"_blank"):"bs"==e?window.open(`${E.a.apiDomain}/BookingSheetPdf?emp=${t.salesman_id}&date=${t.date}&loadId=${t.id}`,"_blank"):"bills"==e?window.open(`${E.a.apiDomain}/GetAllBillsDetail?type=bill&emp=${t.salesman_id}&date=${t.date}&dist_id=${this.ls.getItem("distributor").id}&size=A4&status=processed&loadId=${t.id}`,"_blank"):"dsr"==e&&window.open(`${E.a.apiDomain}/pdfDSRNew/${t.dsrId}`,"_blank")}getData(){this.loading=!0,this.isDtInitialized&&(this.dtElement.dtInstance.then(e=>{e.destroy()}),this.isDtInitialized=!1),this.ordersService.getCompletedOrdersLoadsheets(this.date).subscribe(e=>{this.loadsheets=e,this.isDtInitialized||(this.isDtInitialized=!0,this.dtTrigger.next()),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(c.a),n.Jb(l.a),n.Jb(K.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-completed-orders-detail"]],viewQuery:function(e,t){var i;1&e&&n.Ac(u.a,!0),2&e&&n.mc(i=n.Xb())&&(t.dtElement=i.first)},decls:51,vars:9,consts:[[1,"container"],[1,"row","mt-2","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"_head01"],[1,"breadcrumb"],["href","#"],[1,"row"],[1,"col-lg-12"],[1,"header-tabs"],[1,"Product-Filter"],[1,"col-12"],[1,"CL-Product"],["placeholder","Start Date","type","text","onfocus","(this.type = 'date')","id","date",1,"form-control","pad-date",3,"ngModel","change","ngModelChange"],[1,"clearfix"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"_list-total"],[1,"body"],["datatable","","id","example",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtTrigger","dtOptions"],[4,"ngFor","ngForOf"],[1,"btn","btn-default","mb-0",3,"click"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"h2",3),n.vc(4,"Orders "),n.Pb(5,"span"),n.vc(6," Management"),n.Ob(),n.Ob(),n.Ob(),n.Pb(7,"div",2),n.Pb(8,"ol",4),n.Pb(9,"li"),n.Pb(10,"a",5),n.Pb(11,"span"),n.vc(12,"Orders"),n.Ob(),n.Ob(),n.Ob(),n.Pb(13,"li"),n.Pb(14,"span"),n.vc(15,"List"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(16,"div",6),n.Pb(17,"div",7),n.Pb(18,"div",8),n.Pb(19,"div",9),n.Pb(20,"div",6),n.Pb(21,"div",10),n.Pb(22,"div",11),n.Pb(23,"input",12),n.Wb("change",(function(){return t.getData()}))("ngModelChange",(function(e){return t.date=e})),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Kb(24,"div",13),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(25,"div",6),n.Pb(26,"div",14),n.Pb(27,"div",15),n.Pb(28,"div",16),n.Pb(29,"h2"),n.vc(30,"Completed "),n.Pb(31,"span"),n.vc(32," Orders"),n.Ob(),n.Pb(33,"div",17),n.vc(34),n.Ob(),n.Ob(),n.Ob(),n.Pb(35,"div",18),n.Pb(36,"table",19),n.Pb(37,"thead"),n.Pb(38,"tr"),n.Pb(39,"th"),n.vc(40,"Load ID"),n.Ob(),n.Pb(41,"th"),n.vc(42,"Salesman"),n.Ob(),n.Pb(43,"th"),n.vc(44,"Sales Amount"),n.Ob(),n.Pb(45,"th"),n.vc(46,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(47,"tbody"),n.tc(48,Ti,14,3,"tr",20),n.Ob(),n.Ob(),n.Pb(49,"div",14),n.Kb(50,"app-loader-white"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.yb(23),n.ec("ngModel",t.date),n.yb(11),n.wc(t.loadsheets.length),n.yb(2),n.sc("display",t.loading?"none":""),n.ec("dtTrigger",t.dtTrigger)("dtOptions",t.dtOptions),n.yb(12),n.ec("ngForOf",t.loadsheets),n.yb(1),n.sc("display",t.loading?"":"none"))},directives:[o.b,o.h,o.k,u.a,r.j,p.a],styles:[""]}),e})();var Ii=i("2Vo4");let Mi=(()=>{class e{constructor(){this.orderLoad=new Ii.a(null)}setLoadContent(e,t){return e.items.forEach(e=>{const i=t.items.find(t=>t.item_id===e.item_id);i?(i.actual_qty=i.actual_qty+e.dispatch_qty,i.dispatched_qty=i.dispatched_qty+e.dispatch_qty):t.items.push({item_id:e.item_id,pref_id:e.pref_id,unit_id:e.unit_id,item_trade_price:e.original_price,actual_qty:e.dispatch_qty,dispatched_qty:e.dispatch_qty,issued_qty:0})}),t.order_ids.push(e.id),t.total_orders=t.order_ids.length,t.total_products=t.items.length,t}removeOrderFromCurrentLoad(e,t){return e.items.forEach(e=>{const i=t.items.find(t=>t.item_id===e.item_id);i&&(i.actual_qty=i.actual_qty-e.dispatch_qty,i.dispatched_qty=i.dispatched_qty-e.dispatch_qty-i.issued_qty,i.issued_qty=0),0===i.actual_qty&&(t.items=t.items.filter(t=>t.item_id!==e.item_id))}),t.order_ids=t.order_ids.filter(t=>t!==e.id),t.total_orders=t.order_ids.length,t.total_products=t.items.length,t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Fb({token:e,factory:e.\u0275fac}),e})();function Ai(e,t){if(1&e){const e=n.Qb();n.Pb(0,"app-products-drawer",71),n.Wb("drawerClosed",(function(){return n.oc(e),n.Yb().closeNewProducts()}))("productSelected",(function(t){return n.oc(e),n.Yb().addNewProductToOrder(t)})),n.Ob()}if(2&e){const e=n.Yb();n.ec("selectedRetailer",e.selectedRetailer)("orderedProducts",null==e.orderDetails?null:e.orderDetails.items)("loadingProducts",e.loadingProduct)("allProducts",e.inventory)("productSchemes",e.schemes)("productMerchantDiscount",e.merchantDiscount)("specialDiscounts",e.specialDiscounts)("selectedOrderCreditType",e.orderDetails.credit_order_type)("selectedProductType",1===e.orderDetails.order_context?0:1)}}function Ei(e,t){if(1&e){const e=n.Qb();n.Pb(0,"app-order-items-list",75),n.Wb("openDrawer",(function(){return n.oc(e),n.Yb(2).openProductsList()})),n.Ob()}if(2&e){const e=n.Yb(2);n.ec("orderDetail",e.orderDetails)("schemes",e.schemes)("selectedRetailer",e.selectedRetailer)("orders",e.ordersRetailers)("allProducts",e.inventory)("specialDiscounts",e.specialDiscounts)("merchantDiscount",e.merchantDiscount)("newProduct",e.newProduct)("credit_order_type",null==e.orderDetails?null:e.orderDetails.credit_order_type.toString())("credit_order_type_string",e.credit_order_type_string)("product_type_string",e.product_type_string)("orderType","dispatch")("selectedOrderCreditType",e.orderDetails.credit_order_type)}}function qi(e,t){1&e&&(n.Pb(0,"div",25),n.Kb(1,"app-loader-white"),n.Ob())}function Li(e,t){1&e&&(n.Pb(0,"div",76),n.Pb(1,"div",77),n.Kb(2,"img",78),n.Pb(3,"strong"),n.vc(4,"Select order to see details"),n.Ob(),n.Ob(),n.Ob())}function Ni(e,t){if(1&e&&(n.Pb(0,"div",72),n.tc(1,Ei,1,13,"app-order-items-list",73),n.tc(2,qi,2,0,"div",60),n.tc(3,Li,5,0,"div",74),n.Ob()),2&e){const e=n.Yb();n.yb(1),n.ec("ngIf",!e.savingOrder&&e.selectedRetailer),n.yb(1),n.ec("ngIf",e.savingOrder),n.yb(1),n.ec("ngIf",!e.savingOrder&&!e.selectedRetailer)}}function Yi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",83),n.Wb("click",(function(){return n.oc(e),n.Yb(2).setOrderItems()})),n.vc(1," Save Order "),n.Ob()}if(2&e){const e=n.Yb(2);n.ec("disabled",!(null!=e.orderDetails&&null!=e.orderDetails.items&&e.orderDetails.items.length))}}function Bi(e,t){if(1&e&&(n.Pb(0,"button",84),n.vc(1," Cancel Order "),n.Ob()),2&e){const e=n.Yb(2);n.ec("disabled",!(null!=e.orderDetails&&null!=e.orderDetails.items&&e.orderDetails.items.length))}}function Ki(e,t){1&e&&(n.Pb(0,"button",85),n.Pb(1,"div",86),n.Pb(2,"span",87),n.vc(3,"Loading..."),n.Ob(),n.Ob(),n.Ob())}function Fi(e,t){if(1&e&&(n.Pb(0,"div",79),n.tc(1,Yi,2,1,"button",80),n.tc(2,Bi,2,1,"button",81),n.tc(3,Ki,4,0,"button",82),n.Ob()),2&e){const e=n.Yb();n.yb(1),n.ec("ngIf",!e.savingOrder),n.yb(1),n.ec("ngIf",!e.savingOrder),n.yb(1),n.ec("ngIf",e.savingOrder)}}function Ji(e,t){1&e&&(n.Pb(0,"span",95),n.vc(1," The payable amount should not be greater than pending amount! "),n.Ob())}function Qi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",96),n.Wb("click",(function(){n.oc(e);const t=n.Yb(2).$implicit,i=n.Yb(2);return i.id="hello",i.addOrderBill(t)})),n.vc(1," Add to Bill "),n.Ob()}if(2&e){const e=n.Yb(2).$implicit;n.ec("disabled",!e.recovery||0==+e.recovery||+e.recovery>e.balance)}}function Wi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",97),n.Wb("click",(function(){n.oc(e);const t=n.Yb(2).$implicit;return n.Yb(2).removeOrderBill(t)})),n.vc(1," Remove From Bill "),n.Ob()}}function zi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Zb(5,"titlecase"),n.Ob(),n.Pb(6,"td"),n.vc(7),n.Zb(8,"number"),n.Ob(),n.Pb(9,"td"),n.vc(10),n.Ob(),n.Pb(11,"td"),n.Pb(12,"input",91),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().$implicit.recovery=t}))("keydown",(function(t){return n.oc(e),n.Yb(3).isNumber(t)})),n.Ob(),n.tc(13,Ji,2,0,"span",92),n.Ob(),n.Pb(14,"td"),n.tc(15,Qi,2,1,"button",93),n.tc(16,Wi,2,0,"button",94),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(),t=e.$implicit,i=e.index;n.yb(2),n.wc(t.retailer_id),n.yb(2),n.wc(n.ac(5,11,t.retailer_name)),n.yb(3),n.xc("Rs. ",n.bc(8,13,t.balance,"1.2-2"),""),n.yb(3),n.xc("",t.aging||0," Days"),n.yb(2),n.ec("readonly",t.isAdded)("id",i)("ngModel",t.recovery)("name",i),n.yb(1),n.ec("ngIf",+t.recovery>t.balance),n.yb(2),n.ec("ngIf",!t.isAdded),n.yb(1),n.ec("ngIf",t.isAdded)}}function $i(e,t){if(1&e&&(n.Nb(0),n.tc(1,zi,17,16,"tr",90),n.Mb()),2&e){const e=t.$implicit;n.yb(1),n.ec("ngIf",e.balance>0)}}function Vi(e,t){if(1&e&&(n.Pb(0,"table",88),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th"),n.vc(4,"Id"),n.Ob(),n.Pb(5,"th"),n.vc(6,"Retailer Name"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Pending Amount"),n.Ob(),n.Pb(9,"th"),n.vc(10,"Aging"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Add to Current"),n.Ob(),n.Pb(13,"th"),n.vc(14,"Action"),n.Ob(),n.Ob(),n.Ob(),n.Pb(15,"tbody"),n.tc(16,$i,2,1,"ng-container",89),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.ec("dtOptions",e.dtOptions),n.yb(16),n.ec("ngForOf",e.recoveryRetailers)}}function Zi(e,t){1&e&&(n.Pb(0,"div",25),n.Kb(1,"app-loader-white"),n.Ob())}function Ui(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",112),n.Pb(1,"div",113),n.vc(2),n.Ob(),n.Pb(3,"div",21),n.Pb(4,"div",114),n.Pb(5,"strong",115),n.vc(6),n.Ob(),n.Pb(7,"span"),n.Pb(8,"strong"),n.vc(9,"Order Booker:"),n.Ob(),n.vc(10),n.Ob(),n.Pb(11,"span"),n.Kb(12,"i",116),n.vc(13),n.Ob(),n.Ob(),n.Pb(14,"div",117),n.Pb(15,"div",104),n.Pb(16,"input",118),n.Wb("change",(function(){n.oc(e);const i=t.$implicit;return n.Yb(3).retailerSelected(i)}))("ngModelChange",(function(i){return n.oc(e),t.$implicit.isSelected=i})),n.Ob(),n.Kb(17,"label",119),n.Ob(),n.Pb(18,"div",120),n.vc(19," Total Sales"),n.Pb(20,"span",121),n.vc(21),n.Zb(22,"number"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=t.index;n.yb(2),n.wc(i+1),n.yb(4),n.wc(e.retailer_name),n.yb(4),n.xc(" ",e.emp_name,""),n.yb(3),n.xc(" ",e.retailer_address,""),n.yb(3),n.ec("name",i)("ngModel",e.isSelected)("id","ord"+i),n.yb(1),n.ec("for","ord"+i),n.yb(4),n.xc("Rs. ",n.bc(22,9,e.order_total||0,"1.2-2"),"")}}function Gi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",100),n.Pb(1,"div",101),n.Pb(2,"div",102),n.Pb(3,"div",21),n.Pb(4,"div",25),n.Pb(5,"h2",66),n.vc(6,"Orders "),n.Pb(7,"span"),n.vc(8," List"),n.Ob(),n.Ob(),n.Pb(9,"div",103),n.Pb(10,"div",104),n.Pb(11,"input",105),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb(2).isAllSelected=t}))("change",(function(){return n.oc(e),n.Yb(2).allSelected()})),n.Ob(),n.Pb(12,"label",106),n.vc(13,"Select All"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(14,"div",25),n.Pb(15,"div",107),n.Kb(16,"i",108),n.Kb(17,"input",109),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(18,"div",110),n.tc(19,Ui,23,12,"div",111),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(11),n.ec("ngModel",e.isAllSelected),n.yb(8),n.ec("ngForOf",e.ordersDispList)}}function Hi(e,t){if(1&e){const e=n.Qb();n.Pb(0,"a",133),n.Wb("click",(function(){n.oc(e);const i=t.$implicit;return n.Yb(3).changeCurrentLoad(i.loadNumber)})),n.vc(1),n.Ob()}if(2&e){const e=t.$implicit,i=n.Yb(3);n.ec("id",e.loadNumber)("ngClass",e.loadNumber===i.currentLoadContent.loadNumber?"active":""),n.yb(1),n.xc("Load ",e.loadNumber,"")}}function ji(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.Pb(5,"td"),n.vc(6),n.Zb(7,"number"),n.Ob(),n.Pb(8,"td"),n.Pb(9,"input",134),n.Wb("ngModelChange",(function(i){return n.oc(e),t.$implicit.issued_qty=i}))("keyup",(function(){n.oc(e);const i=t.$implicit;return n.Yb(3).updateDispatchedQty(i)}))("keydown",(function(t){return n.oc(e),n.Yb(3).isNumber(t,"quantity")})),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=n.Yb(3);n.yb(2),n.wc(e.item_id),n.yb(2),n.wc(i.getItemName(e.item_id)),n.yb(2),n.wc(n.ac(7,6,e.actual_qty)),n.yb(3),n.ec("ngModel",e.issued_qty)("name",e.item_id)("id",e.item_id)}}function Xi(e,t){if(1&e&&(n.Pb(0,"div",54),n.Pb(1,"div",122),n.Pb(2,"div",123),n.Pb(3,"div",124),n.tc(4,Hi,2,3,"a",125),n.Ob(),n.Ob(),n.Pb(5,"div",126),n.Pb(6,"div",127),n.Pb(7,"div",128),n.Pb(8,"table",129),n.Pb(9,"thead"),n.Pb(10,"tr"),n.Pb(11,"th",130),n.vc(12,"SN"),n.Ob(),n.Pb(13,"th",130),n.vc(14,"Product Name"),n.Ob(),n.Pb(15,"th",131),n.vc(16," Actual "),n.Ob(),n.Pb(17,"th",131),n.vc(18," Issuance "),n.Ob(),n.Ob(),n.Pb(19,"tr"),n.Pb(20,"th",132),n.vc(21,"BOX/PIECE"),n.Ob(),n.Pb(22,"th",132),n.vc(23,"BOX/PIECE"),n.Ob(),n.Ob(),n.Ob(),n.Pb(24,"tbody"),n.tc(25,ji,10,8,"tr",89),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e){const e=n.Yb(2);n.yb(4),n.ec("ngForOf",null==e.load?null:e.load.content),n.yb(21),n.ec("ngForOf",e.currentLoadContent.items)}}function er(e,t){1&e&&(n.Pb(0,"div",25),n.Kb(1,"app-loader-white"),n.Ob())}function tr(e,t){if(1&e&&(n.Pb(0,"div",51),n.tc(1,Gi,20,2,"div",98),n.tc(2,Xi,26,2,"div",99),n.tc(3,er,2,0,"div",60),n.Ob()),2&e){const e=n.Yb();n.yb(1),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",e.loading)}}function ir(e,t){if(1&e&&(n.Pb(0,"th",138),n.vc(1),n.Ob()),2&e){const e=t.index;n.yb(1),n.xc(" Load ",e+1," ")}}function rr(e,t){1&e&&(n.Pb(0,"tr"),n.Pb(1,"th"),n.vc(2,"CTN/Bundle"),n.Ob(),n.Pb(3,"th"),n.vc(4,"Box/Piece"),n.Ob(),n.Pb(5,"th"),n.vc(6,"CTN/Bundle"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Box/Piece"),n.Ob(),n.Pb(9,"th"),n.vc(10,"CTN/Bundle"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Box/Piece"),n.Ob(),n.Pb(13,"th"),n.vc(14,"CTN/Bundle"),n.Ob(),n.Pb(15,"th"),n.vc(16,"Box/Piece"),n.Ob(),n.Ob())}function or(e,t){1&e&&(n.Pb(0,"tr"),n.Pb(1,"th"),n.vc(2,"CTN/Bundle"),n.Ob(),n.Pb(3,"th"),n.vc(4,"Box/Piece"),n.Ob(),n.Pb(5,"th"),n.vc(6,"CTN/Bundle"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Box/Piece"),n.Ob(),n.Pb(9,"th"),n.vc(10,"CTN/Bundle"),n.Ob(),n.Pb(11,"th"),n.vc(12,"Box/Piece"),n.Ob(),n.Ob())}function ar(e,t){1&e&&(n.Pb(0,"tr"),n.Pb(1,"th"),n.vc(2,"CTN/Bundle"),n.Ob(),n.Pb(3,"th"),n.vc(4,"Box/Piece"),n.Ob(),n.Pb(5,"th"),n.vc(6,"CTN/Bundle"),n.Ob(),n.Pb(7,"th"),n.vc(8,"Box/Piece"),n.Ob(),n.Ob())}function nr(e,t){if(1&e&&(n.Nb(0),n.Pb(1,"td"),n.vc(2),n.Zb(3,"number"),n.Ob(),n.Pb(4,"td"),n.vc(5),n.Ob(),n.Mb()),2&e){const e=t.$implicit;n.yb(2),n.wc(n.ac(3,2,e.parent_qty)),n.yb(3),n.wc(e.child_qty)}}function dr(e,t){if(1&e&&(n.Pb(0,"tr"),n.Pb(1,"td"),n.vc(2),n.Ob(),n.Pb(3,"td"),n.vc(4),n.Ob(),n.tc(5,nr,6,4,"ng-container",89),n.Pb(6,"td"),n.vc(7),n.Zb(8,"number"),n.Ob(),n.Pb(9,"td"),n.vc(10),n.Zb(11,"number"),n.Ob(),n.Ob()),2&e){const e=t.$implicit;n.yb(2),n.wc(e.item_sku),n.yb(2),n.wc(e.item_name),n.yb(1),n.ec("ngForOf",e.content),n.yb(2),n.wc(n.ac(8,5,e.total_primary_qty)),n.yb(3),n.wc(n.ac(11,7,e.total_secondary_qty))}}function sr(e,t){if(1&e&&(n.Pb(0,"table",135),n.Pb(1,"thead"),n.Pb(2,"tr"),n.Pb(3,"th",136),n.vc(4,"SN"),n.Ob(),n.Pb(5,"th",136),n.vc(6," Product Name "),n.Ob(),n.tc(7,ir,2,1,"th",137),n.Pb(8,"th",138),n.vc(9," Total Issuance "),n.Ob(),n.Ob(),n.tc(10,rr,17,0,"tr",90),n.tc(11,or,13,0,"tr",90),n.tc(12,ar,9,0,"tr",90),n.Ob(),n.Pb(13,"tbody"),n.tc(14,dr,12,9,"tr",89),n.Ob(),n.Ob()),2&e){const e=n.Yb();n.ec("dtOptions",e.dtOptions),n.yb(7),n.ec("ngForOf",e.finalLoad.load[0].content),n.yb(3),n.ec("ngIf",3==e.finalLoad.count),n.yb(1),n.ec("ngIf",2==e.finalLoad.count),n.yb(1),n.ec("ngIf",1==e.finalLoad.count),n.yb(2),n.ec("ngForOf",e.finalLoad.load)}}function cr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",154),n.Wb("click",(function(){return n.oc(e),n.Yb(2).revertDispatch()})),n.vc(1," Reset "),n.Ob()}}function lr(e,t){1&e&&(n.Pb(0,"button",155),n.Pb(1,"div",86),n.Pb(2,"span",87),n.vc(3,"Loading..."),n.Ob(),n.Ob(),n.Ob())}function br(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",156),n.Wb("click",(function(){return n.oc(e),n.Yb(2).completeDispatch()})),n.vc(1," Complete "),n.Ob()}}function ur(e,t){1&e&&(n.Pb(0,"button",157),n.Pb(1,"div",86),n.Pb(2,"span",87),n.vc(3,"Loading..."),n.Ob(),n.Ob(),n.Ob())}function pr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",139),n.Pb(1,"div",140),n.Pb(2,"div",141),n.Pb(3,"strong"),n.vc(4,"Gross Total:"),n.Ob(),n.Pb(5,"span"),n.vc(6),n.Zb(7,"number"),n.Ob(),n.Ob(),n.Pb(8,"div",141),n.Pb(9,"strong"),n.vc(10,"Trade Offer:"),n.Ob(),n.Pb(11,"span"),n.vc(12),n.Zb(13,"number"),n.Ob(),n.Ob(),n.Pb(14,"div",141),n.Pb(15,"strong"),n.vc(16,"Trade Discount:"),n.Ob(),n.Pb(17,"span"),n.vc(18),n.Zb(19,"number"),n.Ob(),n.Ob(),n.Pb(20,"div",141),n.Pb(21,"strong"),n.vc(22,"Special Discount:"),n.Ob(),n.Pb(23,"span"),n.vc(24),n.Zb(25,"number"),n.Ob(),n.Ob(),n.Pb(26,"div",141),n.Pb(27,"strong"),n.vc(28,"Booker Discount:"),n.Ob(),n.Pb(29,"span"),n.vc(30),n.Zb(31,"number"),n.Ob(),n.Ob(),n.Pb(32,"div",141),n.Pb(33,"strong"),n.vc(34,"Total:"),n.Ob(),n.Pb(35,"span"),n.vc(36),n.Zb(37,"number"),n.Ob(),n.Ob(),n.Pb(38,"div",141),n.Pb(39,"strong"),n.vc(40,"Tax:"),n.Ob(),n.Pb(41,"span"),n.vc(42),n.Zb(43,"number"),n.Ob(),n.Ob(),n.Pb(44,"div",142),n.Pb(45,"strong"),n.vc(46,"Total Amount Due:"),n.Ob(),n.Pb(47,"span"),n.vc(48),n.Zb(49,"number"),n.Ob(),n.Ob(),n.Pb(50,"div",141),n.Pb(51,"strong"),n.vc(52,"Recovery:"),n.Ob(),n.Pb(53,"span"),n.vc(54),n.Zb(55,"number"),n.Ob(),n.Ob(),n.Pb(56,"div",142),n.Pb(57,"strong"),n.vc(58,"Total Issued Amount:"),n.Ob(),n.Pb(59,"span"),n.vc(60),n.Zb(61,"number"),n.Ob(),n.Ob(),n.Ob(),n.Pb(62,"div",143),n.Pb(63,"div",144),n.Pb(64,"div",68),n.Pb(65,"a",145),n.Wb("click",(function(){return n.oc(e),n.Yb().getBookingSheet()})),n.Kb(66,"i",146),n.vc(67," Booking Sheet"),n.Ob(),n.Ob(),n.Pb(68,"div",68),n.Pb(69,"a",145),n.Wb("click",(function(){return n.oc(e),n.Yb().generateLSPDF()})),n.Kb(70,"i",146),n.vc(71," Load Sheet"),n.Ob(),n.Ob(),n.Pb(72,"div",68),n.Pb(73,"button",147),n.Kb(74,"i",146),n.vc(75," Bills "),n.Ob(),n.Ob(),n.Pb(76,"div",148),n.tc(77,cr,2,0,"button",149),n.tc(78,lr,4,0,"button",150),n.Ob(),n.Pb(79,"div",151),n.tc(80,br,2,0,"button",152),n.tc(81,ur,4,0,"button",153),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.yb(6),n.wc(n.bc(7,14,e.finalLoad.summary.total_gross_amount,"1.2-2")),n.yb(6),n.wc(n.bc(13,17,e.finalLoad.summary.total_trade_offer,"1.2-2")),n.yb(6),n.wc(n.bc(19,20,e.finalLoad.summary.total_trade_discount,"1.2-2")),n.yb(6),n.wc(n.bc(25,23,e.finalLoad.summary.total_special_discount,"1.2-2")),n.yb(6),n.wc(n.bc(31,26,e.finalLoad.summary.total_booker_discount,"1.2-2")),n.yb(6),n.wc(n.bc(37,29,e.finalLoad.summary.total_gross_amount-e.finalLoad.summary.total_trade_offer-e.finalLoad.summary.total_trade_discount-e.finalLoad.summary.total_special_discount-e.finalLoad.summary.total_booker_discount,"1.2-2")),n.yb(6),n.wc(n.bc(43,32,e.finalLoad.summary.total_tax_amount,"1.2-2")),n.yb(6),n.wc(n.bc(49,35,e.finalLoad.summary.total_net_sale,"1.2-2")),n.yb(6),n.wc(n.bc(55,38,e.finalLoad.summary.total_recovery_amount,"1.2-2")),n.yb(6),n.wc(n.bc(61,41,e.finalLoad.summary.issued_total_price,"1.2-2")),n.yb(17),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",e.loading),n.yb(2),n.ec("ngIf",!e.loading),n.yb(1),n.ec("ngIf",e.loading)}}function hr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",163),n.Wb("click",(function(){n.oc(e);const t=n.Yb(2);return t.currentTab=t.currentTab+1,t.tabChanged()})),n.vc(1," Next "),n.Ob()}if(2&e){const e=n.Yb(2);n.ec("disabled",4===e.currentTab||e.loading||e.loadingProduct||e.savingOrder)}}function mr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",163),n.Wb("click",(function(){return n.oc(e),n.Yb(2).openConfirmationModal()})),n.vc(1," Next "),n.Ob()}if(2&e){const e=n.Yb(2);n.ec("disabled",e.loading||e.loadingProduct)}}function gr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",158),n.Pb(1,"div",159),n.Pb(2,"button",160),n.Wb("click",(function(){n.oc(e);const t=n.Yb();return t.currentTab=t.currentTab-1,t.tabChanged()})),n.vc(3," Previous "),n.Ob(),n.tc(4,hr,2,1,"button",161),n.tc(5,mr,2,1,"button",161),n.Pb(6,"button",162),n.vc(7," Open Modal "),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb();n.yb(2),n.ec("disabled",1===e.currentTab||4===e.currentTab||e.loading||e.savingOrder||e.load.content[0].items.length>0),n.yb(2),n.ec("ngIf",4!==e.currentTab&&3!==e.currentTab),n.yb(1),n.ec("ngIf",3===e.currentTab)}}let Or=(()=>{class e{constructor(e,t,i,r,o,a,n){this.router=e,this.route=t,this.toastService=i,this.dataService=r,this.storageService=o,this.dispatchService=a,this.orderService=n,this.credit_order_type_string="",this.product_type_string="",this.orderDetails={},this.inventory=[],this.ordersRetailers=[],this.specialDiscounts=[],this.schemes=[],this.discountSlabs=[],this.credits=[],this.recoveryRetailers=[],this.remainingOrders=[],this.ordersDispList=[],this.distributorId=this.storageService.getItem("distributor").id}ngOnInit(){this.dtOptions={pagingType:"simple_numbers"},this.currentTab=1,this.setLoad(),this.setCurrentLoad(1),this.load.content.push(this.currentLoadContent),this.assignmentId=this.route.snapshot.paramMap.get("assignId")||null,this.salemanId=+this.route.snapshot.paramMap.get("saleManId")||null,this.orderDate=this.route.snapshot.paramMap.get("date"),this.salemanId&&this.orderDate&&this.assignmentId?(this.getProducts(),this.getSchemes()):(this.router.navigateByUrl("/orders/dispatch-orders"),this.toastService.showToaster({type:"error",message:"No order selected to dispatch!",title:"Dispatch Error:"}))}setLoad(){this.load={salesman_id:0,total_orders:0,total_gross_amount:0,total_trade_offer:0,total_trade_discount:0,total_special_discount:0,total_booker_discount:0,total_tax_amount:0,total_recovery_amount:0,total_net_sale:0,total_products:0,distributor_id:0,total_sub_loads:0,processed_date:"",content:[]}}setCurrentLoad(e){this.currentLoadContent={loadNumber:e,order_ids:[],total_products:0,total_orders:0,items:[]}}tabChanged(){switch(this.currentTab){case 1:this.savingOrder=!0,this.selectedRetailer=JSON.parse(JSON.stringify(null)),this.orderDetails.items=[],this.getDispatchDetails();break;case 2:this.dispatchOrderDetail=null,this.getDispatchOrdersDetail();break;case 3:this.isRecoveryAdded()?(this.currentTab=this.currentTab-1,document.getElementById("onSkipCreditNext").click()):this.setDataForLoad()}}isNumber(e,t="charges"){return this.dataService.isNumber(e,t)}getDispatchDetails(){this.loading=!0,this.savingOrder=!1,this.showFinalLoad=!1,this.orderService.getDispatchDetailBySalemanAndDate(this.salemanId,this.assignmentId,this.orderDate).subscribe(e=>{this.loading=!1,200===e.status&&(e.data.loadSheet?(this.finalLoad=e.data.loadSheetData,this.currentTab=4,setTimeout(()=>{this.showFinalLoad=!0},500)):this.ordersRetailers=e.data.retailers.map(e=>(e.isActive=!1,e.total=e.order_total,e)))},e=>{this.loading=!1,1!==e.status&&401!==e.status&&(console.log("Error while getting orders data :>> ",e.message),this.toastService.showToaster({type:"error",message:"Cannot fetch Orders. Please try again",title:"Error:"}))})}getDispatchOrdersDetail(){this.dispatchOrderDetail&&this.dispatchOrderDetail.summary||(this.loading=!0,this.orderService.getDispatchOrdersDetail(this.salemanId,this.orderDate,this.assignmentId).subscribe(e=>{this.loading=!1,200===e.status&&(this.dispatchOrderDetail=e.data,this.dispatchOrderDetail.orders=this.dispatchOrderDetail.orders.map(e=>{e.isAdded=!1,this.credits.find(t=>t.order_id===e.id&&t.recovery>0)&&(e.isAdded=!0);const{retailer_id:t}=e;return this.credits.push({recovery:0,order_id:e.id,retailer_id:t,dispatched_bill_amount:e.order_total}),e}),this.recoveryRetailers=[],this.dispatchOrderDetail.orders.forEach(e=>{this.recoveryRetailers.find(t=>t.retailer_id===e.retailer_id)||this.recoveryRetailers.push(e)}),3===this.currentTab&&this.setDataForLoad())},e=>{this.loading=!1,1!==e.status&&401!==e.status&&(console.log("Error while getting orders data :>> ",e.message),this.toastService.showToaster({type:"error",message:"Cannot fetch Orders. Please try again",title:"Error:"}))}))}setDataForLoad(){var e,t;(null===(e=this.dispatchOrderDetail)||void 0===e?void 0:e.orders)?(this.remainingOrders=JSON.parse(JSON.stringify(null===(t=this.dispatchOrderDetail)||void 0===t?void 0:t.orders)),this.ordersDispList=JSON.parse(JSON.stringify(this.remainingOrders))):this.getDispatchOrdersDetail()}getProducts(){this.loadingProduct=!0,this.orderService.getCounterSaleData().subscribe(e=>{this.loadingProduct=!1,200===e.status&&(this.inventory=e.data.inventory,this.specialDiscounts=e.data.special_discount,this.getDispatchDetails())},e=>{this.loadingProduct=!1,1!==e.status&&401!==e.status&&(console.log("Error while getting products data :>> ",e.message),this.toastService.showToaster({type:"error",message:"Cannot fetch Products. Please try again",title:"Error:"}))})}getSchemes(){this.orderService.getSchemes().subscribe(e=>{200===e.status?this.schemes=e.data:this.toastService.showToaster({type:"error",message:e.message,title:"Error:"})},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Cannot fetch Trade Offers. Please try again",title:"Error:"})})}getOrderDetailsByRetailer(e){var t;(null===(t=this.selectedRetailer)||void 0===t?void 0:t.id)!==e.id&&(this.savingOrder=!0,this.newProduct=null,this.selectedRetailer=JSON.parse(JSON.stringify(e)),this.orderService.getOrderDetails(e.id).subscribe(e=>{if(this.savingOrder=!1,200===e.status){this.orderDetails=e.data;const t=this.orderDetails.credit_order_type;t==E.a.CREDIT_ORDER_TYPE.Regular_Order&&(this.credit_order_type_string="Regular"),t==E.a.CREDIT_ORDER_TYPE.Credit_Order_Without_Discount&&(this.credit_order_type_string="Credit Without Discount"),t==E.a.CREDIT_ORDER_TYPE.Credit_Order_With_Discount&&(this.credit_order_type_string="Credit With Discount");const i=this.orderDetails.order_context;1===i&&(this.product_type_string="Normal"),2===i&&(this.product_type_string="Exclusive"),this.setMerchantDiscount(),this.orderDetails.items=this.orderDetails.items.map(e=>{const t=this.inventory.find(t=>t.item_id===e.item_id);return e.item_trade_price=JSON.parse(JSON.stringify(t.item_trade_price)),e.parent_trade_price=JSON.parse(JSON.stringify(t.parent_trade_price)),e.parent_unit_id=JSON.parse(JSON.stringify(t.parent_unit_id)),e.parent_quantity=JSON.parse(JSON.stringify(t.quantity)),e.child=JSON.parse(JSON.stringify(t.child)),e.item_retail_price=JSON.parse(JSON.stringify(t.item_retail_price)),e.extra_discount=JSON.parse(JSON.stringify(e.booker_discount)),e.tax_class_amount=JSON.parse(JSON.stringify(t.tax_class_amount)),e.tax_class_id=JSON.parse(JSON.stringify(t.tax_class_id)),e.tax_class_type=JSON.parse(JSON.stringify(t.tax_class_type)),e.pref_id=JSON.parse(JSON.stringify(t.pref_id)),e.unit_id=JSON.parse(JSON.stringify(t.unit_id)),e.unit_name=JSON.parse(JSON.stringify(t.unit_name)),e.brand_id=JSON.parse(JSON.stringify(t.brand_id)),e.is_active=JSON.parse(JSON.stringify(t.is_active)),e.stockQty=JSON.parse(JSON.stringify(e.dispatch_qty)),e.net_amount=JSON.parse(JSON.stringify(e.final_price)),e.gross_amount=e.unit_price_after_scheme_discount*e.stockQty,e.extra_discount_pkr=e.stockQty*e.extra_discount,e.original_amount=e.item_trade_price*e.stockQty,e.special_discount_pkr=e.special_discount,e.trade_discount=JSON.parse(JSON.stringify(e.merchant_discount)),e.trade_discount_pkr=JSON.parse(JSON.stringify(e.merchant_discount_pkr)),e.tax_amount_pkr=JSON.parse(JSON.stringify(e.total_tax_amount||0)),e.selectedScheme=this.schemes.find(t=>t.id===e.scheme_id),e})}},e=>{this.savingOrder=!1,this.loading=!1,1!==e.status&&401!==e.status&&(console.log("Error while getting order detail data :>> ",e.message),this.toastService.showToaster({type:"error",message:"Cannot fetch Order Detail. Please try again",title:"Error:"}))}),this.getDiscountSlabs())}addNewProductToOrder(e){this.newProduct=e}getDiscountSlabs(){this.discountSlabs.length?this.setMerchantDiscount():this.orderService.getDiscountSlabs().subscribe(e=>{200===e.status&&(this.discountSlabs=e.data,this.setMerchantDiscount())},e=>{1!==e.status&&401!==e.status&&(console.log("Error while getting order detail data :>> ",e.message),this.toastService.showToaster({type:"error",message:"Cannot fetch Merchant Discounts. Please try again",title:"Error:"}))})}setMerchantDiscount(){const e=this.orderDetails.order_context;this.merchantDiscount=this.discountSlabs.find(t=>t.region_id===this.selectedRetailer.region_id&&this.selectedRetailer.segment_id===t.segment_id&&t.channel_id===this.selectedRetailer.retailer_type_id&&t.slab_type==e)}openProductsList(){this.showProducts=!0,document.body.classList.add("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.add("d-block"),document.getElementById("order-contaienr").classList.add("blur-div")}closeNewProducts(){this.showProducts=!1,document.body.classList.remove("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.remove("d-block"),document.getElementById("order-contaienr").classList.remove("blur-div")}saveOrder(){this.savingOrder=!0,console.log("this.orderDetails :>> ",this.orderDetails),this.orderService.saveDispatchQuantityOrder(this.orderDetails).subscribe(e=>{this.newProduct=null,this.savingOrder=!1,200===e.status&&this.toastService.showToaster({message:`Order for ${this.selectedRetailer.retailer_name.toUpperCase()} dispatched successfully!`,title:"Order dispatched:",type:"success"});const t=this.ordersRetailers.findIndex(t=>t.retailer_id===e.data.retailer_id);this.ordersRetailers[t].total=e.data.total_amount_after_tax,this.orderDetails.items=[],this.selectedRetailer.isActive=!1,this.ordersRetailers.find(e=>e.id===this.selectedRetailer.id).isActive=!1,this.selectedRetailer=JSON.parse(JSON.stringify(null))},e=>{this.savingOrder=!1,1!==e.status&&401!==e.status&&(console.log("Error in Save Order for dispatch ::>> ",e),this.toastService.showToaster({message:"Something went wrong dispatch cannot be save at the moment!",title:"Error:",type:"error"}))})}setOrderItems(){this.orderDetails.items=this.orderDetails.items.map(e=>{var t,i,r,o,a;return{id:e.id||0,employee_id:this.orderDetails.employee_id,pref_id:e.pref_id,item_quantity_booker:e.item_quantity_booker,item_quantity_updated:e.item_quantity_updated||0,quantity_returned:0,original_price:e.item_trade_price,scheme_discount:e.scheme_discount,unit_price_after_scheme_discount:e.unit_price_after_scheme_discount,merchant_discount:e.trade_discount,merchant_discount_pkr:e.trade_discount_pkr,unit_price_after_merchant_discount:e.unit_price_after_merchant_discount,special_discount:e.special_discount,unit_price_after_special_discount:e.unit_price_after_special_discount,booker_discount:e.extra_discount,unit_price_after_individual_discount:e.unit_price_after_individual_discount||e.price,unit_id:e.unit_id,unit_name:e.unit_name,brand_id:e.brand_id,item_id:e.item_id,item_name:e.item_name,scheme_id:(null===(t=e.selectedScheme)||void 0===t?void 0:t.id)||0,scheme_min_quantity:(null===(i=e.selectedScheme)||void 0===i?void 0:i.min_qty)||0,scheme_quantity_free:(null===(r=e.selectedScheme)||void 0===r?void 0:r.quantity_free)||0,scheme_rule:(null===(o=e.selectedScheme)||void 0===o?void 0:o.rule_name)||"",gift_value:e.gift_value||0,parent_pref_id:e.child,parent_unit_id:e.parent_unit_id,parent_brand_id:e.brand_id,parent_tp:e.parent_trade_price,parent_qty_sold:e.parent_qty_sold,parent_value_sold:e.net_amount,final_price:e.net_amount,campaign_id:(null===(a=e.selectedScheme)||void 0===a?void 0:a.id)||0,item_status:e.is_active,dispatch_status:2,dispatch_qty:+e.stockQty,dispatch_amount:e.net_amount,reasoning:"",distributor_id:this.orderDetails.distributor_id,division_id:this.selectedRetailer.division_id||0,region_id:this.orderDetails.region_id,area_id:this.orderDetails.area_id,assigned_route_id:this.orderDetails.assigned_route_id,territory_id:this.orderDetails.territory_id,booked_order_value:e.booked_order_value||0,booked_total_qty:e.booked_total_qty||0,is_deleted:e.isDeleted,quantity:+e.stockQty,gross_sale_amount:e.original_amount,total_retail_price:e.item_retail_price*e.stockQty,tax_class_id:e.tax_class_id,tax_in_percentage:e.tax_class_amount,tax_in_value:e.tax_amount_value||0,total_tax_amount:e.tax_amount_pkr||0,total_amount_after_tax:e.net_amount,total_discount:+e.stockQty*e.scheme_discount+ +e.stockQty*e.trade_discount_pkr+ +e.stockQty*e.special_discount+e.extra_discount_pkr,order_id:this.orderDetails.id}}),this.saveOrder()}cancelOrder(){document.getElementById("close-del").click(),this.savingOrder=!0,this.orderService.cancelOrder(this.orderDetails.id).subscribe(e=>{this.savingOrder=!1,200===e.status&&(this.toastService.showToaster({message:`Order for ${this.selectedRetailer.retailer_name.toUpperCase()} canceled!`,title:"Order dispatched:",type:"success"}),this.orderDetails.items=[],this.ordersRetailers=this.ordersRetailers.filter(e=>e.id!==this.selectedRetailer.id),this.selectedRetailer=null,this.getDispatchDetails())},e=>{this.savingOrder=!1,1!==e.status&&401!==e.status&&(console.log("Error in Save Order for dispatch ::>> ",e),this.toastService.showToaster({message:"Something went wrong order cannot be canceled at the moment!",title:"Error:",type:"error"}))})}addOrderBill(e){e.isAdded=!0;let t=this.credits.find(t=>t.order_id===e.id);t?t.recovery=+e.recovery:(t={recovery:+e.recovery,order_id:e.id,retailer_id:e.retailer_id,dispatched_bill_amount:e.order_total},this.credits.push(t))}removeOrderBill(e){e.isAdded=!1,e.recovery=0}searchByRetailer(){this.ordersDispList=this.searchText?this.remainingOrders.filter(e=>e.retailer_name.toLowerCase().includes(this.searchText.toLowerCase())):JSON.parse(JSON.stringify(this.remainingOrders))}openConfirmationModal(){if(this.currentLoadValidation()){const e=this.dispatchOrderDetail.orders.filter(e=>!e.isSelected);if(3===this.load.content.length&&0!==e.length)return void this.toastService.showToaster({type:"error",title:"Select All Orders:",message:"Some orders are not selected"});3!==this.load.content.length&&0!==e.length?this.currentLoadContent.items.length?document.getElementById("open-create-load").click():this.toastService.showToaster({type:"error",title:"Select Orders:",message:"Select orders to create load"}):this.saveDispatch()}}saveDispatch(){this.loading=!0;let e=0;this.credits.map(t=>{e=t.recovery+e});let t=0;this.load.content.map(e=>{t=e.total_products+t}),this.load.content=this.load.content.map(e=>(delete e.loadNumber,e)),this.load.salesman_id=this.salemanId,this.load.total_orders=this.dispatchOrderDetail.orders.length,this.load.total_gross_amount=this.dispatchOrderDetail.summary.gross_total||0,this.load.total_trade_offer=this.dispatchOrderDetail.summary.trade_offer,this.load.total_trade_discount=this.dispatchOrderDetail.summary.trade_discount,this.load.total_special_discount=this.dispatchOrderDetail.summary.special_discount,this.load.total_booker_discount=this.dispatchOrderDetail.summary.booker_discount,this.load.total_tax_amount=this.dispatchOrderDetail.summary.total_tax||0,this.load.total_recovery_amount=e,this.load.total_net_sale=this.dispatchOrderDetail.summary.total_price,this.load.total_products=t,this.load.distributor_id=this.distributorId,this.load.total_sub_loads=this.load.content.length,this.load.processed_date=this.orderDate,this.load.assignmentId=this.assignmentId;const i={load:this.load,payments:this.credits};this.showFinalLoad=!1,this.orderService.saveDispatchOrder(i).subscribe(e=>{200===e.status&&(this.finalLoad=e.data,setTimeout(()=>{this.loading=!1,this.showFinalLoad=!0},500),this.dispatchOrderDetail=null,this.ordersDispList=[],this.remainingOrders=[],this.isAllSelected=!1,this.setLoad(),this.setCurrentLoad(1),this.load.content.push(this.currentLoadContent),this.toastService.showToaster({type:"success",message:"Payments and Load saved successfully!",title:"Payments and Load saved:"}),this.currentTab=4,this.tabChanged())},e=>{this.loading=!1,1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Payments and Load not saved, please try again later!",title:"Error:"})})}currentLoadValidation(){return!!this.currentLoadContent.items.length||(this.toastService.showToaster({title:"Load Error:",message:"Please select orders to add into current load",type:"error"}),!1)}changeCurrentLoad(e){var t;if(this.currentLoadValidation()){this.remainingOrders=this.dispatchOrderDetail.orders.filter(e=>!e.isSelected),this.currentLoadContent=this.load.content.find(t=>t.loadNumber===e);const i=null===(t=this.dispatchOrderDetail)||void 0===t?void 0:t.orders.filter(e=>{if(this.currentLoadContent.order_ids.includes(e.id))return e.isSelected=!0,e});i.length&&(this.remainingOrders=[...i,...this.remainingOrders]),this.ordersDispList=JSON.parse(JSON.stringify(this.remainingOrders))}}updateDispatchedQty(e){+e.issued_qty>1e3&&(e.issued_qty=0),e.dispatched_qty=+e.issued_qty+e.actual_qty}allSelected(){this.isAllSelected?(this.remainingOrders=this.remainingOrders.map(e=>(e.isSelected=!0,e)),this.setAllOrdersToCurrentLoad()):(this.remainingOrders=this.remainingOrders.map(e=>(e.isSelected=!1,e)),this.removeAllOrdersFromCurrentLoad()),this.ordersDispList=JSON.parse(JSON.stringify(this.remainingOrders))}setAllOrdersToCurrentLoad(){this.currentLoadContent.items=[],this.remainingOrders.forEach(e=>{this.dispatchOrderDetail.orders=this.dispatchOrderDetail.orders.map(t=>(e.id===t.id&&(t.isSelected=!0),t)),this.currentLoadContent=this.dispatchService.setLoadContent(e,this.currentLoadContent)})}getItemName(e){return this.inventory.find(t=>t.item_id===e).item_name}addCurrentLoad(){this.remainingOrders=this.remainingOrders.filter(e=>!this.currentLoadContent.order_ids.includes(e.id)),this.ordersDispList=JSON.parse(JSON.stringify(this.remainingOrders)),this.setCurrentLoad(this.load.content.length+1),this.load.content.push(this.currentLoadContent),3===this.currentLoadContent.loadNumber&&(this.isAllSelected=!0,this.allSelected()),document.getElementById("close-confirm-load").click()}removeAllOrdersFromCurrentLoad(){this.currentLoadContent.items=[],this.dispatchOrderDetail.orders=this.dispatchOrderDetail.orders.map(e=>(this.currentLoadContent.order_ids.includes(e.id)&&(e.isSelected=!1),e)),this.currentLoadContent.order_ids=[],this.currentLoadContent.total_orders=0,this.currentLoadContent.total_products=0}retailerSelected(e){e.isSelected?(this.currentLoadContent=this.dispatchService.setLoadContent(e,this.currentLoadContent),this.dispatchOrderDetail.orders=this.dispatchOrderDetail.orders.map(t=>(e.id===t.id&&(t.isSelected=!0),t))):(this.isAllSelected=!1,this.currentLoadContent=this.dispatchService.removeOrderFromCurrentLoad(e,this.currentLoadContent),this.dispatchOrderDetail.orders=this.dispatchOrderDetail.orders.map(t=>(e.id===t.id&&(t.isSelected=!1),t))),this.remainingOrders=this.remainingOrders.map(t=>(t.id===e.id&&(t.isSelected=e.isSelected),t)),this.ordersDispList=JSON.parse(JSON.stringify(this.remainingOrders))}completeDispatch(){this.loading=!0,this.orderService.completeOrderDispatch(this.finalLoad.load_id).subscribe(e=>{this.loading=!1,this.toastService.showToaster({type:"success",message:"Order dispatch completed successfully!",title:"Order Dipatched Completed:"}),this.router.navigateByUrl("/orders/dispatch-orders")},e=>{this.loading=!1,1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Order Dispatch cannot be completed at the moment, please try again later!",title:"Error:"})})}revertDispatch(){this.loading=!0,this.orderService.revertOrderDispatch(this.finalLoad.load_id).subscribe(e=>{this.loading=!1,this.toastService.showToaster({type:"success",message:"Order dispatch reverted successfully!",title:"Dipatch Reverted:"}),this.currentTab=1,this.credits=[],this.dispatchOrderDetail=null,this.ordersDispList=[],this.isAllSelected=!1,this.tabChanged()},e=>{this.loading=!1,1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Revert cannot be completed at the moment, please try again later!",title:"Error:"})})}getBookingSheet(){window.open(`${E.a.baseUrl}${A.a.BOOKING_SHEET_PDF}?emp=${this.salemanId}&date=${this.orderDate}&loadId=${this.finalLoad.load_id}`)}getBills(e="A4"){this.invoiceDate?this.orderService.updateDispatchInvoiceDate(this.finalLoad.load_id,this.invoiceDate).subscribe(t=>{200===t.status?(document.getElementById("close-bills").click(),window.open(`${E.a.baseUrl}${A.a.BILLS}?type=bill&emp=${this.salemanId}&date=${this.orderDate}&dist_id=${this.distributorId}&size=${e}&status=processed&loadId=${this.finalLoad.load_id}`)):this.toastService.showToaster({type:"error",message:"Bill cannot be generated at the moment, please try again later!",title:"Bill cannot be generated:"})},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Bill cannot be generated at the moment, please try again later!",title:"Bill cannot be generated:"})}):this.toastService.showToaster({type:"error",message:"Please select invoice date to generate bill(s)!",title:"Please select invoice date:"})}generateLSPDF(){window.open(`${E.a.baseUrl}${A.a.LS_PDF}/${this.finalLoad.load_id}/${this.salemanId}/${this.orderDate}`)}onSkipCreditNext(){document.getElementById("close-prod-del").click(),this.currentTab=this.currentTab+1,this.setDataForLoad()}isRecoveryAdded(){const e=this.recoveryRetailers.filter(e=>e.balance>0).filter(e=>!1===e.isAdded).length>0;return console.log("isRecoveryAdded",e),e}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(a.f),n.Jb(a.a),n.Jb(l.a),n.Jb(s.a),n.Jb(K.a),n.Jb(Mi),n.Jb(c.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-dispatch-order"]],decls:149,vars:20,consts:[["id","exampleModal-del","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top-borderRed"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"modal-footer","border-0"],["type","button",1,"btn","btn-primary",3,"click"],["type","submit","id","close-prod-del","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],["id","onSkipCreditNext","data-toggle","modal","data-target","#exampleModal-del",2,"display","none"],[3,"selectedRetailer","orderedProducts","loadingProducts","allProducts","productSchemes","productMerchantDiscount","specialDiscounts","selectedOrderCreditType","selectedProductType","drawerClosed","productSelected",4,"ngIf"],["id","order-del","tabindex","-1","role","dialog","aria-labelledby","orderLabel","aria-hidden","true",1,"modal","fade"],["id","orderLabel",1,"modal-title"],["type","submit","id","close-del","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],["id","billsModal","tabindex","-1","role","dialog","aria-labelledby","billsModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-content","top_border"],["id","billsModalLabel",1,"modal-title"],["type","button","id","close-bills","data-dismiss","modal","aria-label","Close",1,"close"],[1,"row"],[1,"col-auto",2,"padding-top","6px","font-size","14px"],[1,"col"],["type","date","id","invoice-date","name","invoice-date","placeholder","",1,"form-control","select-date",3,"ngModel","ngModelChange"],[1,"col-12"],[1,"heading3"],[1,"row","print-icon-div","pb-0"],[1,"col-6","pl-0"],[3,"click"],["src","assets/images/a4.svg","alt","",1,"print-icon"],[1,"col-6","pr-0"],["src","assets/images/a5.svg","alt","",1,"print-icon"],["id","create-load","tabindex","-1","role","dialog","aria-labelledby","create-loadLabel","aria-hidden","true",1,"modal","fade"],["id","create-loadLabel",1,"modal-title"],["type","submit","id","close-confirm-load","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel"],["id","order-contaienr",1,"container"],[1,"card","daily-operations"],["id","pills-tab","role","tablist",1,"nav","nav-pills","nav_M","mb-3"],[1,"nav-item"],["id","pills-home-tab",1,"nav-link",3,"ngClass"],[1,"wz-icon"],[1,"fa","fa-list-ul"],["id","pills-contact-tab",1,"nav-link",3,"ngClass"],[1,"fa","fa-dollar-sign"],["id","pills-load-tab",1,"nav-link",3,"ngClass"],[1,"fa","fa-truck"],["id","pills-final-tab",1,"nav-link",3,"ngClass"],[1,"fa","fa-check"],["id","pills-tabContent",1,"tab-content"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","tab_M","p-0","PT-15","fade",3,"ngClass"],[1,"row","m-0","grayTopborder"],["id","orderList-id",1,"col-4","p-0"],[3,"retailers","loading","retailerChanged"],[1,"col","p-0"],["class","rightHeight",4,"ngIf"],["class","col-md-12 bottom-act-btn",4,"ngIf"],["id","pills-contact","role","tabpanel","aria-labelledby","pills-contact-tab",1,"tab-pane","p-0","PT-20","tab_M","fade",3,"ngClass"],[1,"col-12","PT-15"],["datatable","","class","table table-hover dt-responsive nowrap","id","example","style","width: 100%",3,"dtOptions",4,"ngIf"],["class","col-12",4,"ngIf"],["id","pills-load","role","tabpanel","aria-labelledby","pills-load-tab",1,"tab-pane","tab_M","p-0","PT-15","fade",3,"ngClass"],["class","row m-0 grayTopborder",4,"ngIf"],["id","pills-final","role","tabpanel","aria-labelledby","pills-final-tab",1,"tab-pane","tab_M","p-0","PT-15","fade",3,"ngClass"],[1,"col-8","PB-30"],[1,"header","PT-10","PB-10","mb-15"],[1,"w-100"],["datatable","","class","table table-hover dt-responsive nowrap dc-table","id","example2","style","width: 100%",3,"dtOptions",4,"ngIf"],[1,"col-4"],["class","cash-report",4,"ngIf"],["class","col-md-12 pl-10 pr-10 text-center",4,"ngIf"],[3,"selectedRetailer","orderedProducts","loadingProducts","allProducts","productSchemes","productMerchantDiscount","specialDiscounts","selectedOrderCreditType","selectedProductType","drawerClosed","productSelected"],[1,"rightHeight"],[3,"orderDetail","schemes","selectedRetailer","orders","allProducts","specialDiscounts","merchantDiscount","newProduct","credit_order_type","credit_order_type_string","product_type_string","orderType","selectedOrderCreditType","openDrawer",4,"ngIf"],["class","no-content",4,"ngIf"],[3,"orderDetail","schemes","selectedRetailer","orders","allProducts","specialDiscounts","merchantDiscount","newProduct","credit_order_type","credit_order_type_string","product_type_string","orderType","selectedOrderCreditType","openDrawer"],[1,"no-content"],[1,"no-content-container",2,"margin","auto","display","table","text-align","center","color","#b7b7b7"],["src","assets/images/select order-icon.svg","alt",""],[1,"col-md-12","bottom-act-btn"],["class","btn btn-primary mr-2 save_order_execution font13",3,"disabled","click",4,"ngIf"],["data-toggle","modal","data-target","#order-del","class","btn btn-cancel cancel_order_btn font13",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-primary mr-2","disabled","",4,"ngIf"],[1,"btn","btn-primary","mr-2","save_order_execution","font13",3,"disabled","click"],["data-toggle","modal","data-target","#order-del",1,"btn","btn-cancel","cancel_order_btn","font13",3,"disabled"],["type","submit","disabled","",1,"btn","btn-primary","mr-2"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["datatable","","id","example",1,"table","table-hover","dt-responsive","nowrap",2,"width","100%",3,"dtOptions"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","number","placeholder","0",1,"form-control","value_input",3,"readonly","id","ngModel","name","ngModelChange","keydown"],["class","input-error","style","width: 100px; max-width: 100px",4,"ngIf"],["class","btn btn-default btn-line",3,"disabled","click",4,"ngIf"],["class","btn btn-default red-bg",3,"click",4,"ngIf"],[1,"input-error",2,"width","100px","max-width","100px"],[1,"btn","btn-default","btn-line",3,"disabled","click"],[1,"btn","btn-default","red-bg",3,"click"],["id","orderList-id2","class","col-4 p-0",4,"ngIf"],["class","col p-0",4,"ngIf"],["id","orderList-id2",1,"col-4","p-0"],[1,"_selectProList","ProListHeight"],[1,"header","ProListHD"],[1,"select-all-op"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","all-selected","id","all-selected","id","all-s",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","all-s",1,"custom-control-label"],[1,"APS-list"],[1,"fa","fa-search"],["type","text","id","","placeholder","Search",1,"form-control"],[1,"ProList-div"],["class","col-12 order-list select-checkmark",4,"ngFor","ngForOf"],[1,"col-12","order-list","select-checkmark"],[1,"ord-no"],[1,"col-8","pr-0"],[2,"margin-bottom","2px"],[1,"fa","fa-map-marker-alt"],[1,"col-4","pl-0"],["type","checkbox",1,"custom-control-input",3,"name","ngModel","id","change","ngModelChange"],[1,"custom-control-label",3,"for"],[1,"text-right"],[1,"or-val"],[1,"rightHeight","PT-5"],[1,"header-tabs"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["class","nav-item nav-link","id","nav-load1-tab",3,"id","ngClass","click",4,"ngFor","ngForOf"],["id","nav-tabContent",1,"tab-content"],["id","nav-load1","role","tabpanel","aria-labelledby","nav-load1-tab",1,"tab-pane","fade","show","active","body_sales_agants"],[1,"col-12","retailerTable"],[1,"table","table-hover","dt-responsive","nowrap","th-boarder",2,"width","100%"],["rowspan","2"],["colspan","1",2,"text-align","center"],[2,"text-align","center"],["id","nav-load1-tab",1,"nav-item","nav-link",3,"id","ngClass","click"],["type","number",1,"value_input",3,"ngModel","name","id","ngModelChange","keyup","keydown"],["datatable","","id","example2",1,"table","table-hover","dt-responsive","nowrap","dc-table",2,"width","100%",3,"dtOptions"],["rowspan","2",2,"vertical-align","middle"],["colspan","2","style","text-align: center",4,"ngFor","ngForOf"],["colspan","2",2,"text-align","center"],[1,"cash-report"],[1,"header"],[1,"report_value"],[1,"report_value",2,"color","#0038ba"],[2,"padding","10px 15px"],[1,"row","act-btn-print"],[1,"btn","btn-primary","print-btn","fontSize",3,"click"],[1,"fa","fa-print"],["data-toggle","modal","data-target","#billsModal",1,"btn","btn-primary","print-btn","fontSize"],[1,"col-6","pl-5","pt-5"],["class","btn btn-primary red-bg cancel_dispatch w-100",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary red-bg w-100 mr-2","disabled","",4,"ngIf"],[1,"col-6","pl-0","pr-5","pt-5"],["class","btn btn-primary m-0 nextButton w-100",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary w-100 mr-2","disabled","",4,"ngIf"],[1,"btn","btn-primary","red-bg","cancel_dispatch","w-100",3,"click"],["type","submit","disabled","",1,"btn","btn-primary","red-bg","w-100","mr-2"],[1,"btn","btn-primary","m-0","nextButton","w-100",3,"click"],["type","submit","disabled","",1,"btn","btn-primary","w-100","mr-2"],[1,"col-md-12","pl-10","pr-10","text-center"],[1,"execFooter"],["type","submit",1,"btn","btn-primary","m-0","mr-2",3,"disabled","click"],["type","submit","class","btn btn-primary m-0",3,"disabled","click",4,"ngIf"],["id","open-create-load","data-toggle","modal","data-target","#create-load",2,"display","none"],["type","submit",1,"btn","btn-primary","m-0",3,"disabled","click"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"h5",4),n.vc(5,"Delete "),n.Kb(6,"span"),n.Ob(),n.Pb(7,"button",5),n.Pb(8,"span",6),n.vc(9,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(10,"div",7),n.Pb(11,"div",8),n.Pb(12,"p"),n.vc(13,"Are you sure you want to Skip Pending Amount?"),n.Ob(),n.Ob(),n.Ob(),n.Pb(14,"div",9),n.Pb(15,"button",10),n.Wb("click",(function(){return t.onSkipCreditNext()})),n.vc(16," Yes "),n.Ob(),n.Pb(17,"button",11),n.vc(18," No "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(19,"button",12),n.vc(20," Open yes no\n"),n.Ob(),n.tc(21,Ai,1,9,"app-products-drawer",13),n.Pb(22,"div",14),n.Pb(23,"div",1),n.Pb(24,"div",2),n.Pb(25,"div",3),n.Pb(26,"h5",15),n.vc(27,"Cancel Order "),n.Kb(28,"span"),n.Ob(),n.Pb(29,"button",5),n.Pb(30,"span",6),n.vc(31,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(32,"div",7),n.Pb(33,"div",8),n.Pb(34,"p"),n.vc(35,"Are you sure you want to cancel the order?"),n.Ob(),n.Ob(),n.Ob(),n.Pb(36,"div",9),n.Pb(37,"button",10),n.Wb("click",(function(){return t.cancelOrder()})),n.vc(38," Yes "),n.Ob(),n.Pb(39,"button",16),n.vc(40," No "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(41,"div",17),n.Pb(42,"div",1),n.Pb(43,"div",18),n.Pb(44,"div",3),n.Pb(45,"h5",19),n.vc(46," Please chose invoice date"),n.Kb(47,"span"),n.Ob(),n.Pb(48,"button",20),n.Pb(49,"span",6),n.vc(50,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(51,"div",7),n.Pb(52,"div",21),n.Pb(53,"div",22),n.vc(54," Select Date "),n.Ob(),n.Pb(55,"div",23),n.Pb(56,"input",24),n.Wb("ngModelChange",(function(e){return t.invoiceDate=e})),n.Ob(),n.Ob(),n.Pb(57,"div",25),n.Kb(58,"hr"),n.Ob(),n.Ob(),n.Pb(59,"div",21),n.Pb(60,"div",25),n.Pb(61,"h3",26),n.vc(62,"Select paper size for print"),n.Ob(),n.Ob(),n.Ob(),n.Pb(63,"div",27),n.Pb(64,"div",28),n.Pb(65,"a",29),n.Wb("click",(function(){return t.getBills("A4")})),n.Kb(66,"img",30),n.Pb(67,"strong"),n.vc(68,"A4 Portrait Paper"),n.Ob(),n.Ob(),n.Ob(),n.Pb(69,"div",31),n.Pb(70,"a",29),n.Wb("click",(function(){return t.getBills("A5")})),n.Kb(71,"img",32),n.Pb(72,"strong"),n.vc(73,"A5 Landscape Paper"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(74,"div",33),n.Pb(75,"div",1),n.Pb(76,"div",2),n.Pb(77,"div",3),n.Pb(78,"h5",34),n.vc(79," Confirm Load "),n.Kb(80,"span"),n.Ob(),n.Pb(81,"button",5),n.Pb(82,"span",6),n.vc(83,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(84,"div",7),n.Pb(85,"div",8),n.Pb(86,"p"),n.vc(87,"Are you sure you want to create New Load?"),n.Ob(),n.Ob(),n.Ob(),n.Pb(88,"div",9),n.Pb(89,"button",10),n.Wb("click",(function(){return t.addCurrentLoad()})),n.vc(90," Yes "),n.Ob(),n.Pb(91,"button",35),n.vc(92," No "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(93,"div",36),n.Pb(94,"div",21),n.Pb(95,"div",8),n.Pb(96,"div",37),n.Pb(97,"ul",38),n.Pb(98,"li",39),n.Pb(99,"a",40),n.Pb(100,"span"),n.vc(101,"Orders"),n.Ob(),n.Pb(102,"span",41),n.Kb(103,"i",42),n.Ob(),n.Ob(),n.Ob(),n.Pb(104,"li",39),n.Pb(105,"a",43),n.Pb(106,"span"),n.vc(107,"Credit"),n.Ob(),n.Pb(108,"span",41),n.Kb(109,"i",44),n.Ob(),n.Ob(),n.Ob(),n.Pb(110,"li",39),n.Pb(111,"a",45),n.Pb(112,"span"),n.vc(113,"Load"),n.Ob(),n.Pb(114,"span",41),n.Kb(115,"i",46),n.Ob(),n.Ob(),n.Ob(),n.Pb(116,"li",39),n.Pb(117,"a",47),n.Pb(118,"span"),n.vc(119,"Final"),n.Ob(),n.Pb(120,"span",41),n.Kb(121,"i",48),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(122,"div",49),n.Pb(123,"div",50),n.Pb(124,"div",51),n.Pb(125,"div",52),n.Pb(126,"app-retailer-sub-list",53),n.Wb("retailerChanged",(function(e){return t.getOrderDetailsByRetailer(e)})),n.Ob(),n.Ob(),n.Pb(127,"div",54),n.tc(128,Ni,4,3,"div",55),n.tc(129,Fi,4,3,"div",56),n.Ob(),n.Ob(),n.Ob(),n.Pb(130,"div",57),n.Pb(131,"div",58),n.tc(132,Vi,17,2,"table",59),n.tc(133,Zi,2,0,"div",60),n.Ob(),n.Ob(),n.Pb(134,"div",61),n.tc(135,tr,4,3,"div",62),n.Ob(),n.Pb(136,"div",63),n.Pb(137,"div",25),n.Pb(138,"div",21),n.Pb(139,"div",64),n.Pb(140,"div",65),n.Pb(141,"h2",66),n.vc(142,"Load "),n.Pb(143,"span"),n.vc(144," Sheet"),n.Ob(),n.Ob(),n.Ob(),n.tc(145,sr,15,6,"table",67),n.Ob(),n.Pb(146,"div",68),n.tc(147,pr,82,44,"div",69),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(148,gr,8,3,"div",70),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.yb(21),n.ec("ngIf",t.showProducts),n.yb(35),n.ec("ngModel",t.invoiceDate),n.yb(43),n.ec("ngClass",1===t.currentTab?"active":""),n.yb(6),n.ec("ngClass",2===t.currentTab?"active":""),n.yb(6),n.ec("ngClass",3===t.currentTab?"active":""),n.yb(6),n.ec("ngClass",4===t.currentTab?"active":""),n.yb(6),n.ec("ngClass",1===t.currentTab?"active show":""),n.yb(3),n.ec("retailers",t.ordersRetailers)("loading",t.loading||t.loadingProduct||t.savingOrder),n.yb(2),n.ec("ngIf",1===t.currentTab),n.yb(1),n.ec("ngIf",t.selectedRetailer),n.yb(1),n.ec("ngClass",2===t.currentTab?"active show":""),n.yb(2),n.ec("ngIf",(null==t.recoveryRetailers?null:t.recoveryRetailers.length)&&!t.loading),n.yb(1),n.ec("ngIf",t.loading),n.yb(1),n.ec("ngClass",3===t.currentTab?"active show":""),n.yb(1),n.ec("ngIf",3===t.currentTab),n.yb(1),n.ec("ngClass",4===t.currentTab?"active show":""),n.yb(9),n.ec("ngIf",t.showFinalLoad),n.yb(2),n.ec("ngIf",t.finalLoad),n.yb(1),n.ec("ngIf",4!==t.currentTab))},directives:[r.k,o.b,o.h,o.k,r.i,G.a,Z.a,H.a,p.a,u.a,r.j,o.m,o.a],pipes:[r.o,r.d],styles:[".dispatch-order[_ngcontent-%COMP%]{padding:0!important}.dispatch-order[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1220px}.dispatch-order[_ngcontent-%COMP%]{padding:0}.retailerTable[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px;border:1px solid #fff!important;vertical-align:middle;padding:2px 5px!important}.retailerTable[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px!important;padding:5px 4px!important;vertical-align:middle;line-height:1}#wrapper[_ngcontent-%COMP%]   #content-wrapper[_ngcontent-%COMP%]{padding-left:0!important}.container[_ngcontent-%COMP%]{max-width:1280px}.add-stock-input[_ngcontent-%COMP%]{font-size:13px;width:80px;height:25px;box-shadow:none;border-color:#ddd;padding:0 5px 0 8px}.CP-name[_ngcontent-%COMP%], .CP-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{letter-spacing:1px}.CP-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-top:4px}.ProList-div[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-2px;margin-bottom:-2px;margin-left:4px}._selectProList[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .add_button[_ngcontent-%COMP%]{padding:4px 8px 3px;right:15px}#orderList-id[_ngcontent-%COMP%], #orderList-id2[_ngcontent-%COMP%]{flex:0 0 300px;max-width:300px;width:300px}.value_input[_ngcontent-%COMP%]{padding:2px;margin:0!important;font-size:12px;box-shadow:none;height:22px;width:52px;border:1px solid #e2e6ea}.rightHeight[_ngcontent-%COMP%]{height:calc(100vh - 249px);overflow-y:auto}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.no-products[_ngcontent-%COMP%]{text-align:center;color:#d3d3d3}.daily-operations[_ngcontent-%COMP%]   .nav_M[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .daily-operations[_ngcontent-%COMP%]   .nav_M[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:15px}.cash-report[_ngcontent-%COMP%]{background-color:#f8f8f8;min-height:calc(100vh - 210px)}.cash-report[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background:linear-gradient(0deg,#f8f8f8,#f8f8f8 50%);padding:15px 20px}.cash-report[_ngcontent-%COMP%]   .report_value[_ngcontent-%COMP%]{background-color:#fff;font-size:13px;position:relative;padding:10px;letter-spacing:.5px;margin-bottom:5px;margin-top:5px;box-shadow:0 2px 8px 0 rgba(79,79,79,.1);line-height:1}.cash-report[_ngcontent-%COMP%]   .report_value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Rationale,sans-serif;line-height:1;font-size:18px;float:right;margin-top:-2px}.totalcash[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px!important;color:#0038ba}.cash-report[_ngcontent-%COMP%]   .value_input[_ngcontent-%COMP%]{width:85px}.addsalesman[_ngcontent-%COMP%]{font-size:11px;width:100%;line-height:1;margin-top:5px}.return-btn[_ngcontent-%COMP%]{line-height:1;margin-top:10px}.add-expense[_ngcontent-%COMP%]{font-size:13px;padding:2px 10px;position:absolute;right:0}.red-bg[_ngcontent-%COMP%]{border:1px solid #f12300}.input-error[_ngcontent-%COMP%]{font-size:13px;color:red}.act-btn-print[_ngcontent-%COMP%]{margin:0}.act-btn-print[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%]{padding:5px}.print-btn[_ngcontent-%COMP%]{font-size:14px;text-align:center;background:linear-gradient(90deg,#fff,#fff);color:#282828!important;border:1px solid #0038ba;box-shadow:none;padding:10px 14px;white-space:normal;width:100%;min-height:85px;line-height:16px}.print-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#1e54d3,#0038ba);color:#fff!important}.print-btn[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{display:block;font-size:16px;padding:5px;margin-bottom:5px}.select-checkmark[_ngcontent-%COMP%]   .salevalue[_ngcontent-%COMP%]{text-align:right;margin:auto;vertical-align:middle}.select-checkmark[_ngcontent-%COMP%]   .ord-no[_ngcontent-%COMP%]{top:14px;font-size:45px}.select-checkmark[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{text-align:right;margin-top:-15px;margin-right:-10px;margin-bottom:13px}.select-all-op[_ngcontent-%COMP%]{position:absolute;top:-3px;right:15px}.select-all-op[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;line-height:2.2}.header-tabs[_ngcontent-%COMP%]{box-shadow:none}.header-tabs[_ngcontent-%COMP%], .header-tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border-bottom:1px solid #e2e2e2}.header-tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .header-tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .header-tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{padding:10px 26px;height:42px}.header-tabs[_ngcontent-%COMP%]   .add_button[_ngcontent-%COMP%]{letter-spacing:1px;padding:4px 15px;right:15px;box-shadow:none}.dc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;padding:4px 5px;border:1px solid #fff!important}.dc-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 8px!important}.wz-icon[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#fff}.th-boarder[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important;vertical-align:middle;padding:2px 5px!important}.daily-operations[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding-bottom:10px}.bottom-act-btn[_ngcontent-%COMP%]{text-align:right;padding-top:15px;padding-bottom:15px}.bottom-act-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{letter-spacing:1px;font-size:12px;padding:4px 12px;box-shadow:none}.execFooter[_ngcontent-%COMP%]{background:#f6f6f6;padding-top:10px;padding-bottom:10px;margin-top:5px}.cash-report[_ngcontent-%COMP%]   .value_input[_ngcontent-%COMP%]{float:right;width:95px}._selectProList[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:15px!important}.print-icon-div[_ngcontent-%COMP%], .print-icon-div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;padding:15px}.print-icon-div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;border:1px solid #e9ecef;width:100%;text-decoration:none;color:#282828;font-size:13px}.print-icon-div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:HOVER{border:1px solid #0038ba;color:#0038ba;box-shadow:0 0 20px 0 rgba(0,0,0,.3)}.print-icon[_ngcontent-%COMP%]{filter:grayscale(1);width:45px;opacity:.7;display:block;margin:10px auto 15px}.print-icon-div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:HOVER   .print-icon[_ngcontent-%COMP%]{filter:none;opacity:1}.heading3[_ngcontent-%COMP%]{margin:0;font-size:16px}.select-date[_ngcontent-%COMP%], .select-date[_ngcontent-%COMP%]:focus{box-shadow:none;border:none;background-color:#f6f6f6;font-size:14px;height:30px;width:200px}.no-content[_ngcontent-%COMP%]{width:100%;height:65vh;display:flex}.no-content[_ngcontent-%COMP%]   .no-content-container[_ngcontent-%COMP%]{margin:auto;display:table;text-align:center;color:#b7b7b7}.no-content[_ngcontent-%COMP%]   .no-content-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px;margin:auto auto 10px;display:block}"]}),e})();var vr=i("B15e");function _r(e,t){const i=vr.a.getInstance;return t=>{const r=t.controls[e];r.errors&&!r.errors.mustMatch||(r.value<=0?r.setErrors({equalZero:!0}):parseInt(r.value)>parseInt(i.totalDueAmount.toString())?r.setErrors({mustMatch:!0}):r.setErrors(null))}}var Pr=i("lqmV"),fr=i("IyDV"),yr=i("qceA");function xr(e,t){1&e&&(n.Pb(0,"div",9),n.Kb(1,"app-loader-white"),n.Ob())}function Cr(e,t){1&e&&(n.Pb(0,"div",3),n.Pb(1,"h5",18),n.vc(2," Add "),n.Pb(3,"span"),n.vc(4," Cheque Information"),n.Ob(),n.Ob(),n.Pb(5,"button",95),n.Pb(6,"span",6),n.vc(7,"\xd7"),n.Ob(),n.Ob(),n.Ob())}function Sr(e,t){1&e&&(n.Pb(0,"div",117),n.vc(1," Please select a payment method! "),n.Ob())}function kr(e,t){1&e&&(n.Pb(0,"span",25),n.vc(1," Please add Cheque Number! "),n.Ob())}function wr(e,t){1&e&&(n.Pb(0,"span",25),n.vc(1," Please add Payment Date! "),n.Ob())}function Dr(e,t){1&e&&(n.Pb(0,"span",25),n.vc(1," Please add Bank Name! "),n.Ob())}function Tr(e,t){1&e&&(n.Pb(0,"span",25),n.vc(1," Please add Total Amount! "),n.Ob())}function Rr(e,t){1&e&&(n.Pb(0,"span",25),n.vc(1," Zero value not allowed "),n.Ob())}function Ir(e,t){if(1&e&&(n.Pb(0,"span",25),n.vc(1),n.Zb(2,"number"),n.Ob()),2&e){const e=n.Yb(4);n.yb(1),n.xc(" Amount should not be greater than ",n.bc(2,1,e.primaryOrder.totalDueAmount,"1.2-2")," ")}}function Mr(e,t){if(1&e&&(n.Pb(0,"div",114),n.Pb(1,"div",108),n.Pb(2,"label",109),n.vc(3,"Total Amount*"),n.Ob(),n.Kb(4,"input",118),n.Ob(),n.tc(5,Tr,2,0,"span",111),n.tc(6,Rr,2,0,"span",111),n.tc(7,Ir,3,4,"span",111),n.Ob()),2&e){const e=n.Yb(3);n.yb(5),n.ec("ngIf",e.submitted&&(null==e.f||null==e.f.cheque_amount||null==e.f.cheque_amount.errors?null:e.f.cheque_amount.errors.required)),n.yb(1),n.ec("ngIf",e.submitted&&(null==e.f||null==e.f.cheque_amount||null==e.f.cheque_amount.errors?null:e.f.cheque_amount.errors.equalZero)),n.yb(1),n.ec("ngIf",e.submitted&&(null==e.f||null==e.f.cheque_amount||null==e.f.cheque_amount.errors?null:e.f.cheque_amount.errors.mustMatch))}}function Ar(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",9),n.Pb(1,"div",99),n.Pb(2,"div",100),n.Pb(3,"div",101),n.Pb(4,"div",28),n.Pb(5,"input",102),n.Wb("click",(function(){return n.oc(e),n.Yb(2).currentFullPayment(!0)})),n.Ob(),n.Pb(6,"label",103),n.vc(7,"Full Amount"),n.Ob(),n.Ob(),n.Ob(),n.Pb(8,"div",101),n.Pb(9,"div",28),n.Pb(10,"input",104),n.Wb("click",(function(){return n.oc(e),n.Yb(2).currentFullPayment(!1)})),n.Ob(),n.Pb(11,"label",105),n.vc(12,"Partial Amount"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(13,Sr,2,0,"div",106),n.Pb(14,"div",8),n.Pb(15,"div",107),n.Pb(16,"div",108),n.Pb(17,"label",109),n.vc(18,"Cheque Number*"),n.Ob(),n.Kb(19,"input",110),n.Ob(),n.tc(20,kr,2,0,"span",111),n.Ob(),n.Pb(21,"div",107),n.Pb(22,"div",112),n.Pb(23,"label",109),n.vc(24,"Date*"),n.Ob(),n.Kb(25,"input",113),n.Ob(),n.tc(26,wr,2,0,"span",111),n.Ob(),n.Pb(27,"div",114),n.Pb(28,"div",108),n.Pb(29,"label",109),n.vc(30,"Bank Name*"),n.Ob(),n.Kb(31,"input",115),n.Ob(),n.tc(32,Dr,2,0,"span",111),n.Ob(),n.tc(33,Mr,8,3,"div",116),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(13),n.ec("ngIf",e.submitted&&e.f.isfullAmount.errors),n.yb(7),n.ec("ngIf",e.submitted&&e.f.cheque_number.errors),n.yb(6),n.ec("ngIf",e.submitted&&e.f.cheque_date.errors),n.yb(6),n.ec("ngIf",e.submitted&&e.f.bank_name.errors),n.yb(1),n.ec("ngIf",!e.f.isfullAmount.value)}}function Er(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",119),n.Pb(1,"button",120),n.Wb("click",(function(){return n.oc(e),n.Yb(2).onPaymentsubmit(!0)})),n.vc(2," Add "),n.Ob(),n.Pb(3,"button",121),n.Wb("click",(function(){return n.oc(e),n.Yb(2).onCancelCheque()})),n.vc(4," Cancel "),n.Ob(),n.Ob()}}function qr(e,t){1&e&&(n.Pb(0,"div",3),n.Pb(1,"h5",18),n.vc(2," Add "),n.Pb(3,"span"),n.vc(4,"Credit Information"),n.Ob(),n.Ob(),n.Pb(5,"button",95),n.Pb(6,"span",6),n.vc(7,"\xd7"),n.Ob(),n.Ob(),n.Ob())}function Lr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",28),n.Pb(1,"input",127),n.Wb("click",(function(){return n.oc(e),n.Yb(3).onCreditFullPayment(!0)})),n.Ob(),n.Pb(2,"label",128),n.vc(3,"Full Amount"),n.Ob(),n.Ob()}}function Nr(e,t){1&e&&(n.Pb(0,"div",117),n.vc(1," Please select a payment method! "),n.Ob())}function Yr(e,t){1&e&&(n.Pb(0,"span",25),n.vc(1," Please add Total Amount! "),n.Ob())}function Br(e,t){1&e&&(n.Pb(0,"span",25),n.vc(1," Zero value not allowed "),n.Ob())}function Kr(e,t){if(1&e&&(n.Pb(0,"span",25),n.vc(1),n.Zb(2,"number"),n.Ob()),2&e){const e=n.Yb(4);n.yb(1),n.xc(" Amount should not be greater than ",n.bc(2,1,e.primaryOrder.totalDueAmount,"1.2-2")," ")}}function Fr(e,t){if(1&e&&(n.Pb(0,"div",107),n.Pb(1,"div",108),n.Pb(2,"label",109),n.vc(3,"Amount*"),n.Ob(),n.Kb(4,"input",129),n.Ob(),n.tc(5,Yr,2,0,"span",111),n.tc(6,Br,2,0,"span",111),n.tc(7,Kr,3,4,"span",111),n.Ob()),2&e){const e=n.Yb(3);n.yb(5),n.ec("ngIf",e.submitted&&(null==e.f||null==e.f.cheque_amount||null==e.f.cheque_amount.errors?null:e.f.cheque_amount.errors.required)),n.yb(1),n.ec("ngIf",e.submitted&&(null==e.f||null==e.f.cheque_amount||null==e.f.cheque_amount.errors?null:e.f.cheque_amount.errors.equalZero)),n.yb(1),n.ec("ngIf",e.submitted&&(null==e.f||null==e.f.cheque_amount||null==e.f.cheque_amount.errors?null:e.f.cheque_amount.errors.mustMatch))}}function Jr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",99),n.Pb(1,"div",9),n.Pb(2,"div",100),n.Pb(3,"div",122),n.tc(4,Lr,4,0,"div",123),n.Ob(),n.Pb(5,"div",122),n.Pb(6,"div",28),n.Pb(7,"input",124),n.Wb("click",(function(){return n.oc(e),n.Yb(2).onCreditFullPayment(!1)})),n.Ob(),n.Pb(8,"label",125),n.vc(9,"Partial Amount"),n.Ob(),n.Ob(),n.Ob(),n.tc(10,Nr,2,0,"div",106),n.tc(11,Fr,8,3,"div",126),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.Yb(2);n.yb(4),n.ec("ngIf",!e.primaryOrder.isCheckAdded),n.yb(6),n.ec("ngIf",e.submitted&&e.f.isfullAmount.errors),n.yb(1),n.ec("ngIf",!e.f.isfullAmount.value)}}function Qr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",119),n.Pb(1,"button",120),n.Wb("click",(function(){return n.oc(e),n.Yb(2).onPaymentsubmit(!1)})),n.vc(2," Add "),n.Ob(),n.Pb(3,"button",121),n.Wb("click",(function(){return n.oc(e),n.Yb(2).onPaymentCancel()})),n.vc(4," Cancel "),n.Ob(),n.Ob()}}function Wr(e,t){if(1&e&&(n.Pb(0,"form",96),n.tc(1,Ar,34,5,"div",16),n.tc(2,Er,5,0,"div",97),n.tc(3,qr,8,0,"div",35),n.tc(4,Jr,12,3,"div",98),n.tc(5,Qr,5,0,"div",97),n.Ob()),2&e){const e=n.Yb();n.ec("formGroup",e.paymentForm),n.yb(1),n.ec("ngIf",!e.f.isCredit.value),n.yb(1),n.ec("ngIf",!e.f.isCredit.value),n.yb(1),n.ec("ngIf",e.f.isCredit.value),n.yb(1),n.ec("ngIf",e.f.isCredit.value),n.yb(1),n.ec("ngIf",e.f.isCredit.value)}}function zr(e,t){if(1&e&&(n.Pb(0,"ng-option",78),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e),n.yb(1),n.xc(" ",e.employee_first_name+" "+e.employee_last_name," ")}}function $r(e,t){if(1&e&&(n.Pb(0,"ng-option",78),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e.route_id),n.yb(1),n.xc("",e.name," ")}}function Vr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"ng-select",130),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedRouteId=t}))("change",(function(){return n.oc(e),n.Yb().getRetailerByRoute()})),n.Pb(1,"ng-option",73),n.vc(2,"Select Route"),n.Ob(),n.tc(3,$r,2,2,"ng-option",74),n.Ob()}if(2&e){const e=n.Yb();n.ec("multiple",!1)("ngModel",e.selectedRouteId),n.yb(3),n.ec("ngForOf",e.routes)}}function Zr(e,t){if(1&e&&(n.Pb(0,"ng-option",78),n.vc(1),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e),n.yb(1),n.xc(" ",e.retailer_name," ")}}function Ur(e,t){if(1&e){const e=n.Qb();n.Pb(0,"ng-select",131),n.Wb("ngModelChange",(function(t){return n.oc(e),n.Yb().selectedRetailer=t}))("change",(function(){return n.oc(e),n.Yb().onRetailerChanged()})),n.Pb(1,"ng-option",73),n.vc(2,"Select Retailer"),n.Ob(),n.tc(3,Zr,2,2,"ng-option",74),n.Ob()}if(2&e){const e=n.Yb();n.ec("multiple",!1)("ngModel",e.selectedRetailer),n.yb(3),n.ec("ngForOf",e.retailers)}}function Gr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",132),n.Wb("click",(function(){return n.oc(e),n.Yb().onCheck()})),n.vc(1," Add Cheque "),n.Ob()}}function Hr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",133),n.Wb("click",(function(){return n.oc(e),n.Yb().onRemoveCheck()})),n.vc(1," Remove Cheque "),n.Ob()}}function jr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",132),n.Wb("click",(function(){return n.oc(e),n.Yb().onCredit()})),n.vc(1," Add Credit "),n.Ob()}}function Xr(e,t){if(1&e){const e=n.Qb();n.Pb(0,"button",134),n.Wb("click",(function(){return n.oc(e),n.Yb().onRemoveCredit()})),n.vc(1," Remove Credit "),n.Ob()}}const eo=function(){return["/home"]},to=[{path:"",component:d,children:[{path:"",pathMatch:"full",component:x},{path:"order-list-details/:employeeId/:date",pathMatch:"full",component:M},{path:"dispatch-orders",pathMatch:"full",component:B},{path:"dispatch/:assignId/:saleManId/:date",pathMatch:"full",component:Or},{path:"execution-list",pathMatch:"full",component:z},{path:"execute-order/:saleManId/:date/:loadId",pathMatch:"full",component:yt},{path:"completed-orders",pathMatch:"full",component:Ri},{path:"completed-orders/:id",pathMatch:"full",component:Ri},{path:"counter-sale",pathMatch:"full",component:ki},{path:"new-counter-sale",pathMatch:"full",component:(()=>{class e{constructor(e,t,i,r,o){this.formBuilder=e,this.storageService=t,this.generalDataService=i,this.ordersService=r,this.toastService=o,this.ORDERDROPDOWN=E.a.ORDERDROPDOWN,this.DISTRIBUTOR_ID=this.storageService.getDistributorId(),this.submitted=!1,this.ORDER_TYPE=E.a.ORDER_TYPE,this.PRODUCT_TYPE=E.a.PRODCUT_TYPE,this.CREDIT_ORDER_TYPE=E.a.CREDIT_ORDER_TYPE,this.ORDER_CONTEXT=E.a.ORDER_CONTEXT,this.subscrptions=[],this.schemes=[],this.orderBookers=[],this.showProducts=!1,this.primaryOrder=vr.a.getInstance}ngOnInit(){console.log("this.primaryOrder => ",this.primaryOrder),this.getOrderBookers(),this.generalDataService.getCounterSaleData(),this.getSchemesData(),this.initializeForm()}get f(){return this.paymentForm.controls}initializeForm(){this.paymentForm=this.formBuilder.group({isCheck:[""],isCredit:[""],isfullAmount:["",o.s.required],bank_name:["",o.s.required],cheque_amount:["",o.s.required],cheque_date:["",o.s.required],cheque_number:["",o.s.required]},{validator:_r("cheque_amount")})}currentFullPayment(e){this.paymentForm.patchValue({isfullAmount:e}),this.paymentForm.patchValue(e?{cheque_amount:this.primaryOrder.totalDueAmount}:{cheque_amount:""})}onCreditFullPayment(e){this.paymentForm.patchValue({isfullAmount:e}),this.paymentForm.patchValue(e?{cheque_amount:this.primaryOrder.totalDueAmount}:{cheque_amount:""})}onPaymentsubmit(e){this.submitted=!0,this.paymentForm.invalid||(console.log("this.paymentForm.value =>",this.paymentForm.value),e?(this.primaryOrder.checkPayment=this.f.cheque_amount.value,this.primaryOrder.isCheckAdded=!0):(this.primaryOrder.creditPayment=this.f.cheque_amount.value,this.primaryOrder.isCreditPaymentAdded=!0),this.paymentForm.reset())}onCancelCheque(){this.paymentForm.patchValue({isCheck:!1})}onCheck(){this.submitted=!1,this.paymentForm.patchValue({isCheck:!0}),this.paymentForm.patchValue({isCredit:!1})}onRemoveCheck(){this.primaryOrder.isCheckAdded=!1}onCredit(){this.submitted=!1,this.paymentForm.patchValue({isCredit:!0}),console.log("isCredit => ",this.f.isCredit.value),this.paymentForm.patchValue({isCheck:!1}),this.onCreditPaymentValuesSettings(),this.primaryOrder.isShowCreditBtn&&this.paymentForm.patchValue({isfullAmount:!1})}onCreditPaymentValuesSettings(){this.paymentForm.patchValue({bank_name:"pp"}),this.paymentForm.patchValue({cheque_number:"pp"}),this.paymentForm.patchValue({cheque_date:"pp"})}onPaymentCancel(){this.paymentForm.reset()}onRemoveCredit(){this.primaryOrder.isCreditPaymentAdded=!1}showErrorToaster(e){this.toastService.showToaster({type:"error",message:e,title:"Error:"})}getOrderBookers(){this.generalDataService.getOrderBookers(this.DISTRIBUTOR_ID).subscribe(e=>{this.checkApiStatus(e)?this.orderBookers=e.data:this.showErrorToaster(e.message)},e=>{this.showErrorToaster("Cannot fetch order bookers. Please try again")})}checkApiStatus(e){return this.generalDataService.checkApiStatus(e)}getRoutes(){this.resetDropDowns(this.ORDERDROPDOWN.BOOKER_CHANGED),this.generalDataService.getOrderBookerRoutes(this.selectedBooker.employee_id).subscribe(e=>{this.checkApiStatus(e)?this.routes=e.data:this.showErrorToaster(e.message)},e=>{this.showErrorToaster("Cannot fetch order bookers. Please try again")})}getRetailerByRoute(){this.resetDropDowns(this.ORDERDROPDOWN.BOOKER_CHANGED),this.generalDataService.getRetailersByRoute(this.selectedRouteId).subscribe(e=>{this.checkApiStatus(e)?(this.logger("retailers => ",e),this.retailers=e.data):this.showErrorToaster(e.message)},e=>{this.showErrorToaster("Cannot fetch order bookers. Please try again")})}resetDropDowns(e){switch(e){case this.ORDERDROPDOWN.BOOKER_CHANGED:this.resetRoute()}}onRetailerChanged(){this.primaryOrder.retailer=this.selectedRetailer}resetRoute(){}logger(e,t){console.log(e+" => ",t)}getSchemesData(){this.ordersService.getProdSchemes()}showProductsList(e){this.primaryOrder.assignedRouteId=this.selectedRouteId,this.primaryOrder.regionId=this.selectedBooker.region_id,this.primaryOrder.employeeId=this.selectedBooker.employee_id,this.primaryOrder.retailerId=this.selectedRetailer.retailer_id,this.primaryOrder.retailer=this.selectedRetailer,this.primaryOrder.creditOrderType=this.selectedOrderCreditType,this.primaryOrder.orderContext=this.selectedOrderContext,this.generalDataService.setShowProducts$=!0,this.generalDataService.mergeSchemesIntoProducts(),document.body.classList.add("no-scroll"),document.getElementsByClassName("overlay-blure")[0].classList.add("d-block"),document.getElementById("counter-sale").classList.add("blur-div")}getDiscountSlabs(){this.generalDataService.getDiscountSlabs()}onCreditTypeChange(){this.primaryOrder.creditOrderType=this.selectedOrderCreditType}onSaveOrder(){this.isSavingOrder=!0,this.setOrderFields()}isDataValid(){return!(this.primaryOrder.items&&!this.primaryOrder.items.length||!this.selectedBooker&&!this.selectedRouteId||!this.selectedRetailer)}setOrderFields(){const e=this.storageService.getItem("distributor").id;if(this.isDataValid()){const t={area_id:this.selectedBooker.area_id,assigned_route_id:this.selectedRouteId,booked_order_value:0,booked_total_qty:0,booked_total_skus:0,booking_area:this.selectedBooker.area_id,booking_locality_id:this.selectedRetailer.locality_id,booking_neighbourhood_id:this.selectedRetailer.neighbourhood_id,booking_region:this.selectedBooker.region_id,booking_territory:this.selectedBooker.territory_id,booking_zone:this.selectedBooker.area_id,counter_sale:1,credit_order_type:this.selectedOrderCreditType.toString(),creditsales_at:this.selectedOrderCreditType===this.CREDIT_ORDER_TYPE.Regular_Order?null:new Date,distributor_id:e,employee_id:this.selectedBooker.employee_id,freight_charges:0,gross_sale_amount:this.primaryOrder.grossPrice,invoice_date:(new Date).toISOString(),invoice_number:"",items:[],order_context:this.primaryOrder.orderContext,order_total:this.primaryOrder.totalBill,order_type:"counter",payment:{total_payment:this.primaryOrder.totalDueAmount,detail:[]},region_id:this.selectedBooker.region_id,remarks:"notes",retailer_id:this.selectedRetailer.retailer_id,sales_man_id:0,spot_sale:0,status:this.selectedOrderCreditType===this.CREDIT_ORDER_TYPE.Regular_Order?"Completed":E.a.Creditsale_Satatus,status_code:this.selectedOrderCreditType===this.CREDIT_ORDER_TYPE.Regular_Order?0:5,territory_id:this.selectedBooker.territory_id,total_amount_after_tax:this.primaryOrder.totalDueAmount,total_discount:this.primaryOrder.discount,total_retail_price:this.primaryOrder.totalRetailPrice,total_tax_amount:this.primaryOrder.tax,ttl_products_sold:this.primaryOrder.totalItemsCount,ttl_qty_sold:this.primaryOrder.totalQty,within_radius:0};this.setOrderItems(t),this.placeOrder(t)}else this.toastService.showToaster({type:"error",message:"Please select Employee, Route, Retailer and Products to place the order!",title:"Error:"})}setOrderItems(e){this.primaryOrder.items.forEach((t,i)=>{e.items.push({area_id:this.primaryOrder.areaId,assigned_route_id:this.primaryOrder.assignedRouteId,booked_order_value:0,booked_total_qty:0,booker_discount:t.booker_discount,brand_id:t.brandId,campaign_id:t.schemeId||0,dispatch_status:0,distributor_id:this.primaryOrder.distributorId,division_id:t.divisionId,final_price:t.totalBill,gift_value:t.giftValue||0,gross_sale_amount:t.grossPrice,is_exclusive:t.isExclusive,item_id:t.itemId,item_name:t.itemName,item_quantity_booker:0,item_quantity_updated:0,item_status:t.itemStatus,merchant_discount:t.tradeDiscount,merchant_discount_pkr:t.total_trade_discount_pkr,order_id:0,original_price:t.tradePrice,parent_brand_id:t.brandId,parent_pref_id:t.parentPrefId,parent_qty_sold:t.quantity,parent_tp:t.parentTp,parent_unit_id:t.parentUnitId,parent_value_sold:t.totalBill,pref_id:t.prefId,quantity:t.quantity,quantity_returned:0,reasoning:"",region_id:this.primaryOrder.regionId,scheme_discount:t.tradeDiscount,scheme_id:t.schemeId,scheme_min_quantity:t.scheme_min_quantity,scheme_quantity_free:t.scheme_quantity_free,scheme_rule:t.rule_name,special_discount:t.special_discount,tax_class_id:t.taxClassId,tax_in_percentage:t.tax_amount,tax_in_value:t.tax,territory_id:this.primaryOrder.territoryId,total_amount_after_tax:t.totalBill,total_discount:t.totalDiscount,total_retail_price:t.totalRetailPrice,total_tax_amount:t.totalTaxAmount,unit_id:t.unitId,unit_name:t.unitName,unit_price_after_individual_discount:0,unit_price_after_merchant_discount:t.unitTradeDiscountPkr,unit_price_after_scheme_discount:t.unit_price_after_scheme_discount,unit_price_after_special_discount:t.unit_price_after_special_discount||0})})}placeOrder(e){this.ordersService.counterSaleOrder(e).subscribe(e=>{},e=>{1!==e.status&&401!==e.status&&this.toastService.showToaster({type:"error",message:"Order cannot be placed at the moment! Please try again",title:"Error:"})})}isFullyPaymentAdded(e){}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(o.c),n.Jb(K.a),n.Jb(Pr.a),n.Jb(c.a),n.Jb(l.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-counter-sale"]],decls:195,vars:27,consts:[["id","billsModalCounterSale","tabindex","-1","role","dialog","aria-labelledby","billsModalCounterSaleLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","top_border"],[1,"modal-header"],["id","billsModalCounterSaleLabel",1,"modal-title"],["type","button","id","close-bills","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-12"],[1,"heading3"],[1,"row","print-icon-div","pb-0"],[1,"col-6","pl-0"],["src","assets/images/a4.svg","alt","",1,"print-icon"],[1,"col-6","pr-0"],["src","assets/images/a5.svg","alt","",1,"print-icon"],["class","col-12",4,"ngIf"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","dont-close-products"],["aria-hidden","true",1,"dont-close-products"],[1,"modal-body","AddDetailPR"],[1,"col-md-4","pt-7","mb-15"],[1,"col-md-8","mb-15"],["type","text","placeholder","","required","",1,"form-control",2,"font-size","13px"],[1,"input-error"],[1,"col-md-4",2,"padding-top","2px"],[1,"col-md-8"],[1,"custom-control","custom-radio"],["type","radio","name","AssignCatalogue","id","byTerritory-",1,"custom-control-input"],["for","byTerritory-",1,"custom-control-label","font13",2,"line-height","25px"],[1,"modal-footer","border-0",2,"background-color","#f6f6f6"],["type","submit",1,"btn","btn-primary","dont-close-products"],["type","button","id","pl-qty-close","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel","dont-close-products"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["class","modal-header",4,"ngIf"],[3,"formGroup",4,"ngIf"],["id","product-cl-sec"],["id","pl-close",1,"close-btn-pl"],[1,"pro-header-text"],[1,"se_cus-type","form-wrap","p-15"],[1,"productSearch"],[1,"fa","fa-search"],["type","text","id","","placeholder","Search",1,"form-control"],[1,"pc-cartlist"],[1,"overflow-plist"],[1,"plist-content"],[1,"_left-filter","pt-0"],[1,"container"],[1,"card","top_border","p-15"],["width","100%",1,"AddProductTable"],[1,"ProListDiv"],[1,"lab-promotion"],["alt","",1,"PrList_img"],[1,"PR_Name"],[2,"display","block","opacity","0.6","padding-top","5px"],["data-toggle","modal","data-target","#exampleModal",1,"btn","btn-default","mb-0","dont-close-quantity"],[1,"btn","btn-default","mb-0","red-bg","dont-close-product"],[1,"col-md-12","loader"],[1,"loading"],[1,"_cl-bottom"],["id","pl-prod-close","type","butotn",1,"btn","btn-cancel","mr-2"],["id","counter-sale",1,"container","_order-container"],["data-toggle","modal","data-target","#billsModalCounterSale","id","billsPrintPaperModalTrigger","hidden","",1,"btn","btn-default","mb-0"],[1,"row","mt-2","mb-2"],[1,"col-md-12"],[1,"_head01","float-left"],[1,"row","mt-2"],[1,"card","p-20","top_border","mb-3","_INV-h"],[1,"row","_add-customer"],[1,"_sa-customer"],[1,"form-s2"],["placeholder","Select Employee",3,"ngModel","multiple","ngModelChange","change"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","formselect","placeholder","Select Route",3,"multiple","ngModel","ngModelChange","change",4,"ngIf"],["class","formselect","placeholder","Select Retailer",3,"multiple","ngModel","ngModelChange","change",4,"ngIf"],["placeholder","Select Order Type",3,"ngModel","change","ngModelChange"],[3,"value"],["placeholder","Select Prodcut Type",3,"ngModel","change","ngModelChange"],["id","productlist01",1,"btn","btn-primary","ml-15",3,"click"],[1,"_cut-detail"],[1,"col-md-6"],[1,"Action_bottom"],[1,"container-fluid","p-0"],[1,"align-right"],["type","submit","disabled","",1,"btn","btn-primary","mr-2"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary","btn-cancel","mr-2",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-cancel","mr-2"],[1,"btn","btn-primary",3,"click"],["id","open-modal-payment","data-toggle","modal","data-target","#exampleModal2","class","btn btn-primary float-left mr-2",3,"click",4,"ngIf"],["class","btn btn-primary float-left mr-2 red-bg",3,"click",4,"ngIf"],["class","btn btn-primary float-left red-bg",3,"click",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],[3,"formGroup"],["class","modal-footer border-0",4,"ngIf"],["id","floating-label","class","form-wrap p-0",4,"ngIf"],["id","floating-label",1,"form-wrap","p-0"],[1,"row","pt-10"],[1,"col-4"],["type","radio","name","payment","id","payment1","value","full",1,"custom-control-input",3,"click"],["for","payment1",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["type","radio","name","payment","id","payment2","value","partial",1,"custom-control-input",3,"click"],["for","payment2",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["class","col-12 input-error",4,"ngIf"],[1,"col-md-6","PT-10"],[1,"form-group"],[1,"control-label","mb-10"],["type","text","id","chequeNum","name","cheque_num","required","","autocomplete","off","formControlName","cheque_number",1,"form-control","cheque_num"],["class","input-error",4,"ngIf"],[1,"form-group","focused"],["type","date","id","datepicker","required","","placeholder","","autocomplete","off","name","payment_date","x","","formControlName","cheque_date",1,"form-control","cheque_date"],[1,"col-md-6","PT-5"],["type","text","name","cheque_bank_name","id","chequeBankName","required","","autocomplete","off","formControlName","bank_name",1,"form-control","cheque_bank_name"],["class","col-md-6 PT-5",4,"ngIf"],[1,"col-12","input-error"],["type","number","min","0","id","Amount1","autocomplete","off","formControlName","cheque_amount",1,"form-control","cheque_amount"],[1,"modal-footer","border-0"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","id","close-payment-modal","data-dismiss","modal","aria-label","Close",1,"btn","btn-cancel",3,"click"],[1,"col-6"],["class","custom-control custom-radio",4,"ngIf"],["type","radio","name","payment","id","Amount2","value","partial",3,"click"],["for","Amount2",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["class","col-md-6 PT-10",4,"ngIf"],["name","payment","id","Amount1","value","full",1,"custom-control-input",3,"click"],["for","Amount1",1,"custom-control-label",2,"font-size","13px","line-height","25px"],["type","number","min","0","autocomplete","off","formControlName","cheque_amount",1,"form-control","cheque_amount"],["placeholder","Select Route",1,"formselect",3,"multiple","ngModel","ngModelChange","change"],["placeholder","Select Retailer",1,"formselect",3,"multiple","ngModel","ngModelChange","change"],["id","open-modal-payment","data-toggle","modal","data-target","#exampleModal2",1,"btn","btn-primary","float-left","mr-2",3,"click"],[1,"btn","btn-primary","float-left","mr-2","red-bg",3,"click"],[1,"btn","btn-primary","float-left","red-bg",3,"click"]],template:function(e,t){1&e&&(n.Kb(0,"app-products-model"),n.Pb(1,"div",0),n.Pb(2,"div",1),n.Pb(3,"div",2),n.Pb(4,"div",3),n.Pb(5,"h5",4),n.vc(6," Print bill for this order"),n.Kb(7,"span"),n.Ob(),n.Pb(8,"button",5),n.Pb(9,"span",6),n.vc(10,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(11,"div",7),n.Pb(12,"div",8),n.Pb(13,"div",9),n.Pb(14,"h3",10),n.vc(15,"Select paper size for print"),n.Ob(),n.Ob(),n.Ob(),n.Pb(16,"div",11),n.Pb(17,"div",12),n.Pb(18,"a"),n.Kb(19,"img",13),n.Pb(20,"strong"),n.vc(21,"A4 Portrait Paper"),n.Ob(),n.Ob(),n.Ob(),n.Pb(22,"div",14),n.Pb(23,"a"),n.Kb(24,"img",15),n.Pb(25,"strong"),n.vc(26,"A5 Landscape Paper"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.tc(27,xr,2,0,"div",16),n.Pb(28,"span"),n.Pb(29,"div",17),n.Pb(30,"div",1),n.Pb(31,"div",2),n.Pb(32,"div",3),n.Pb(33,"h5",18),n.vc(34," Product "),n.Pb(35,"span"),n.vc(36," Detail"),n.Ob(),n.Ob(),n.Pb(37,"button",19),n.Pb(38,"span",20),n.vc(39,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(40,"div",21),n.Pb(41,"div",8),n.Pb(42,"div",22),n.vc(43,"Add Quantity:"),n.Ob(),n.Pb(44,"div",23),n.Kb(45,"input",24),n.Pb(46,"span",25),n.vc(47," Please add Quantity! "),n.Ob(),n.Pb(48,"span",25),n.vc(49," Quantity should be greater than 0! "),n.Ob(),n.Ob(),n.Pb(50,"div",22),n.vc(51,"Unit:"),n.Ob(),n.Pb(52,"div",23),n.vc(53," unitname "),n.Ob(),n.Pb(54,"div",26),n.vc(55,"Trade Offer:"),n.Ob(),n.Pb(56,"div",27),n.Pb(57,"div"),n.Pb(58,"div",28),n.Kb(59,"input",29),n.Pb(60,"label",30),n.vc(61," scheme title "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(62,"div",31),n.Pb(63,"button",32),n.vc(64," Confirm "),n.Ob(),n.Pb(65,"button",33),n.vc(66," Cancel "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(67,"div",34),n.Pb(68,"div",1),n.Pb(69,"div",2),n.tc(70,Cr,8,0,"div",35),n.tc(71,Wr,6,6,"form",36),n.Ob(),n.Ob(),n.Ob(),n.Pb(72,"div",37),n.Kb(73,"a",38),n.Pb(74,"div",39),n.vc(75,"Add "),n.Pb(76,"span"),n.vc(77,"Product"),n.Ob(),n.Ob(),n.Pb(78,"div",40),n.Pb(79,"div",8),n.Pb(80,"div",9),n.Pb(81,"div",41),n.Kb(82,"i",42),n.Kb(83,"input",43),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(84,"div",44),n.Pb(85,"div",45),n.Pb(86,"div",46),n.Pb(87,"div",47),n.Pb(88,"div",48),n.Pb(89,"div",8),n.Pb(90,"div",9),n.Pb(91,"div",49),n.Pb(92,"table",50),n.Pb(93,"tbody"),n.Pb(94,"tr"),n.Pb(95,"td"),n.Pb(96,"div",51),n.Pb(97,"div",52),n.vc(98,"Scheme"),n.Ob(),n.Kb(99,"img",53),n.Pb(100,"div",54),n.Pb(101,"span",55),n.vc(102," SKU: x "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(103,"td"),n.Pb(104,"button",56),n.vc(105," Add "),n.Ob(),n.Pb(106,"button",57),n.vc(107," Remove "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(108,"div",58),n.Pb(109,"h2",59),n.vc(110,"Loading Products..."),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(111,"div",60),n.Pb(112,"button",61),n.vc(113," Cancel "),n.Ob(),n.Ob(),n.Ob(),n.Pb(114,"div",62),n.Pb(115,"button",63),n.vc(116," Bill "),n.Ob(),n.Pb(117,"div",64),n.Pb(118,"div",65),n.Pb(119,"h2",66),n.vc(120,"Title"),n.Pb(121,"span"),n.vc(122,"Order"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(123,"div",67),n.Pb(124,"div",65),n.Pb(125,"div",68),n.Pb(126,"div",69),n.Pb(127,"div",9),n.Pb(128,"div",8),n.Pb(129,"div",70),n.Pb(130,"div",71),n.Pb(131,"ng-select",72),n.Wb("ngModelChange",(function(e){return t.selectedBooker=e}))("change",(function(){return t.getRoutes()})),n.Pb(132,"ng-option",73),n.vc(133," Select Employee "),n.Ob(),n.tc(134,zr,2,2,"ng-option",74),n.Ob(),n.Ob(),n.Ob(),n.Pb(135,"div",70),n.Pb(136,"div",71),n.tc(137,Vr,4,3,"ng-select",75),n.Ob(),n.Ob(),n.Pb(138,"div",70),n.Pb(139,"div",71),n.tc(140,Ur,4,3,"ng-select",76),n.Ob(),n.Ob(),n.Pb(141,"div",70),n.Pb(142,"div",71),n.Pb(143,"ng-select",77),n.Wb("change",(function(){return t.onCreditTypeChange()}))("ngModelChange",(function(e){return t.selectedOrderCreditType=e})),n.Pb(144,"ng-option",78),n.vc(145," Regular Order"),n.Ob(),n.Pb(146,"ng-option",78),n.vc(147," Credit Order without Discount"),n.Ob(),n.Pb(148,"ng-option",78),n.vc(149," Credit Order with Discount"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(150,"div",70),n.Pb(151,"div",71),n.Pb(152,"ng-select",79),n.Wb("change",(function(){return t.getDiscountSlabs()}))("ngModelChange",(function(e){return t.selectedOrderContext=e})),n.Pb(153,"ng-option",78),n.vc(154," Normal "),n.Ob(),n.Pb(155,"ng-option",78),n.vc(156," Exclusive "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(157,"button",80),n.Wb("click",(function(e){return t.showProductsList(e)})),n.vc(158," Add Product "),n.Ob(),n.Ob(),n.Pb(159,"div",81),n.Pb(160,"div",8),n.Pb(161,"div",82),n.Pb(162,"strong"),n.vc(163,"Retailer Name: \xa0 "),n.Ob(),n.vc(164),n.Ob(),n.Pb(165,"div",82),n.Pb(166,"strong"),n.vc(167,"Channel Type: \xa0 "),n.Ob(),n.vc(168),n.Ob(),n.Pb(169,"div",82),n.Pb(170,"strong"),n.vc(171,"Location: \xa0 "),n.Ob(),n.vc(172),n.Ob(),n.Pb(173,"div",82),n.Pb(174,"strong"),n.vc(175,"Territory: \xa0 "),n.Ob(),n.vc(176),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Kb(177,"app-order-content"),n.Ob(),n.Pb(178,"div",83),n.Pb(179,"div",84),n.Pb(180,"div",85),n.Pb(181,"button",86),n.Pb(182,"div",87),n.Pb(183,"span",88),n.vc(184,"Loading..."),n.Ob(),n.Ob(),n.Ob(),n.Pb(185,"button",89),n.vc(186," Cancel "),n.Ob(),n.Pb(187,"button",90),n.vc(188," Cancel Order "),n.Ob(),n.Pb(189,"button",91),n.Wb("click",(function(){return t.onSaveOrder()})),n.vc(190),n.Ob(),n.tc(191,Gr,2,0,"button",92),n.tc(192,Hr,2,0,"button",93),n.tc(193,jr,2,0,"button",92),n.tc(194,Xr,2,0,"button",94),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.yb(27),n.ec("ngIf",!1),n.yb(43),n.ec("ngIf",t.f.isCheck.value),n.yb(1),n.ec("ngIf",t.f.isCheck.value||t.f.isCredit.value),n.yb(60),n.ec("ngModel",t.selectedBooker)("multiple",!1),n.yb(3),n.ec("ngForOf",t.orderBookers),n.yb(3),n.ec("ngIf",t.selectedBooker),n.yb(3),n.ec("ngIf",t.selectedRouteId),n.yb(3),n.ec("ngModel",t.selectedOrderCreditType),n.yb(1),n.ec("value",t.CREDIT_ORDER_TYPE.Regular_Order),n.yb(2),n.ec("value",t.CREDIT_ORDER_TYPE.Credit_Order_Without_Discount),n.yb(2),n.ec("value",t.CREDIT_ORDER_TYPE.Credit_Order_With_Discount),n.yb(4),n.ec("ngModel",t.selectedOrderContext),n.yb(1),n.ec("value",t.ORDER_CONTEXT.NORMAL),n.yb(2),n.ec("value",t.ORDER_CONTEXT.EXCLUSIVE),n.yb(9),n.xc(" ",(null==t.primaryOrder.retailer?null:t.primaryOrder.retailer.retailer_name)||"--"," "),n.yb(4),n.yc(" ",(null==t.primaryOrder.retailer?null:t.primaryOrder.retailer.type)||"--"," "," ("+((null==t.primaryOrder.retailer?null:t.primaryOrder.retailer.segment_name)||"--")+")"," "),n.yb(4),n.xc(" ",(null==t.primaryOrder.retailer?null:t.primaryOrder.retailer.loc)||"--"," "),n.yb(4),n.xc(" ",(null==t.primaryOrder.retailer?null:t.primaryOrder.retailer.territory)||"--"," "),n.yb(9),n.ec("routerLink",n.hc(26,eo)),n.yb(5),n.xc(" ","Save Order"," "),n.yb(1),n.ec("ngIf",t.primaryOrder.isShowChequeAndCreditButtons&&t.primaryOrder.showCheckButton&&!t.primaryOrder.isCheckAdded&&t.selectedOrderCreditType===t.CREDIT_ORDER_TYPE.Regular_Order),n.yb(1),n.ec("ngIf",t.primaryOrder.isCheckAdded),n.yb(1),n.ec("ngIf",t.primaryOrder.isShowChequeAndCreditButtons&&t.primaryOrder.isShowCreditBtn&&!t.primaryOrder.isCreditPaymentAdded),n.yb(1),n.ec("ngIf",t.primaryOrder.isCreditPaymentAdded))},directives:[fr.a,r.k,b.a,o.h,o.k,b.c,r.j,yr.a,a.g,p.a,o.u,o.i,o.e,o.b,o.q,o.d,o.m],pipes:[r.d],styles:['._date-order{padding-left:15px}._sa-customer{flex:0 0 265px;max-width:265px;padding-right:0}.calendar-icon{top:6px}._add-product .addItemCell{width:230px}._add-product .unit-w{width:130px}.addItemCell2{text-align:left!important;color:#282828!important}.AP_heading .addItemCell2{color:#0038ba!important}._add-product input{text-align:left!important}._add-product .addItemCell2_input{text-align:left!important;border:1px solid #fff!important;height:25px!important;margin-top:-3px}._add-product .addItemCell3{width:100px;text-align:right!important}._order-del{right:10px}._INV-h:hover ._row-product .addItemCell2_input{border:1px solid #e9e9e9!important}.ng-select .ng-select-container{border-radius:0}.addItemCell .ng-select .ng-select-container{height:25px!important;min-height:25px!important;border-radius:0;text-transform:capitalize}.addItemCell .ng-select .ng-select-container div.ng-input{top:2px!important}._cut-detail,.ng-option,.ng-select span{text-transform:capitalize}._row-product .addItemCell3{color:#282828!important}._totalBar2 ._h25{height:20px;color:#282828;font-size:14px}._totalBar2 .width-t{width:196px;text-align:right!important}._totalBar2 .addItemCell3{font-family:Rationale,sans-serif;font-size:17px;line-height:1}.itemQTY{font-size:12px;width:70px;padding:0 5px;border:1px solid #e6e6e6}.itemIMG{width:32px;height:32px;border:1px solid #e5e5e5;margin-top:-5px;margin-bottom:-5px;margin-right:5px;float:left}.productSearch{position:relative}.productSearch input{height:32px;border:1px solid #eae9e9;box-shadow:none;padding-left:30px;font-size:13px;letter-spacing:1px}.productSearch .fa{position:absolute;top:8px;left:8px;color:#b5b5b5}.AddProductTable{padding:0;margin:0}.AddProductTable tr{border-bottom:1px solid #eee}.AddProductTable td{padding-bottom:10px;padding-top:10px}.ProListDiv{padding:0;display:table;position:relative}.ProListDiv .PR_Name{display:table-cell;vertical-align:middle;font-size:14px;letter-spacing:1px;line-height:16px}.ProListDiv .PrList_img{width:50px;height:50px;margin-right:8px;border:1px solid #e0e0e0}.AddProductTable .btn-default{padding:5px 8px;font-size:13px;border-radius:0;-khtml-border-radius:0;background:linear-gradient(90deg,#1e54d3,#0038ba);color:#fff;text-align:center;margin:0;line-height:1;min-width:74px;letter-spacing:1px;float:right;border:none!important}.AddDetailPR{padding:25px;font-size:14px}.AddDetailPR .form-control{height:32px;border:1px solid #dedede;box-shadow:none;padding:0 10px;font-size:13px;letter-spacing:1px}.AddDetailPR select{border-radius:0;padding:0 10px;height:32px;border:1px solid #dedede;font-size:14px}.Action_bottom{z-index:900}.Action_bottom .btn{letter-spacing:1px;font-size:13px}.se_cus-type{background-color:#fff}._product-name{margin-top:5px;position:relative;padding-right:0;color:#282828;font-size:12px;line-height:normal}.lab-promotion{position:absolute;top:-8px;left:-.438rem;padding:2px 6px;font-size:10.5px;z-index:3;background-color:#fed02a;color:#282828;line-height:1}.lab-promotion:before{border-top:4px solid #000;border-left:7px solid transparent;content:"";left:0;position:absolute;top:14px;z-index:-1}.lab-promotion-l{position:absolute;top:-15px;left:-13px;padding:1px 6px;font-size:10.5px;z-index:3;background-color:#fed02a;color:#282828;line-height:1;letter-spacing:1px}.lab-promotion-l:before{border-top:4px solid #000;border-left:7px solid transparent;content:"";left:0;position:absolute;top:12px;z-index:-1}._row-product{padding:12px 0 10px!important}._order-container{max-width:1270px}.loader{text-align:center;padding:30px}.loading{color:#b5b5b5;font-size:24px;margin:0 auto}.ng-select .ng-clear-wrapper{display:none}.custom-control-label{text-transform:capitalize}.no-data{width:100%;color:#a89a9a;font-size:20px;text-align:center}.input-error{color:red;font-size:13px;float:left}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}'],encapsulation:2}),e})()},{path:"booking-vs-execution",pathMatch:"full",component:wi}]}];let io=(()=>{class e{}return e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({factory:function(t){return new(t||e)},imports:[[a.i.forChild(to)],a.i]}),e})();var ro=i("FpXt");let oo=(()=>{class e{}return e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({factory:function(t){return new(t||e)},providers:[Mi,$,V,c.a],imports:[[r.b,io,o.f,o.p,St.b,b.b,ro.a,u.b]]}),e})()}}]);